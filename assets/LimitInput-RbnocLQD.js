import{r,j as e,V as S,P as b}from"./index-BOhqUyL1.js";import{d as f}from"./useDataContext-ZN1wLiJz.js";import{y as P,z as L,a as m,A as I,P as R,x,X as v,j as D}from"./sort-DoJIZ7Cq.js";const B=t=>{const s=r.useRef(null),[i,n]=r.useState(50);return r.useEffect(()=>{s.current&&n(s.current.offsetWidth+10)},[t]),{CalculateWidthFromHere:e.jsx("span",{ref:s,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:t||" "}),width:i}},F=({getSuggestions:t=()=>[],inputStyle:s,onChange:i,display:n,pageParameter:l,placeholder:c,value:o})=>{const{CalculateWidthFromHere:y,width:j}=B(o),[u,d]=r.useState(o);r.useEffect(()=>{d(o)},[o,d]),r.useEffect(()=>{const a=setTimeout(()=>i(u),300);return()=>clearTimeout(a)},[u]);const[p,w]=r.useState([]),[C,h]=r.useState(!1);return r.useEffect(()=>{let a=!0;return(async()=>{const g=await t(u);a&&w(g.slice(0,10))})(),()=>{a=!1}},[t,u]),e.jsxs(e.Fragment,{children:[C&&p.length>0&&e.jsx(P,{children:p.map((a,g)=>e.jsx(T,{pageParameter:l,position:L(g,p.length),setImmediateValue:d,suggestion:a},g))}),e.jsx("input",{type:"text",id:l,className:u===""?"empty":"",value:u,autoComplete:"off",onChange:a=>{d(a.target.value),h(!0)},onBlur:()=>setTimeout(()=>h(!1),500),onFocus:()=>h(!0),placeholder:c,style:{borderRadius:n===m.ButtonList?"0.5em":void 0,padding:"0.5em",lineHeight:"1.5em",...s,width:j+5}}),y,e.jsx(E,{onClick:()=>{d(""),h(!1)},display:n})]})},T=({pageParameter:t,position:s=R.Standalone,setImmediateValue:i,suggestion:n})=>{const{view:l}=f(),c=I(m.Dropdown,!1,s);if(l==S.Details&&t===b.searchString)return e.jsx(W,{suggestion:n,style:c});const o=()=>{i(n.searchString)};return e.jsx("button",{onClick:o,style:c,role:"option",type:"button",children:n.label})},W=({style:t,suggestion:s})=>{const{objectID:i,searchString:n,label:l}=s,{updatePageParams:c}=f(),o=()=>{c({objectID:i,view:S.Details,searchString:n})};return e.jsx(x,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",n]}),onClick:o,style:t,children:l})},E=({onClick:t,display:s})=>e.jsx(x,{buttonType:"reset",hoverContent:"Clear the input",onClick:t,style:{...s===m.ButtonList?{borderRadius:"0.5em",border:"none"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},padding:"0.5em"},children:e.jsx(v,{size:"1em",display:"block"})}),A=()=>{const{limit:t,updatePageParams:s}=f();return e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center"},children:[e.jsx(D,{description:"Limit how many results are shown.",label:"Item Limit",display:m.ButtonList}),e.jsx(F,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"},{searchString:"1000",label:"1000"},{searchString:"-1",label:"∞"},{searchString:"",label:"default"}],onChange:i=>s({limit:parseInt(i)}),display:m.ButtonList,pageParameter:b.limit,placeholder:"∞",value:t.toString()})]})};export{A as L,F as T};
