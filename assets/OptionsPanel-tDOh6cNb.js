import{A as l,r as f,G as W,j as e,Q as z,H as T,X as C,Y as v,Z as k,M as V,$ as P,R as F,a0 as E,P as B,O as u,a1 as H,E as g,b as S,a2 as _,v as b,a3 as R,a4 as d,a5 as K,a6 as Q,L as U,a7 as Y,a8 as $,a as X,a9 as q,aa as Z,V as J,ab as N,F as y,S as L,e as ee,z as te,ac as se,ad as ae,ae as re,af as ie,ag as ne,ah as oe,U as M,ai as le}from"./index-Bef9EFbg.js";import{L as ce,C as ge,a as pe}from"./ColorGradientSelector-BZhpjZBY.js";import{S as ue,T as I}from"./TextInput-BRt615eB.js";import{c as de,b as ye,g as he}from"./filterByConnections-8WGdH23g.js";import{g as me,a as Se,L as be}from"./BaseColorBar-C9-kPGnK.js";const je=()=>{const{page:t,updatePageParams:a}=l();f.useEffect(()=>{const s=i=>{const r=i.target;r!==null&&r instanceof HTMLElement&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable)||(i.key==="ArrowRight"?a({page:t+1}):i.key==="ArrowLeft"&&t>1&&a({page:t-1}))};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[t,a])};function A(t,a,s){return async i=>{const r=i.split("[")[0].trim(),n=de(r,W.CodeOrNameAny);return t.filter(n).sort((o,p)=>a(o)-a(p)).slice(0,ue).map(o=>{const p=e.jsx(z,{object:o,field:W.CodeOrNameAny,query:r,showOriginalName:!0}),c=o.nameDisplay+" ["+o.ID+"]";return{objectID:o.ID,searchString:c,label:p,group:s(o)}})}}const fe=({display:t})=>{const{languageFilter:a,updatePageParams:s}=l(),{languagesInSelectedSource:i}=T(),r=C(v.Population),n=k(),o=ye(),p=he(),c=V(),{display:D}=P(),j=t??D,O=f.useMemo(()=>{const h=m=>{let x=0;return p(m)||(x+=1),o(m)||(x+=2),n(m)||(x+=4),x},G=m=>p(m)?o(m)?n(m)?"matched":"not "+c.languageScope:"not "+c.territoryFilter:"not "+c.writingSystemFilter;return A(i.sort(r),h,G)},[i,n,o,p,c,r]);return e.jsx(F,{display:j,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(E,{label:"Language",description:e.jsxs(e.Fragment,{children:['Filter results to those relevant to a specific language, language family, or dialect. You can enter either the language name or its code. For example, entering "Spanish" or ',e.jsx("code",{children:"spa"})," will filter to objects relevant to Spanish."," ",e.jsx(xe,{})]})}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(I,{inputStyle:{minWidth:"8em"},getSuggestions:O,onSubmit:h=>s({languageFilter:h}),pageParameter:B.languageFilter,placeholder:"Name or code",value:a})})]})})},xe=()=>{const{objectType:t}=l();switch(t){case u.Language:return e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Language view only:"})," Selecting a language family will show the languages in the family. Dialects will also appear if they are enabled."]});case u.Territory:return e.jsx(e.Fragment,{children:"This will filter territories to ones where the selected language is used."});case u.WritingSystem:return e.jsx(e.Fragment,{children:"This will filter writing systems to ones used for the selected language."});case u.VariantTag:return e.jsx(e.Fragment,{children:"This will filter variant tags for ones that are intended for this language."});case u.Locale:return e.jsx(e.Fragment,{children:"This will filter locales with the selected language."});case u.Census:return e.jsxs(e.Fragment,{children:[e.jsx(H,{size:"1em",style:{color:"var(--color-text-yellow)"}})," Censuses are not currently supported by this filter."]})}},Le=[S.Written,S.MostlyWritten,S.SpokenAndWritten,S.MostlySpoken,S.Spoken,S.Sign],we=()=>{const{modalityFilter:t,updatePageParams:a}=l();function s(r){return _(r)??String(r)}return e.jsx(g,{selectorLabel:"Modality",labelWhenEmpty:"Any",selectorDescription:"Filter by how the language is primarily used: written, spoken, sign, or a combination.",options:Le,onChange:r=>t.includes(r)?a({modalityFilter:t.filter(n=>n!==r)}):a({modalityFilter:[...t,r]}),selected:t,getOptionLabel:s})},ve=()=>{const{languageScopes:t,updatePageParams:a}=l();function s(r){return R(Pe(r))}return e.jsx(g,{selectorLabel:"Languoid Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of language-type objects are shown, such as families, macrolanguages, languages, dialects, and special codes.",options:Object.values(b),onChange:r=>t.includes(r)?a({languageScopes:t.filter(n=>n!=r)}):a({languageScopes:[...t,r]}),selected:t,getOptionLabel:s})};function Pe(t){switch(t){case b.Family:return"language families";case b.Macrolanguage:return"macrolanguages";case b.Language:return"languages";case b.Dialect:return"dialects";case b.SpecialCode:return"special codes"}}const Fe=({display:t})=>{const{territoryFilter:a,updatePageParams:s}=l(),{territories:i}=T(),r=k(),n=V(),o=C(v.Population),{display:p}=P(),c=t??p,D=f.useMemo(()=>{const j=h=>r(h)?0:1,O=h=>r(h)?"matched":"not "+n.territoryScope;return A(i.sort(o),j,O)},[i,r,n,o]);return e.jsx(F,{display:c,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(E,{label:"In Territory",description:"Filter results by ones relevant in a territory."}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(I,{inputStyle:{minWidth:"8em"},getSuggestions:D,onSubmit:j=>s({territoryFilter:j}),pageParameter:B.territoryFilter,placeholder:"Name or code",value:a})})]})})},De=()=>{const{territoryScopes:t,updatePageParams:a,objectType:s,view:i}=l();return![u.Territory,u.Locale].includes(s)&&!(i===d.Reports&&s===u.Census)?null:e.jsx(g,{selectorLabel:"Territory Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of territories are shown, such as countries, regions, and dependencies.",options:Object.values(K),onChange:n=>t.includes(n)?a({territoryScopes:t.filter(o=>o!=n)}):a({territoryScopes:[...t,n]}),selected:t})},Oe=()=>{const{isoStatus:t,updatePageParams:a}=l();return e.jsx(g,{selectorLabel:"ISO Language Status",selectorDescription:"Filter languages by their ISO status (Living, Extinct, etc.)",labelWhenEmpty:"Any",options:Object.values(U).filter(s=>typeof s=="number"),onChange:s=>t.includes(s)?a({isoStatus:t.filter(i=>i!==s)}):a({isoStatus:[...t,s]}),selected:t,getOptionLabel:Q})},Te=()=>{const{vitalityEthFine:t,updatePageParams:a}=l();return e.jsx(g,{selectorLabel:"Vitality Eth (Fine)",selectorDescription:"Filter languages by their Extended Graded Intergenerational Disruption Scale (EGIDS) vitality classification sourced from Ethnologue in 2012",labelWhenEmpty:"Any",options:Object.values(X).filter(s=>typeof s=="number"),onChange:s=>t.includes(s)?a({vitalityEthFine:t.filter(i=>i!==s)}):a({vitalityEthFine:[...t,s]}),selected:t,getOptionLabel:$,getOptionDescription:Y})},Ce=()=>{const{vitalityEthCoarse:t,updatePageParams:a}=l();return e.jsx(g,{selectorLabel:"Vitality Eth (Coarse)",selectorDescription:"Filter languages by their Ethnologue 2025 vitality classification, a coarser scale than the 2012 EGIDS",labelWhenEmpty:"Any",options:Object.values(J).filter(s=>typeof s=="number"),onChange:s=>t.includes(s)?a({vitalityEthCoarse:t.filter(i=>i!==s)}):a({vitalityEthCoarse:[...t,s]}),selected:t,getOptionLabel:Z,getOptionDescription:q})},Ee=({display:t})=>{const{writingSystemFilter:a,updatePageParams:s}=l(),{writingSystems:i}=T(),r=C(v.Population),{display:n}=P(),o=t??n,p=f.useMemo(()=>A(i.sort(r),c=>c.scope===N.IndividualScript?0:1,c=>c.scope===N.IndividualScript?"":"other types of scripts"),[i,r]);return e.jsx(F,{display:o,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(E,{label:"Written in",description:"Filter results by ones written in this script."}),e.jsx(I,{inputStyle:{minWidth:"8em"},getSuggestions:p,onSubmit:c=>s({writingSystemFilter:c}),pageParameter:B.writingSystemFilter,placeholder:"Name or code",value:a})]})})},Be=()=>{const{scaleBy:t,updatePageParams:a,objectType:s}=l(),{display:i}=P(),n=["None",...me(s)];return e.jsx(g,{selectorLabel:i===y.Dropdown?"Scale By":void 0,selectorDescription:"Choose a field to scale items by (map circles).",options:n,onChange:o=>a({scaleBy:o}),selected:t})},Ie=()=>{const{sortBy:t,updatePageParams:a,objectType:s}=l(),i=Se(s);return e.jsx(g,{selectorLabel:"Sort By",selectorDescription:"Choose the order of items in the view.",options:Object.values(v).filter(r=>i.includes(r)),onChange:r=>a({sortBy:r}),selected:t,display:y.Dropdown})},Ae=()=>{const{sortBehavior:t,updatePageParams:a}=l();return e.jsx(g,{selectorLabel:"Sort Direction",options:[L.Normal,L.Reverse],getOptionLabel:s=>L[s],getOptionDescription:s=>s===L.Normal?"Sort with high numbers first / first letter in alphabet first.":"Sort with low numbers first / last letter in alphabet first.",onChange:s=>a({sortBehavior:s}),selected:t})},We=()=>{const{localeSeparator:t,updatePageParams:a}=l();return e.jsx(g,{selectorLabel:"Locale Separator",selectorDescription:"Choose the separator in locale codes, eg. 'ar-EG' or 'ar_EG'",options:Object.values(ee),onChange:s=>a({localeSeparator:s}),selected:t})},Ne=()=>{const{objectType:t,updatePageParams:a,view:s}=l(),i=f.useCallback(r=>{a({objectType:r,searchString:void 0,page:1})},[a,s]);return e.jsx(g,{selectorLabel:"Entity",options:Object.values(u),onChange:i,selected:t,display:y.ButtonList,getOptionLabel:r=>te(ae(r)),getOptionDescription:r=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:8},children:"Click here to change the kind of entity viewed."}),e.jsx(se,{objectType:r})]})})},Me=()=>{const{preference:t,setPreference:a}=re();return e.jsx(g,{selectorLabel:"Page Brightness",selectorDescription:"Choose how bright the page should be. This parameter is stored on your device.",options:["light","dark","follow device"],onChange:s=>a(s),selected:t,getOptionLabel:R})},ke=()=>{const{profile:t,updatePageParams:a}=l();return e.jsx(g,{selectorLabel:"Preset",selectorDescription:"Indicate the profile best describing what you are looking for. This will change the presets.",options:Object.values(ie),onChange:s=>a({profile:s}),selected:t})},Ve=()=>{const{view:t,updatePageParams:a}=l();return e.jsx(g,{selectorLabel:"Display",getOptionDescription:s=>e.jsx("img",{src:Re(s),width:180}),options:Object.values(d),onChange:s=>a({view:s,objectID:void 0}),display:y.ButtonList,getOptionLabel:s=>[d.Map,d.Reports].includes(s)?e.jsxs(e.Fragment,{children:[s," ",e.jsx("em",{children:"β"})]}):s,selected:t})};function Re(t){switch(t){case d.CardList:return"/lang-nav/cardlist.png";case d.Hierarchy:return"/lang-nav/hierarchy.png";case d.Map:return"/lang-nav/map.png";case d.Table:return"/lang-nav/table.png";case d.Reports:return"/lang-nav/reports.png"}}const Qe=()=>(je(),e.jsx(ne,{defaultWidth:300,purpose:"filters",title:"Options",children:e.jsxs(F,{display:y.Dropdown,children:[e.jsxs(w,{title:"Common Actions",optionsName:"common actions",children:[e.jsx("div",{}),e.jsx(oe,{})]}),e.jsxs(w,{title:"Data",optionsName:"data options",children:[e.jsx(Ne,{}),e.jsx(be,{display:y.ButtonList}),e.jsx(ke,{})]}),e.jsxs(w,{title:"Filter",optionsName:"filters",children:[e.jsx(Fe,{display:y.ButtonList}),e.jsx(Ee,{display:y.ButtonList}),e.jsx(fe,{display:y.ButtonList}),e.jsx(ve,{}),e.jsx(we,{}),e.jsx(De,{}),e.jsx(Oe,{}),e.jsx(Te,{}),e.jsx(Ce,{})]}),e.jsxs(w,{title:"View",optionsName:"view options",children:[e.jsx(Ve,{}),e.jsx(ce,{}),e.jsx(Ie,{}),e.jsx(Ae,{}),e.jsx(ge,{}),e.jsx(Be,{}),e.jsx(pe,{}),e.jsx(We,{}),e.jsx(Me,{})]})]})})),w=({children:t,title:a,optionsName:s})=>{const[i,r]=M.useState(!1),n=M.Children.toArray(t);return e.jsxs("div",{style:{borderTop:"0.125em solid var(--color-button-primary)",width:"100%",marginBottom:"0.5em"},children:[e.jsx("div",{style:{fontSize:"1.2em",fontWeight:"lighter",borderRadius:"0",width:"100%",textAlign:"left",backgroundColor:"var(--color-button-secondary)",padding:"0.5em"},children:a}),e.jsxs("div",{style:{display:"flex",padding:"0.25em 0.5em",gap:"0.5em",flexDirection:"column"},children:[n[0],i&&n.slice(1),e.jsx(le,{style:{padding:"0em 0.25em"},onClick:()=>r(o=>!o),children:i?`close extra ${s} ▲`:`see all ${s} ▶`})]})]})};export{Qe as default};
