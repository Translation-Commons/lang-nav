import{r as l,j as t,V as p,P as y,m as L,C}from"./index-B5WEnKU4.js";import{d as g,f as P}from"./useDataContext-C393ueoa.js";import{z as D,A as T,a as c,B as G,P as I,y as j,X as R,s as O,S as x,C as W,k}from"./BaseColorBar-BbjWQOxN.js";const F=e=>{const o=l.useRef(null),[r,s]=l.useState(50);return l.useEffect(()=>{o.current&&s(o.current.offsetWidth+10)},[e]),{CalculateWidthFromHere:t.jsx("span",{ref:o,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:e||" "}),width:r}},E=({getSuggestions:e=()=>[],inputStyle:o,onChange:r,display:s,pageParameter:i,placeholder:n,value:a})=>{const{CalculateWidthFromHere:h,width:w}=F(a),[d,m]=l.useState(a);l.useEffect(()=>{m(a)},[a,m]),l.useEffect(()=>{const u=setTimeout(()=>r(d),300);return()=>clearTimeout(u)},[d]);const[S,B]=l.useState([]),[v,f]=l.useState(!1);return l.useEffect(()=>{let u=!0;return(async()=>{const b=await e(d);u&&B(b.slice(0,10))})(),()=>{u=!1}},[e,d]),t.jsxs(t.Fragment,{children:[v&&S.length>0&&t.jsx(D,{children:S.map((u,b)=>t.jsx(H,{pageParameter:i,position:T(b,S.length),setImmediateValue:m,suggestion:u},b))}),t.jsx("input",{type:"text",id:i,className:d===""?"empty":"",value:d,autoComplete:"off",onChange:u=>{m(u.target.value),f(!0)},onBlur:()=>setTimeout(()=>f(!1),500),onFocus:()=>f(!0),placeholder:n,style:{borderRadius:s===c.ButtonList?"0.5em":void 0,padding:"0.5em",lineHeight:"1.5em",...o,width:w+5}}),h,t.jsx(N,{onClick:()=>{m(""),f(!1)},display:s})]})},H=({pageParameter:e,position:o=I.Standalone,setImmediateValue:r,suggestion:s})=>{const{view:i}=g(),n=G(c.Dropdown,!1,o);if(i==p.Details&&e===y.searchString)return t.jsx(A,{suggestion:s,style:n});const a=()=>{r(s.searchString)};return t.jsx("button",{onClick:a,style:n,role:"option",type:"button",children:s.label})},A=({style:e,suggestion:o})=>{const{objectID:r,searchString:s,label:i}=o,{updatePageParams:n}=g(),a=()=>{n({objectID:r,view:p.Details,searchString:s})};return t.jsx(j,{hoverContent:t.jsxs(t.Fragment,{children:["Go to the details page for ",s]}),onClick:a,style:e,children:i})},N=({onClick:e,display:o})=>t.jsx(j,{buttonType:"reset",hoverContent:"Clear the input",onClick:e,style:{...o===c.ButtonList?{borderRadius:"0.5em",border:"none"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},padding:"0.5em"},children:t.jsx(R,{size:"1em",display:"block"})}),X=({display:e=c.Dropdown})=>{const{colorBy:o,updatePageParams:r,objectType:s,view:i}=g(),n=O(s),a=["None",...Object.values(L).filter(h=>n.includes(h))];return i!==p.Map&&i!==p.CardList?null:t.jsx(x,{selectorLabel:e===c.Dropdown?"Color by":void 0,selectorDescription:"Choose the color coding for items in the view.",options:a,onChange:h=>r({colorBy:h}),selected:o,display:e})},q=({display:e=c.Dropdown})=>{const{colorBy:o,colorGradient:r,updatePageParams:s,view:i}=g();return o=="None"||i!==p.Map&&i!==p.CardList?null:t.jsx(x,{selectorLabel:e===c.Dropdown?"Color gradient":void 0,selectorDescription:"Choose the range of colors used to represent values.",options:Object.values(C).filter(n=>typeof n=="number"),onChange:n=>s({colorGradient:n}),selected:r,display:e,getOptionLabel:n=>t.jsx("div",{style:{minWidth:"4em",height:"16px",display:"inline-block"},children:t.jsx(W,{colorGradient:n})}),getOptionDescription:V})};function V(e){var r;const o=((r=Object.entries(C).find(([,s])=>s===e))==null?void 0:r[0])||"";return P(o)}const J=()=>{const{limit:e,updatePageParams:o}=g();return t.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center"},children:[t.jsx(k,{description:"Limit how many results are shown.",label:"Item Limit",display:c.ButtonList}),t.jsx(E,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"},{searchString:"1000",label:"1000"},{searchString:"-1",label:"∞"},{searchString:"",label:"default"}],onChange:r=>o({limit:parseInt(r)}),display:c.ButtonList,pageParameter:y.limit,placeholder:"∞",value:e.toString()})]})};export{X as C,J as L,E as T,q as a};
