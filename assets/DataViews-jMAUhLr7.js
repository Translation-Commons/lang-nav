import{B as Ee,A as T,I as C,$ as z,a_ as Ne,aB as O,r as P,O as m,j as e,as as L,a$ as Be,a6 as le,aV as We,z as Me,T as je,G as fe,ae as Ae,aA as S,aw as y,W,aj as xe,a5 as G,aO as ne,f as ce,F as ue,Z as c,b0 as He,o as $e,q as R,a1 as ze,l as Ue,h as _e,i as qe,aP as be,C as $,aq as M,av as H,H as B,aC as Je,a2 as Le,az as Ye,au as Ce,aH as Ke,aI as Ze,aJ as Qe,aL as Xe,aK as et,b1 as tt,b2 as at,b3 as nt,ay as _,a3 as de,b4 as st,b5 as Y,n as it,aE as rt,aM as ot,aR as lt,a4 as ct,b6 as ut,s as dt,aT as pt,b7 as gt,aY as Te,b8 as ht,b9 as mt,ba as yt,bb as jt}from"./index-CfbeF9P0.js";import{s as se,u as K,t as ft,V as ee,F as xt,v as Z,w as bt,x as Lt,M as Ct,m as Tt,P as ve,I as w,C as F,N as E,T as d,a as V,p as pe,q as ge,y as vt,k as N,c as Se,l as Pe,z as St,L as Pt,A as Dt,O as It,B as kt,d as Ot,e as wt,W as Vt,D as Gt,G as Rt,H as Ft,E as Q,o as Et,J as Nt,K as A,g as De,b as Ie,j as Bt,i as Wt,f as Mt,Q as At,R as Ht}from"./MapContainer-CJXUVYTF.js";import{d as ie,b as $t}from"./filterByConnections-DtDdDwOp.js";import{C as zt,a as Ut,L as ke}from"./ColorGradientSelector-HHjRqU5I.js";import{T as _t}from"./TextInput-C2db10ja.js";import{R as qt,g as Jt}from"./ISORetirements-CkS4CEnO.js";import"./CLDRTypes-FZCh1xb0.js";import"./BaseColorBar-CQQYc9s4.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Kt=Ee("circle-alert",Yt),Oe=({useScope:t=!0,useSubstring:n=!0,useConnections:a=!0,useVitality:s=!0,inputObjects:i})=>{const{objectType:r}=T(),{languagesInSelectedSource:l,locales:p,territories:g,writingSystems:u,variantTags:o,censuses:j}=C(),h=t?z():()=>!0,f=n?se():()=>!0,x=a?ie():()=>!0,b=s?Ne():()=>!0,v=O(),k=P.useMemo(()=>{if(i)return i;switch(r){case m.Census:return Object.values(j);case m.Language:return l;case m.Locale:return p;case m.Territory:return g;case m.WritingSystem:return u;case m.VariantTag:return o}},[r,j,l,p,g,u,o]);return{filteredObjects:P.useMemo(()=>k.filter(U=>h(U)&&f(U)&&x(U)&&b(U)).sort(v),[k,h,f,x,b,v]),allObjectsInType:k}},re=({children:t,style:n})=>e.jsx("div",{className:"ViewCard",style:{borderWidth:"1px",borderRadius:"0.5em",boxShadow:"var(--color-shadow) 0 0 1rem 5px",padding:"1rem",textAlign:"start",...n},children:t}),Zt=300,oe=({children:t})=>{const n=P.useRef(null),[a,s]=P.useState(0);P.useEffect(()=>{const r=new ResizeObserver(([l])=>{l.contentRect&&s(l.contentRect.width)});return n.current&&r.observe(n.current),()=>r.disconnect()},[]);const i=a>0?Math.floor(a/Zt):1;return e.jsx("div",{ref:n,style:{display:"grid",gridGap:"1.5em",gridTemplateColumns:`repeat(${i}, 1fr)`},children:t})},Qt=()=>{const{filteredObjects:t,allObjectsInType:n}=Oe({}),{getCurrentObjects:a}=K(),s=P.useMemo(()=>a(t),[t,a]),{getColor:i}=ft({objects:t});return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1em"},children:[e.jsx(ee,{objects:n}),s.length===0&&e.jsx(L,{children:"No objects found."}),s.length>=1&&e.jsx(oe,{children:s.map(r=>e.jsx(re,{style:{backgroundColor:i(r)??"inherit"},children:e.jsx(Be,{object:r})},r.ID))}),s.length>3&&e.jsx(ee,{objects:n}),s.length===0&&e.jsx(xt,{objects:n,shouldFilterUsingSearchBar:!0})]})},Xt=()=>{const{territories:t}=C(),n=O(),a=z(),s=ea(t,n,a);return e.jsx(Z,{rootNodes:s,description:e.jsx(e.Fragment,{children:"This view shows censuses and census tables, organized by the country they were collected for."})})};function ea(t,n,a=()=>!0){return t.filter(a??(()=>!0)).filter(s=>s.censuses&&s.censuses.length>0).sort(n).map(s=>ta(s,n,a))}function ta(t,n,a){return{type:m.Census,object:t,children:aa(t,n,a)}}function aa(t,n,a){return t.censuses?t.censuses.filter(a).sort(n).map(s=>na(s)):[]}function na(t){return{type:m.Census,object:t,labelStyle:{fontWeight:"bold"},children:[]}}const sa=()=>{const{territories:t}=C(),n=O(),a=z(),s=we(t.filter(i=>i.parentUNRegion==null||!a(i.parentUNRegion)),n,a);return e.jsx(Z,{rootNodes:s,description:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Bold territories"})," are countries. ",e.jsx("em",{children:"Italicized countries"})," are dependencies."]})})};function we(t,n,a){return t.sort(n).filter(a).map(s=>ia(s,n,a))}function ia(t,n,a){return{type:m.Language,object:t,children:t.containsTerritories?we(t.containsTerritories,n,a):[],labelStyle:{fontWeight:t.scope===le.Country?"bold":"normal",fontStyle:t.scope===le.Dependency?"italic":"normal"}}}const ra=()=>{const{variantTags:t}=C(),n=O(),a=oa(t),s=Ve(a,n);return e.jsx(Z,{rootNodes:s,description:e.jsx(e.Fragment,{children:'Variant tags are associated with different "prefixes" (entities in bold) -- usually but not always language codes. This view organizes variant tags by the prefixes they apply to.'})})};function oa(t){return t.reduce((n,a)=>(a.prefixes.forEach(i=>{const r=[...i.split("-"),a.ID];return r.reduce((l,p,g)=>{const u=l[p]||{key:p,branches:{}};return l[p]||(l[p]=u),g===r.length-1&&(u.variantTag=a),u.branches},n),n}),n),{})}function Ve(t,n){return Object.values(t).map(la).filter(a=>a!=null).sort((a,s)=>n(a.object,s.object))}function la(t){const n=We(t.key);return n==null?null:{type:(n==null?void 0:n.type)??m.VariantTag,object:t.variantTag??n,children:Ve(t.branches,O()),labelStyle:{fontWeight:(n==null?void 0:n.type)===m.VariantTag?"normal":"bold"}}}const ca=()=>{const{writingSystems:t}=C(),n=O(),a=P.useMemo(()=>Ge(t.filter(s=>s.parentWritingSystem==null),n),[t,n]);return e.jsx(Z,{rootNodes:a,description:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Bold writing systems"})," historically led to other writing systems that are still used today. ",e.jsx("em",{children:"Italicized writing systems"})," have few recorded users (either missing data or it is functionally extinct)."]})})};function Ge(t,n,a=()=>!0){return t.filter(a).sort(n).map(s=>ua(s,n,a)).filter(s=>s!=null)}function ua(t,n,a){return{type:m.WritingSystem,object:t,children:t.childWritingSystems?Ge(t.childWritingSystems,n,a):[],labelStyle:{fontWeight:((t==null?void 0:t.populationOfDescendants)??0)>100?"bold":"normal",fontStyle:((t==null?void 0:t.populationUpperBound)??0)<=100?"italic":"normal"}}}function da(){const{objectType:t}=T();switch(t){case m.Census:return e.jsx(Xt,{});case m.Language:return e.jsx(Lt,{});case m.Locale:return e.jsx(bt,{});case m.Territory:return e.jsx(sa,{});case m.WritingSystem:return e.jsx(ca,{});case m.VariantTag:return e.jsx(ra,{})}}function pa(){const{colorBy:t,objectType:n}=T(),{filteredObjects:a}=Oe({}),{getCurrentObjects:s}=K(),i=n!==m.Language;if(n===m.VariantTag)return e.jsx("div",{children:"Map view is not well-defined for Variant Tags. Please select a different object type."});const r=n==m.Language?s(a).filter(l=>l.type===m.Language&&(l.latitude==null||l.longitude==null)):[];return e.jsxs(Ct,{children:[e.jsxs("h2",{style:{margin:0},children:[Me(n)," Map"]}),e.jsx("div",{children:ga(n)}),!i&&e.jsx(ee,{objects:a}),e.jsx(Tt,{objects:a}),e.jsx(je,{display:fe.InlineDropdown,children:e.jsxs("div",{style:{display:"flex",gap:"0.5em",alignItems:"center"},children:[e.jsx("div",{children:t==="None"?"You can color the shapes by:":"Shapes are colored by "}),e.jsx(zt,{objectType:i?m.Territory:n}),e.jsx("div",{children:t!=="None"&&"using the color gradient"}),e.jsx(Ut,{})]})}),r.length>0&&e.jsxs("div",{children:["The following ",Ae(n)," do not have defined coordinates:"," ",e.jsx(S,{limit:10,children:r.map(l=>e.jsx(y,{object:l},l.ID))})]})]})}function ga(t){switch(t){case m.Language:return e.jsx(e.Fragment,{children:'These coordinates show the "primary" location of the languages, as defined by Glottolog. This could be the centroid of the area where the language is spoken, or a significant location such as a major city where the language has a presence. It does not represent all the locations where the language is spoken.'});case m.Territory:return e.jsx(e.Fragment,{children:"Large territories are polygons, smaller territories are represented by circles at their centroid coordinates. Mouse over a territory to see more information about it and click it to see the territory details."});case m.Census:return e.jsx(e.Fragment,{children:"While we do not yet have official censuses tables for every country, you can see here the countries that have population data available and hover over to see more details. Most countries have CLDR data."});case m.Locale:return e.jsx(e.Fragment,{children:"The current view shows the territories of the world with how many languages or locales we have associated with them. Hover over the countries to see the list."});case m.WritingSystem:return e.jsx(e.Fragment,{children:"The current view shows the territories of the world with how many writing systems are associated with them. Hover over the countries to see the list."});default:return""}}const D=({title:t,children:n})=>e.jsxs("details",{className:"collapsible-report",children:[e.jsx("summary",{style:{width:"100%",backgroundColor:"var(--color-button-secondary)",padding:"0.5em",borderRadius:"0.5em",cursor:"pointer",textAlign:"left",fontSize:"1.2em",marginBottom:"1em"},children:t}),n]}),ha=()=>{const{getLanguage:t,getTerritory:n,getWritingSystem:a,languagesInSelectedSource:s}=C(),i=se(),r=ie(),l=O(),{getCurrentObjects:p}=K(),g=P.useMemo(()=>s.filter(i).filter(r).filter(u=>u.codeDisplay.match("xx.-|^[0-9]")),[s,i,r]);return e.jsxs(D,{title:`Dubious languages (${g.length})`,children:["These languages have strange language codes and maybe should be removed from the list of languages. Some possibilities are:",e.jsxs("ol",{children:[e.jsx("li",{children:"It may be a dialect that doesn't have a standard ISO code. There may be a glottocode instead -- in that case it's probably redundant."}),e.jsx("li",{children:"If it is a combination of a language + territory, it is probably a locale incorrectly saved to the language list. Add the locale if it does not yet exist then remove the entry from the language list."}),e.jsx("li",{children:"If it is a combination of a language + writing system, it is probably there to represent an non-standard writing system used to write that language. We have not yet imported writing system alternatives so we cannot add that data yet."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1em",marginTop:"1em"},children:[e.jsx(ke,{}),e.jsx("div",{children:e.jsx(ve,{itemCount:g.length})})]}),e.jsx("div",{style:{marginTop:"1em",marginBottom:"1em"},children:e.jsx(oe,{children:p(g.sort(l)).map(u=>{const j=u.codeDisplay.split(/-|_/).map(h=>t(h)??n(h)??a(h)).filter(h=>h!=null);return e.jsxs(re,{children:[e.jsxs("div",{children:[e.jsx("label",{children:"Names:"}),u.nameDisplay]}),e.jsxs("div",{children:[e.jsx("label",{children:"Language Code:"}),u.codeDisplay]}),e.jsxs("div",{children:[e.jsx("label",{children:"Population:"}),u.populationEstimate||e.jsx(L,{children:"no population"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Potentially related objects:"}),e.jsx("ul",{style:{margin:0},children:j.length>0?j.map(h=>e.jsx("li",{children:e.jsx(y,{object:h,labelSource:"code"})},h.ID)):e.jsx(L,{children:"none"})})]})]},u.ID)})})})]})},te=({path:t,getLanguage:n})=>e.jsx("div",{children:t.map((a,s)=>{const i=n(a);return e.jsxs(W.Fragment,{children:[s>0&&" > ",e.jsx(y,{object:i})]},s)})}),ma=({multipleRoutes:t})=>{const{limit:n}=T(),{getLanguage:a}=C(),[s,i]=W.useState(!1),[r,l]=Object.entries(t).reduce((p,[g,u])=>(u.some(j=>{var h;return((h=a(j[0]))==null?void 0:h.ISO.retirementReason)!=null})?p[1][g]=u:p[0][g]=u,p),[{},{}]);return e.jsxs(D,{title:`Languages with multiple routes (${Object.entries(t).length})`,children:["These languages can be reached by more than one distinct path from root languages. This usually indicates data issues, as languages should ideally have a single lineage.",Object.entries(t).length==0&&e.jsx("div",{children:"No multiple routes detected."}),Object.entries(r).length>0&&e.jsxs(e.Fragment,{children:["The detected multiple paths are:",e.jsx(he,{languageToPaths:r,getLanguage:a})]}),Object.entries(l).length>0&&e.jsxs("div",{children:[Object.entries(r).length>0?e.jsxs(e.Fragment,{children:["Separately, the following languages have multiple routes but only when considering paths that include deprecated language codes."," "]}):e.jsxs(e.Fragment,{children:["There are no duplicate routes with regular languages but there are some with deprecated languages."," "]}),"The deprecated language codes may need to be associated with actual glottolog languoids -- OR they may be ignored since it may have been a bad category all along.",e.jsx("div",{children:e.jsxs(xe,{onClick:()=>i(p=>!p),children:[s?"Hide":"Show"," deprecated language codes"]})}),s&&e.jsx(he,{languageToPaths:l,getLanguage:a})]}),Object.entries(t).length>n&&e.jsxs("div",{children:["Showing only the first ",n,' results. Adjust the "limit" parameter to see more.']})]})},he=({languageToPaths:t,getLanguage:n})=>{const{limit:a}=T();return e.jsx("ul",{children:Object.entries(t).slice(0,a).map(([s,i],r)=>e.jsxs("li",{children:[e.jsx("strong",{children:e.jsx(y,{object:n(s)})}),e.jsx("ul",{children:i.map((l,p)=>e.jsx("li",{style:{marginLeft:"0.5em"},children:e.jsx(te,{path:l,getLanguage:n})},p))})]},r))})},ya=()=>{var u;const{limit:t,updatePageParams:n}=T(),{getLanguage:a,languagesInSelectedSource:s}=C(),{orphans:i,longestPaths:r,cycles:l,multipleRoutes:p}=ja(s),g=i.map(o=>a(o)).filter(o=>o!=null).sort((o,j)=>(j.populationEstimate??0)-(o.populationEstimate??0)).slice(0,t);return e.jsxs(D,{title:"Unusual Language Paths",children:["This report looks at the parent/child relationships among languages to identify unusual patterns that may indicate data issues. See also the"," ",e.jsx("button",{onClick:()=>n({view:G.Hierarchy}),children:"Language Family Tree"})," ","view.",e.jsxs("div",{style:{marginTop:"1em",marginLeft:"1em",display:"flex",flexDirection:"column",gap:"1.5em"},children:[e.jsxs(D,{title:`Languages with circular relationships (${l.length})`,children:["This shows the detected cycles in parent-child relationships among languages. Such cycles are usually the result of data errors, and can cause problems in tree visualizations and analyses that assume a strict hierarchy. The cycles detected are:",e.jsx("ul",{children:l.slice(0,t).map((o,j)=>e.jsx("li",{children:e.jsx(te,{path:o,getLanguage:a})},j))}),l.length==0&&e.jsx("div",{children:"No cycles detected."})]}),e.jsxs(D,{title:`Orphaned Languages (${i.length})`,children:["These entries have no parent or child languages, dialects, or language families:",e.jsx("ul",{children:g.map(o=>e.jsxs("li",{children:[e.jsx(y,{object:o})," (",e.jsx(ne,{count:o==null?void 0:o.populationEstimate}),")"]},o==null?void 0:o.ID))}),i.length>t&&e.jsxs("div",{children:["The list is limited to the page limit. There are ",i.length," total."]})]}),e.jsxs(D,{title:`Longest Language Family Paths (longest = ${(u=r[0])==null?void 0:u.length})`,children:["Showing the ",r.length<t?r.length:"top "+t," longest paths from root languages to leaf languages, by distinct root:",e.jsx("ol",{children:r.slice(0,t).map((o,j)=>e.jsxs("li",{children:[e.jsx(te,{path:o,getLanguage:a})," (length: ",o.length,")"]},j))})]}),e.jsx(ma,{multipleRoutes:p})]})]})};function ja(t){const n=new Set,a=[],s=[],i=new Set;function r(o,j=[]){const h=[...j,o.ID];if(n.has(o.ID)&&i.add(o.ID),j.includes(o.ID)){s.push(h);return}if(n.add(o.ID),o.childLanguages==null||o.childLanguages.length===0){a.push(h);return}o.childLanguages.forEach(f=>{r(f,h)})}t.filter(o=>!o.parentLanguage).forEach(o=>r(o)),t.filter(o=>!n.has(o.ID)).forEach(o=>{n.has(o.ID)||r(o)});const p=a.filter(o=>o.length===1).map(o=>o[0]),g=ce(a.filter(o=>o.length>1).sort((o,j)=>j.length-o.length),o=>o[0]).slice(0,10),u=Object.fromEntries(Array.from(i).map(o=>{const j=a.filter(h=>h.includes(o)).map(h=>h.slice(0,h.findIndex(f=>f===o)+1));return[o,ce(j,h=>h.join(">"))]}).filter(([,o])=>o.length>1));return{orphans:p,longestPaths:g,cycles:s,multipleRoutes:u}}const fa=()=>{const{languagesInSelectedSource:t}=C();t.forEach(l=>{l.largestDescendant=void 0}),t.forEach(l=>{l.largestDescendant=Re(l)});const[n,a]=W.useState(0),[s,i]=W.useState(100),r=P.useMemo(()=>t.filter(l=>{var g;if(l.largestDescendant==null||l.populationEstimate==null||l.populationEstimate===0)return!1;const p=(((g=l.largestDescendant)==null?void 0:g.populationEstimate)||0)/(l.populationEstimate||1)*100;return p>=n&&p<=s}),[t,n,s]);return e.jsxs(D,{title:"Largest Descendant",children:["This report shows, for each language family or group, which of its descendants is the largest language by population. This can help identify which languages are the most prominent within a family. It may also reveal some problems in the data, especially if the largest descendant has more population than is estimated for the language/language family itself.",e.jsx(ue,{selectorLabel:"Minimum % of population",options:[0,25,50,75,90,95,99],selected:n,onChange:l=>a(l)}),e.jsx(ue,{selectorLabel:"Maximum % of population",options:[75,90,95,99,99.5,99.9,99.99,100,1e6],selected:s,onChange:l=>i(l)}),e.jsx(w,{tableID:V.LanguagesLargestDescendant,columns:[F,E,{key:"Population",render:l=>l.populationEstimate,valueType:d.Population,sortParam:c.Population},{key:"Estimated Population of Descendants",render:l=>l.populationOfDescendants,valueType:d.Population,sortParam:c.PopulationOfDescendants},{key:"Largest Descendant",render:l=>l.largestDescendant&&e.jsxs(e.Fragment,{children:[e.jsx(y,{object:l.largestDescendant})," [",l.largestDescendant.codeDisplay,"]"]})},{key:"Descendant Population",render:l=>{var p;return((p=l.largestDescendant)==null?void 0:p.populationEstimate)||null},valueType:d.Population},{key:"% Descendant",render:l=>He(l),valueType:d.Decimal,sortParam:c.PopulationPercentInBiggestDescendantLanguage}],objects:r})]})};function Re(t,n=0){if(n>40&&console.debug("Potential infinite recursion for: ",t.ID,"depth: ",n),!(n>50)){if(t.largestDescendant!==void 0)return t.largestDescendant;if(t.childLanguages.length!==0)return t.childLanguages.reduce((a,s)=>{const i=Re(s,n+1),r=((i==null?void 0:i.populationRough)||0)>(s.populationRough||0)?i:s;return r!=null&&r.populationRough!=null&&r.populationRough>0&&(a==null||r.populationRough>((a==null?void 0:a.populationRough)||0))?r:a},void 0)}}const xa=()=>{const{languagesInSelectedSource:t}=C(),n=se(),a=ie(),s=O(),{getCurrentObjects:i}=K(),r=P.useMemo(()=>t.filter(n).filter(a).reduce((p,g)=>{const u=g.nameDisplay;return p[u]==null?p[u]=[g]:p[u].push(g),p},{}),[t,n,a]),l=Object.entries(r).reduce((p,[g,u])=>(u.length>1&&(p[g]=u),p),{});return e.jsxs(D,{title:`Languages with identical names (${Object.keys(l).length})`,children:["The following languages have identical names. This can happen when merging data from multiple sources. It gets confusing to find the right language when names overlap. To fix this we should change names with these possible options:",e.jsxs("ol",{children:[e.jsx("li",{children:"Use language family names e.g. Japanese → Japonic, Bantu → Bantuoid. Only if that name is understood -- don't invent names, let the academics do that."}),e.jsx("li",{children:"Append term in parentheses to distiniguish the scope for the rarer term eg. Malay (macrolanguage), Malay (individual language)"}),e.jsx("li",{children:"Append territory name in parentheses eg. Tonga (Malawi), Tonga (Tonga Islands)"}),e.jsx("li",{children:"Some entries may correspond to language fragments that maybe should not be in the list and be removed."})]}),e.jsxs("div",{children:[e.jsx(ke,{}),e.jsx(ve,{itemCount:Object.keys(l).length})]}),i(Object.entries(l).sort((p,g)=>{const u=p[1][0],o=g[1][0];return u!=null&&o!=null?s(u,o):0})).map(([p,g])=>e.jsxs("div",{style:{marginBottom:"1em"},children:[e.jsx("h3",{style:{marginBottom:0},children:p}),e.jsx("div",{className:"CardList",children:e.jsx(oe,{children:g.map(u=>{const{ISO:o,Glottolog:j}=u,h=u.names.filter(f=>f!==u.nameDisplay&&f!==u.nameEndonym);return e.jsxs(re,{children:[e.jsxs("div",{children:[e.jsx("label",{children:"ID(s):"})," ",$e([u.ID,o.code,o.code6391,j.code].filter(f=>f!=null)).join(", ")]}),e.jsxs("div",{children:[e.jsx("label",{children:"Other Names:"}),e.jsx(S,{children:h.length>0?h:e.jsx(L,{children:"none"})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Scope:"}),u.scope??e.jsx(L,{children:"Unknown"})]}),o.code!=null&&e.jsxs("div",{children:["ISO Hierarchy:"," ",e.jsx(pe,{rootNodes:ge([u],R.ISO,s)})]}),j.code!=null&&e.jsxs("div",{children:["Glottolog Hierarchy:"," ",e.jsx(pe,{rootNodes:ge([u],R.Glottolog,s)})]})]},u.ID)})})})]},p))]})};function ba(){const[t,n]=W.useState(.05),a=e.jsx(je,{display:fe.ButtonGroup,children:e.jsxs("div",{style:{display:"flex",alignItems:"end",marginBottom:"0.5em"},children:[e.jsx(ze,{label:"Percent Threshold:",description:"Limit results by the minimum percent population in a territory that uses the language."}),e.jsx(_t,{getSuggestions:async()=>[{searchString:"0.001",label:"0.001%"},{searchString:"0.005",label:"0.005%"},{searchString:"0.01",label:"0.01%"},{searchString:"0.05",label:"0.05%"},{searchString:"0.1",label:"0.1%"},{searchString:"0.5",label:"0.5%"},{searchString:"1",label:"1%"},{searchString:"5",label:"5%"},{searchString:"10",label:"10%"}],onSubmit:s=>n(Number(s)),placeholder:"",value:Number.isNaN(t)?"":t.toString()})]})});return{percentThreshold:t,percentThresholdSelector:a}}const La=()=>{const{censuses:t,getLanguage:n,getLocale:a,locales:s}=C(),{localeSeparator:i}=T(),{percentThreshold:r,percentThresholdSelector:l}=ba(),p=Ta(Object.values(t),n,a,s,i,r);return e.jsxs("div",{children:[e.jsx("h1",{children:"Potential Locales"}),e.jsx("p",{children:"This page lists locales from Census data that are not in the list of defined locales. There are too many possible combinations of language + territory + variation information, so the number of actualized locales is smaller than the possible ones. However ones that appear here may be worth considering."}),l,e.jsx(q,{title:"Largest Populations",locales:p.largest,children:"Of all of the census records collected so far, these locales have more people speaking it than the other instantiated locales. This likely means the world population is indigenous to this country. However, since we do not have full census coverage it is very possible that the language is native to a different country without an inputted census record. Additionally, some of these locales are macrolanguages or constituents thereof, so we may actually have the language but represented by a different aspect."}),e.jsxs(q,{title:"Largest ** with caveats",locales:p.largestButDescendantExists,children:["The locales represent the largest population of a language in a territory, but a language or dialect of that locale is already present for that locale, so it may not be necessary or it may be a language family not consistently listed in other censuses.",e.jsx("div",{style:{height:"0.5em"}}),"For example, the Canadian [CA] census includes Indo-European [ine] as an entry. Since few censuses include Indo-European, it looks as if ine_CA is native to Canada. That is a data coverage issue -- not a real origin for the language group. Indo-European contains other languages that are listed in other parts of the same census like Italian eng_CA."]}),e.jsx(q,{title:"Significant Population",locales:p.significant,children:"This is the list of locales native to other countries, but with a significant population in other countries."}),e.jsx(q,{title:"Significant ** with caveats",locales:p.significantButMaybeRedundant,children:"Locales in this table reflect languages that already have other locales in territories but a consistent of the same language not necessarily the same locale. For example, they may have an entry with a writing system specified."})]})},q=({title:t,children:n,locales:a})=>{const s=z(),i=O(),{limit:r,page:l}=T(),p=a.filter(s).sort(i).slice(r*(l-1),Math.min(r*l,a.length)).map(Fe).join("");return e.jsxs(D,{title:`${t} (${a.filter(s).length})`,children:[n," ",e.jsx("button",{style:{padding:"0.25em"},onClick:()=>{navigator.clipboard.writeText(p)},children:"Copy visible locales to Clipboard"}),e.jsx(Ca,{locales:a})]})},Ca=({locales:t})=>e.jsx(w,{tableID:V.PotentialLocales,objects:t,columns:[{key:"Potential Locale",render:n=>e.jsx(y,{object:n,labelSource:"code"}),sortParam:c.Code},{key:"Language",render:n=>n.language?e.jsx(y,{object:n.language}):n.languageCode,sortParam:c.Name},{key:"Population",render:n=>n.populationSpeaking,valueType:d.Population,sortParam:c.Population},{key:"% in Territory",render:n=>n.populationSpeakingPercent,valueType:d.Decimal,sortParam:c.PercentOfTerritoryPopulation},{key:"% of Global Language Speakers",render:n=>{var a;return n.populationSpeaking&&n.populationSpeaking*100/(((a=n.language)==null?void 0:a.populationEstimate)??1)},valueType:d.Decimal,sortParam:c.PercentOfOverallLanguageSpeakers},{key:"Population Source",render:n=>e.jsx(be,{locale:n,size:"short"})},{key:"Related Locale",render:n=>{var a,s;return e.jsx(y,{object:(s=(a=n.relatedLocales)==null?void 0:a.childLanguages)==null?void 0:s[0],labelSource:"code"})}},{key:"Copy",render:n=>e.jsx("button",{style:{padding:"0.25em"},onClick:()=>navigator.clipboard.writeText(Fe(n)),children:e.jsx(vt,{size:"1em",display:"block"})})}]});function Fe(t){var n;return`${t.ID}	${t.nameDisplay} (${(n=t.territory)==null?void 0:n.nameDisplay})		${t.officialStatus??""}	${t.populationSpeaking}	
`}function Ta(t,n,a,s,i,r){const l=P.useMemo(()=>t.reduce((g,u)=>{var o;return(o=Object.entries(u.languageEstimates??{}))==null||o.forEach(([j,h])=>{const f=j+"_"+u.isoRegionCode,x=n(j);if(a(f)||x==null)return;const b=h*100/u.populationEligible;b<r||(g[f]==null?g[f]={localeSource:_e.Census,type:m.Locale,ID:j+"_"+u.isoRegionCode,codeDisplay:x.codeDisplay+i+u.isoRegionCode,languageCode:j,language:x,nameDisplay:x.nameDisplay,names:x.names,territory:u.territory,territoryCode:u.isoRegionCode,populationSource:Ue.Official,populationAdjusted:h,populationSpeaking:h,populationSpeakingPercent:b,populationCensus:u,censusRecords:[{census:u,populationEstimate:h,populationPercent:b}]}:((g[f].populationSpeaking??0)<h&&(g[f].populationSpeaking=h,g[f].populationSpeakingPercent=b,g[f].populationCensus=u),g[f].censusRecords==null&&(g[f].censusRecords=[]),g[f].censusRecords.push({census:u,populationEstimate:h,populationPercent:b})))}),g},{}),[t,i,r,n,a]),p=P.useMemo(()=>[...s,...Object.values(l)].reduce((g,u)=>{var h;const o=(h=u.territory)==null?void 0:h.scope;if(qe(o))return g;const j=u.languageCode;return g[j]||(g[j]=[]),g[j].push(u),g},{}),[l]);return Object.values(p).reduce(va,{largest:[],largestButDescendantExists:[],significant:[],significantButMaybeRedundant:[]})}function va(t,n){const a=n.sort((i,r)=>(r.populationSpeaking??0)-(i.populationSpeaking??0)),s=a.reduce((i,r)=>(r.populationSpeaking??0)>(i.populationSpeaking??0)?r:i,a[0]);if(s.localeSource==="census"){const i=s.language?ae([s.language],s.territoryCode):null;i?(s.relatedLocales={childLanguages:[i]},t.largestButDescendantExists.push(s)):(s.relatedLocales={childLanguages:[a[1]]},t.largest.push(s))}return n.filter(i=>i!==s&&i.localeSource==="census").forEach(i=>{const r=i.language?ae([i.language],i.territoryCode):null;r?(i.relatedLocales={childLanguages:[r]},t.significantButMaybeRedundant.push(i)):(i.relatedLocales={childLanguages:[a[0]]},t.significant.push(i))}),t}function ae(t,n){const a=Sa(t,n),s=(t==null?void 0:t.map(i=>ae(i.childLanguages,n)))??[];return[a,...s].filter(Boolean).sort((i,r)=>((r==null?void 0:r.populationSpeaking)??0)-((i==null?void 0:i.populationSpeaking)??0))[0]??null}function Sa(t,n){return(t==null?void 0:t.map(a=>a.locales.filter(s=>s.territoryCode===n)[0]??null).filter(Boolean)[0])??null}const Pa=()=>{const{territories:t}=C();return e.jsx(D,{title:"Countries with Censuses",children:e.jsx(w,{tableID:V.CountriesWithCensuses,objects:t,columns:[F,E,{key:"Censuses",render:n=>{var a;return(a=n.censuses)==null?void 0:a.length},valueType:d.Count},...Object.values($).map(n=>({key:n,render:a=>{var s;return e.jsx("div",{style:{maxWidth:"10em"},children:e.jsx(S,{limit:1,children:(s=a.censuses)==null?void 0:s.filter(i=>i.collectorType===n).map(i=>e.jsx(y,{object:i},i.ID))})})}})),{key:"Population",render:n=>n.population,valueType:d.Population,sortParam:c.Population},{key:"Languages",render:n=>{var a;return(a=n.locales)==null?void 0:a.length},valueType:d.Count,sortParam:c.CountOfLanguages}]})})},Da=()=>{const{locales:t}=C(),n=z(),a=t.filter(n),s=a.filter(x=>x.populationCensus!=null),i=a.length,r=s.length,l=i>0?Math.round(r/i*100):0,p=s.reduce((x,b)=>{var k;const v=(k=b.populationCensus)==null?void 0:k.collectorType;return v!=null?x[v]=(x[v]??0)+1:x.other=(x.other??0)+1,x},{}),g=p[$.Government]??0,u=p[$.CLDR]??0,o=p[$.Study]??0,j=r-g-u-o,h={},f={};return a.forEach(x=>{var k,X;const b=((k=x.language)==null?void 0:k.scope)??"Unknown";h[b]||(h[b]={total:0,withCensus:0}),h[b].total++,x.populationCensus!=null&&h[b].withCensus++;const v=((X=x.territory)==null?void 0:X.scope)??"Unknown";f[v]||(f[v]={total:0,withCensus:0}),f[v].total++,x.populationCensus!=null&&f[v].withCensus++}),e.jsxs(D,{title:`Locales with census citations (${r})`,children:[e.jsxs("p",{children:[l,"% (",r,"/",i,") of the locales currently in scope have population estimates derived from a census record. These locales have a non‑null ",e.jsx("code",{children:"populationCensus"})," field which links back to the underlying census, providing a verifiable source for the population value."]}),e.jsxs("div",{style:{marginBottom:"1em"},children:[e.jsx("strong",{children:"Census source breakdown:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Government: ",g," (",r>0?(g/r*100).toFixed(1):"0","%)"]}),e.jsxs("li",{children:["CLDR: ",u," (",r>0?(u/r*100).toFixed(1):"0","%)"]}),o>0&&e.jsxs("li",{children:["Study: ",o," (",r>0?(o/r*100).toFixed(1):"0","%)"]}),j>0&&e.jsxs("li",{children:["Other: ",j," (",r>0?(j/r*100).toFixed(1):"0","%)"]})]})]}),e.jsxs("div",{style:{marginBottom:"1em"},children:[e.jsx("strong",{children:"Breakdown by language scope:"}),e.jsx("ul",{children:Object.entries(h).map(([x,b])=>{const v=b.total>0?(b.withCensus/b.total*100).toFixed(1):"0";return e.jsxs("li",{children:[x,": ",v,"% (",b.withCensus,"/",b.total,")"]},x)})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Breakdown by territory scope:"}),e.jsx("ul",{children:Object.entries(f).map(([x,b])=>{const v=b.total>0?(b.withCensus/b.total*100).toFixed(1):"0";return e.jsxs("li",{children:[x,": ",v,"% (",b.withCensus,"/",b.total,")"]},x)})})]})]})},Ia=()=>{const{objectType:t}=T();return e.jsx("div",{style:{textAlign:"start"},children:e.jsx(ka,{objectType:t})})},ka=({objectType:t})=>{switch(t){case m.Locale:return e.jsxs(e.Fragment,{children:[e.jsx(Da,{}),e.jsx(La,{})]});case m.Language:return e.jsxs(e.Fragment,{children:[e.jsx(ha,{}),e.jsx(xa,{}),e.jsx(fa,{}),e.jsx(ya,{})]});case m.Census:return e.jsx(Pa,{});case m.Territory:case m.WritingSystem:return e.jsx("div",{children:"There are no reports for this object type."})}},I=({items:t,label:n,limit:a=20})=>t==null?null:t.length===0?e.jsx(L,{children:"0"}):e.jsxs(M,{hoverContent:t.slice(0,a).join(", ")+(t.length>a?"...":""),children:[t.length,n&&e.jsx("span",{style:{marginLeft:"0.25em"},children:n})]}),Oa=({lang:t})=>{const n=Object.values(t.writingSystems??{});if(n.length===0)return e.jsx(L,{children:"—"});const a=t.primaryWritingSystem;return a&&n.sort((s,i)=>s.ID===a.ID?-1:i.ID===a.ID?1:0),e.jsx(S,{limit:1,limitText:"short",children:n.map(s=>e.jsx(y,{object:s},s.ID))})},wa=[{key:"Code",sortParam:c.Code,description:e.jsx(Ga,{}),render:t=>e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(H,{object:t,field:B.Code}),e.jsx(me,{lang:t})]}),isInitiallyVisible:!0},{key:"Canonical ID",description:e.jsx(N,{languageSource:R.Combined}),render:t=>t.ID},{key:"ISO 639-1",description:"The two-letter ISO 639-1 code, if one is assigned.",render:t=>t.ISO.code6391?t.ISO.code6391:e.jsx(L,{children:"—"})},{key:"ISO 639-3/5",description:e.jsx(N,{languageSource:R.ISO}),render:t=>e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.ISO.code,e.jsx(me,{lang:t})]})},{key:"BCP Code",description:e.jsx(N,{languageSource:R.BCP}),render:t=>t.BCP.code!==t.ISO.code?t.BCP.code:e.jsx(L,{children:t.BCP.code})},{key:"CLDR Code",description:e.jsx(N,{languageSource:R.CLDR}),render:t=>t.CLDR.code!==t.ISO.code?e.jsxs(e.Fragment,{children:[t.CLDR.code,e.jsx(Se,{object:t})]}):e.jsx(L,{children:t.CLDR.code})},{key:"Glottocode",description:e.jsx(N,{languageSource:R.Glottolog}),render:t=>t.Glottolog.code}],Va=wa.map(t=>({...t,isInitiallyVisible:t.isInitiallyVisible??!1,columnGroup:"Codes"}));function me({lang:t}){return t.warnings&&t.warnings[Je.isoCode]?e.jsx(M,{hoverContent:e.jsx(Pe,{lang:t}),style:{marginLeft:"0.125em"},children:e.jsx(Le,{size:"1em",display:"block",color:"var(--color-text-yellow)"})}):null}function Ga(){const{languageSource:t}=T();return e.jsxs(e.Fragment,{children:["The short combination of alphabetic or alphanumeric characters to identify the language or languoid -- according to the ",t," language source:",e.jsx("div",{style:{height:"0.5em"}}),e.jsx(N,{languageSource:t})]})}const Ra=[{key:"Digital Support (Ethnologue)",description:e.jsx(Dt,{}),render:t=>e.jsx(Pt,{lang:t}),exportValue:t=>St(t.Ethnologue.digitalSupport)},{key:"CLDR Coverage Level",description:e.jsxs(e.Fragment,{children:["CLDR data is collected in tiers, later tiers include data from the prior tier."," ",e.jsx(kt,{})]}),render:t=>e.jsxs(e.Fragment,{children:[e.jsx(It,{object:t}),e.jsx(Se,{object:t})]}),exportValue:t=>{var n;return(n=t.CLDR.coverage)==null?void 0:n.actualCoverageLevel}},{key:"CLDR Locales",description:e.jsxs(e.Fragment,{children:["The number of locales in CLDR, variations of languages for different regions and uses. For example Italian ",e.jsx("code",{children:"it"})," has 4 variations: ",e.jsx("code",{children:"it_IT"}),", ",e.jsx("code",{children:"it_CH"}),","," ",e.jsx("code",{children:"it_SM"}),", and ",e.jsx("code",{children:"it_VA"}),"."]}),render:t=>e.jsx(Ot,{object:t}),valueType:d.Count,exportValue:t=>{var n;return(n=t.CLDR.coverage)==null?void 0:n.countOfCLDRLocales}},{key:"ICU Support",render:t=>e.jsx(wt,{object:t}),exportValue:t=>{var n,a,s;if(((n=t.CLDR.coverage)==null?void 0:n.inICU)!==void 0)return t.CLDR.coverage.inICU;if(((a=t.CLDR.dataProvider)==null?void 0:a.type)===m.Language)return(s=t.CLDR.dataProvider.CLDR.coverage)==null?void 0:s.inICU}},{key:"Wikipedia Status",render:t=>e.jsxs(e.Fragment,{children:[e.jsx(Vt,{object:t}),e.jsx(Gt,{object:t})]})},{key:"Wikipedia Articles",render:t=>e.jsx(Rt,{object:t})},{key:"Wikipedia Active Users",render:t=>e.jsx(Ft,{object:t})}],Fa=Ra.map(t=>({...t,isInitiallyVisible:!1,columnGroup:"Digital Support"})),Ea=[E,{...Q,isInitiallyVisible:!0},{key:"ISO Name",labelInColumnGroup:"in ISO",render:t=>t.nameDisplay!==t.ISO.name?e.jsx(H,{object:t,field:B.NameISO}):e.jsx(L,{children:t.ISO.name}),description:e.jsxs(e.Fragment,{children:["The name of the language as listed in the ISO 639-3 standard. Italicized names match the primary name and are thereby deemphasized."," ",e.jsx(Ye,{href:"https://iso639-3.sil.org/code_tables/639/data",children:"More info"})]})},{key:"CLDR Name",labelInColumnGroup:"in CLDR",render:t=>t.nameDisplay!==t.CLDR.name?e.jsx(H,{object:t,field:B.NameCLDR}):e.jsx(L,{children:t.CLDR.name})},{key:"Glottolog Name",labelInColumnGroup:"in Glottolog",render:t=>t.nameDisplay!==t.Glottolog.name?e.jsx(H,{object:t,field:B.NameGlottolog}):e.jsx(L,{children:t.Glottolog.name})},{key:"Ethnologue Name",labelInColumnGroup:"in Ethnologue",render:t=>t.nameDisplay!==t.Ethnologue.name?e.jsx(H,{object:t,field:B.NameEthnologue}):e.jsx(L,{children:t.Ethnologue.name})},{key:"Other Names",render:t=>e.jsx(Et,{lang:t})}],Na=Ea.map(t=>({...t,isInitiallyVisible:t.isInitiallyVisible??!1,columnGroup:"Names"})),Ba=({lang:t})=>{const{territoryFilter:n}=T();if(!n)return e.jsx(M,{hoverContent:"Select a territory in the filters in the sidebar",children:e.jsx(Kt,{size:"1em"})});const a=$t(),s=t.locales.filter(a);if(s.length===0)return e.jsx(L,{children:"—"});const i=s.reduce((r,l)=>(l.populationAdjusted??0)>(r.populationAdjusted??0)?l:r,s[0]);return e.jsx(Ce,{object:i,children:e.jsx(ne,{count:Math.max(...s.map(r=>r.populationAdjusted??0))})})},ye=({isShortened:t=!1})=>{const{territoryFilter:n}=T();if(!n)return t?"... in selected Territory":"Population (in Territory, unselected)";const a=n.split("[")[0].trim();return t?e.jsxs(e.Fragment,{children:["... in ",a]}):e.jsxs(e.Fragment,{children:["Population (in ",a,")"]})},Wa=()=>{const{territoryFilter:t,updatePageParams:n}=T();if(!t)return"Select a territory in the filters in the side panel to see population in that territory.";const a=t.split("[")[0].trim();return e.jsxs(e.Fragment,{children:["The population of this language in ",a,". For more details and sorting, see the"," ",e.jsx(xe,{onClick:()=>n({objectType:m.Locale}),children:"Locale Table"})]})},Ma=[{key:"Best Population Estimate",labelInColumnGroup:"Best Estimate",description:e.jsx(e.Fragment,{children:"The number of people that use this language (probably speak). This is estimated from one of 3 possible sources: inputted data aggregated from language databases, aggregated census data and/or aggregated data from dialects. Click on the language's name to see more details."}),render:t=>e.jsx(Ke,{lang:t}),valueType:d.Population,sortParam:c.Population,isInitiallyVisible:!0},{key:"Best Estimate Source",description:"The source category for the population estimate value.",render:t=>t.populationEstimateSource||"N/A"},{key:"Population (Rough)",labelInColumnGroup:"... rough estimate",description:"This is a rough estimate from variable internet databases (citations not available).",render:t=>t.populationRough,valueType:d.Population,sortParam:c.PopulationDirectlySourced},{key:"Population (from Dialects)",labelInColumnGroup:"... from Dialects",description:"Some of these languages may have data from constituent dialects/locales. They have been added up here.",render:t=>e.jsx(Ze,{lang:t}),valueType:d.Population,sortParam:c.PopulationOfDescendants},{key:"Population (from Locales)",labelInColumnGroup:"... from Locales",description:e.jsxs(e.Fragment,{children:["This data comes from adding up the populations of all locales for this language. The population from locales have been adjusted to ",Xe," estimates."]}),render:t=>e.jsx(Qe,{lang:t}),valueType:d.Population},{key:"Population (Ethnologue)",labelInColumnGroup:"... from Ethnologue",description:"This is a lower bound estimate from Ethnologue, data from 2025. It may vastly underestimate the actual population.",render:t=>e.jsx(et,{lang:t}),valueType:d.Population},{key:"Population (in Territory)",label:e.jsx(ye,{}),labelInColumnGroup:e.jsx(ye,{isShortened:!0}),description:e.jsx(Wa,{}),render:t=>e.jsx(Ba,{lang:t}),valueType:d.Population}],Aa=Ma.map(t=>({...t,isInitiallyVisible:t.isInitiallyVisible??!1,columnGroup:"Population"})),J=({lang:t,src:n})=>e.jsx(Nt,{level:Ha(nt(n,t)),label:tt(t,n)??"—",description:e.jsx(at,{source:n,lang:t})});function Ha(t){return t==null?A.Unknown:t>=7?A.High:t>=4?A.Medium:t>=1?A.Low:A.Zero}const $a=[{key:"Vitality: Metascore",labelInColumnGroup:"Metascore",render:t=>e.jsx(J,{lang:t,src:_.Metascore}),sortParam:c.VitalityMetascore,valueType:d.Enum,isInitiallyVisible:!0},{key:"ISO Status",render:t=>e.jsx(J,{lang:t,src:_.ISO}),sortParam:c.ISOStatus,valueType:d.Enum},{key:"Vitality: Ethnologue (Fine)",labelInColumnGroup:"from Ethnologue (Fine)",description:"Vitality as scored on the Extended Graded Intergenerational Disruption Scale directly from or derived from Ethnologue in 2012",render:t=>e.jsx(J,{lang:t,src:_.Eth2012}),sortParam:c.VitalityEthnologueFine,valueType:d.Enum},{key:"Vitality: Ethnologue (Coarse)",labelInColumnGroup:"from Ethnologue (Coarse)",description:"Vitality as scored on the Extended Graded Intergenerational Disruption Scale, grouped into coarse categories directly from or derived from Ethnologue in 2025",render:t=>e.jsx(J,{lang:t,src:_.Eth2025}),sortParam:c.VitalityEthnologueCoarse,valueType:d.Enum}],za=$a.map(t=>({...t,isInitiallyVisible:t.isInitiallyVisible??!1,columnGroup:"Vitality"})),Ua=()=>{const{languagesInSelectedSource:t}=C(),n=P.useMemo(()=>[...Va,...Na,{key:"Scope",render:a=>a.scope,isInitiallyVisible:!1,columnGroup:"Context"},{key:"ISO Retirement",render:a=>{let s=a.ISO.retirementReason??void 0;return!s&&a.ISO.code==null&&(s=qt.NeverISO),s?e.jsx(M,{hoverContent:e.jsx(Pe,{lang:a}),children:Jt(s)}):e.jsx(L,{children:"n/a"})},isInitiallyVisible:!1,columnGroup:"Context"},{key:"Modality",render:a=>de(a.modality)??e.jsx(L,{children:"—"}),exportValue:a=>de(a.modality),isInitiallyVisible:!1,valueType:d.Enum,columnGroup:"Context",sortParam:c.Modality},...Aa,...za,...Fa,{key:"Parent Language",render:a=>a.parentLanguage&&e.jsx(y,{object:a.parentLanguage}),isInitiallyVisible:!1,columnGroup:"Relations"},{key:"Macrolanguage",render:a=>e.jsx(y,{object:De(a)}),isInitiallyVisible:!1,columnGroup:"Relations"},{key:"Language Family",render:a=>e.jsx(y,{object:Ie(a)}),isInitiallyVisible:!1,columnGroup:"Relations"},{key:"Dialects",render:a=>e.jsx(I,{items:a.childLanguages.sort((s,i)=>(i.populationEstimate??0)-(s.populationEstimate??0)).map(s=>s.nameDisplay)}),valueType:d.Count,isInitiallyVisible:!1,sortParam:c.CountOfLanguages,columnGroup:"Relations"},{key:"Countries",render:a=>{var s;return e.jsx(S,{limit:1,limitText:"short",children:(s=Y(a))==null?void 0:s.map(i=>e.jsx(y,{object:i},i.ID))})},sortParam:c.Territory,columnGroup:"Location"},{key:"Country Count",render:a=>{var s;return e.jsx(I,{items:(s=Y(a))==null?void 0:s.map(i=>i.nameDisplay)})},isInitiallyVisible:!1,valueType:d.Count,sortParam:c.CountOfCountries,columnGroup:"Location"},{key:"Latitude",render:a=>{var s;return(s=a.latitude)==null?void 0:s.toFixed(2)},isInitiallyVisible:!1,sortParam:c.Latitude,valueType:d.Decimal,columnGroup:"Location"},{key:"Longitude",render:a=>{var s;return(s=a.longitude)==null?void 0:s.toFixed(2)},isInitiallyVisible:!1,sortParam:c.Longitude,valueType:d.Decimal,columnGroup:"Location"},{key:"Writing Systems",description:e.jsxs(e.Fragment,{children:["The writing systems used to write this language. The possible values come from ISO 15924, which include some combined systems like ",e.jsx("code",{children:"Hani"})," including all Chinese Characters, including Simplified ",e.jsx("code",{children:"Hans"})," or Traditional ",e.jsx("code",{children:"Hant"}),"."]}),render:a=>e.jsx(Oa,{lang:a}),isInitiallyVisible:!1,sortParam:c.WritingSystem,columnGroup:"Writing"},{key:"Literacy",render:a=>st(a),isInitiallyVisible:!1,sortParam:c.Literacy,valueType:d.Decimal,columnGroup:"Writing"},{key:"Plural rules",render:a=>e.jsx(Bt,{lang:a}),isInitiallyVisible:!1,columnGroup:"Grammar"},{key:"Plural rule examples",render:a=>e.jsx(Wt,{lang:a}),isInitiallyVisible:!1,columnGroup:"Grammar"}],[]);return e.jsx(w,{tableID:V.Languages,objects:t,columns:n})},_a=({locale:t})=>{const{territoryFilter:n,searchBy:a,searchString:s}=T(),i=it(t,!n),r=a!==B.Code?s:"";return e.jsx(Ce,{object:t,children:e.jsx(rt,{text:i,searchPattern:r})})},qa=({locale:t})=>{const[n,a]=W.useState(!1),s=t.censusRecords??[];return e.jsxs("div",{children:[e.jsxs("h3",{style:{fontWeight:"bold",marginBottom:"0.25em"},children:[e.jsx(y,{object:t})," Population Records"]}),e.jsxs("div",{children:[s.length===0&&"No population records for this locale available in LangNav.",s.length===1&&"There is 1 population record for this locale available in LangNav:",s.length>1&&`There are ${s.length} population records in this locale available in LangNav:`]}),s.slice(0,n?s.length:5).map(i=>e.jsxs("div",{style:{marginLeft:"1em"},children:[e.jsx(y,{object:i.census})," (",e.jsx(ne,{count:i.populationEstimate}),")"]},i.census.ID)),s.length>5&&e.jsx("div",{style:{marginLeft:"1em"},children:e.jsx("button",{onClick:()=>a(!n),style:{padding:"0.25em"},children:n?"show less":`+${s.length-5} more`})})]})},Ja=({locale:t})=>{var n;return e.jsx(M,{hoverContent:e.jsx(qa,{locale:t}),children:((n=t.censusRecords)==null?void 0:n.length)||e.jsx(L,{children:"—"})})},Ya=[{key:"Population (Adjusted)",description:e.jsx(e.Fragment,{children:"Most population records become outdated over time. In order to figure out the current population, we take the percent of the territory population that spoke the language at the time of the census and multiply it by the current population of the territory."}),render:t=>e.jsx(ot,{locale:t}),valueType:d.Population,sortParam:c.Population,columnGroup:"Demographics"},{key:"Population (Direct)",description:"This is the original population number cited from sourced data.",render:t=>t.populationSpeaking,valueType:d.Population,sortParam:c.PopulationDirectlySourced,columnGroup:"Demographics",isInitiallyVisible:!1},{key:"% in Territory",render:t=>t.populationSpeakingPercent,valueType:d.Decimal,sortParam:c.PercentOfTerritoryPopulation,columnGroup:"Demographics"},{key:"% of Global Language Speakers",render:t=>{var n;return t.populationSpeaking&&t.populationSpeaking*100/(((n=t.language)==null?void 0:n.populationEstimate)??1)},valueType:d.Decimal,isInitiallyVisible:!1,sortParam:c.PercentOfOverallLanguageSpeakers,columnGroup:"Demographics"},{key:"Population Source",render:t=>e.jsx(be,{locale:t,size:"short"}),columnGroup:"Demographics"},{key:"Population Records",render:t=>e.jsx(Ja,{locale:t}),columnGroup:"Demographics",valueType:d.Count,sortParam:c.CountOfCensuses,isInitiallyVisible:!1}],Ka=[{key:"More General Locales",render:t=>{var n,a;return e.jsx(S,{limit:1,limitText:"short",children:(a=(n=t.relatedLocales)==null?void 0:n.moreGeneral)==null?void 0:a.map(s=>e.jsx(y,{object:s,labelSource:"code"},s.ID))})}},{key:"More Specific Locales",render:t=>{var n,a;return e.jsx(S,{limit:1,limitText:"short",children:(a=(n=t.relatedLocales)==null?void 0:n.moreSpecific)==null?void 0:a.map(s=>e.jsx(y,{object:s,labelSource:"code"},s.ID))})}},{key:"Parent Language Locale",render:t=>{var n;return e.jsx(y,{object:(n=t.relatedLocales)==null?void 0:n.parentLanguage,labelSource:"code"})}},{key:"Child Language Locales",render:t=>{var n,a;return e.jsx(S,{limit:1,limitText:"short",children:(a=(n=t.relatedLocales)==null?void 0:n.childLanguages)==null?void 0:a.map(s=>e.jsx(y,{object:s,labelSource:"code"},s.ID))})}},{key:"Encapsulating Territory Locale",render:t=>{var n;return e.jsx(y,{object:(n=t.relatedLocales)==null?void 0:n.parentTerritory,labelSource:"code"})}},{key:"Contained Territory Locales",render:t=>{var n,a;return e.jsx(S,{limit:1,limitText:"short",children:(a=(n=t.relatedLocales)==null?void 0:n.childTerritories)==null?void 0:a.map(s=>e.jsx(y,{object:s,labelSource:"code"},s.ID))})}}],Za=Ka.map(t=>({...t,isInitiallyVisible:!1,columnGroup:"Related Locales"})),Qa=()=>{const{locales:t}=C(),{languageSource:n}=T();return e.jsx(w,{tableID:V.Locales,objects:t.filter(a=>{var s;return((s=a.language)==null?void 0:s[n].code)!=null}),columns:[F,{key:"Name",render:a=>e.jsx(_a,{locale:a}),sortParam:c.Name,columnGroup:"Names"},Q,...Ya,{key:"Literacy",render:a=>a.literacyPercent,isInitiallyVisible:!1,valueType:d.Decimal,sortParam:c.Literacy,columnGroup:"Writing"},{key:"Writing System (specified)",description:e.jsxs(e.Fragment,{children:["Some locales specify a writing system, for instance"," ",e.jsxs("code",{children:["zh_",e.jsx("strong",{children:"Hant"}),"_TW"]})," ","means it specifically refers to Traditional Han characters."]}),render:a=>e.jsx(y,{object:a.writingSystem}),isInitiallyVisible:!1,columnGroup:"Writing"},{key:"Writing System (inferred)",description:e.jsxs(e.Fragment,{children:["Some locales do not include a writing system but it can usually be inferred based on the primary writing system for the language. For instance, ",e.jsx("code",{children:"zh_CN"})," could be written in ",e.jsx("code",{children:"Hant"})," or ",e.jsx("code",{children:"Hans"})," writing. Since the primary writing system in China is the Simplified characters, it can be inferred to be"," ",e.jsx("code",{children:"Hans"}),"."]}),render:a=>{var s;return e.jsx(y,{object:a.writingSystem??((s=a.language)==null?void 0:s.primaryWritingSystem)})},isInitiallyVisible:!1,sortParam:c.WritingSystem,columnGroup:"Writing"},{key:"Language",render:a=>e.jsx(y,{object:a.language}),isInitiallyVisible:!1,columnGroup:"Linked Data",sortParam:c.Language},{key:"Territory",render:a=>e.jsx(y,{object:a.territory}),isInitiallyVisible:!1,sortParam:c.Territory,columnGroup:"Linked Data"},{key:"Countries",render:a=>{var s;return e.jsx(I,{items:(s=Y(a))==null?void 0:s.map(i=>i.nameDisplay)})},isInitiallyVisible:!1,valueType:d.Count,sortParam:c.CountOfCountries,columnGroup:"Linked Data"},{key:"Variant Tags",render:a=>a.variantTags&&e.jsx(S,{limit:1,children:a.variantTags.map(s=>e.jsx(y,{object:s},s.ID))}),isInitiallyVisible:!1,columnGroup:"Linked Data"},...Za,{key:"Macrolanguage",render:a=>a.language&&e.jsx(y,{object:De(a.language)}),isInitiallyVisible:!1,columnGroup:"Linked Data"},{key:"Language Family",render:a=>a.language&&e.jsx(y,{object:Ie(a.language)}),isInitiallyVisible:!1,columnGroup:"Linked Data"},{key:"Official Status",render:a=>a.officialStatus?lt(a.officialStatus):e.jsx(L,{children:"None"})},{key:"Wikipedia",render:a=>e.jsx(Mt,{object:a}),isInitiallyVisible:!1},{key:"Locale Source",render:a=>ct(a.localeSource),isInitiallyVisible:!1}]})},Xa=()=>{const{censuses:t,getLanguage:n}=C();return e.jsx(w,{tableID:V.Censuses,objects:Object.values(t),columns:[{...F,columnGroup:"ID"},{...E,columnGroup:"ID"},{key:"Languages",render:a=>e.jsx(I,{items:Object.keys(a.languageEstimates).map(s=>{var i;return((i=n(s))==null?void 0:i.nameDisplay)??s})}),valueType:d.Count,sortParam:c.CountOfLanguages},{key:"Eligible Population",render:a=>a.populationEligible,valueType:d.Population,sortParam:c.Population,columnGroup:"Population"},{key:"% of Current Population",render:a=>a.populationEligible&&ut(a),valueType:d.Decimal,isInitiallyVisible:!1,sortParam:c.PercentOfTerritoryPopulation,columnGroup:"Population"},{key:"Acquisition Order",description:e.jsxs(e.Fragment,{children:["If the data for the language specifically refers to a persons ",e.jsx("code",{children:"L1"})," first language (or mothertongue) or ",e.jsx("code",{children:"L2"})," second language, ...."]}),render:a=>a.acquisitionOrder,isInitiallyVisible:!1,columnGroup:"Characteristics"},{key:"Mode",description:e.jsxs(e.Fragment,{children:['Censuses usually frame language usage like "How many people'," ",e.jsx("strong",{children:"speak"}),' the language?". This column shows what people do with the language to be counted for it. Alternatively some censuses just report ethnicity.']}),render:a=>a.mode,isInitiallyVisible:!1,columnGroup:"Characteristics"},{key:"Domain",description:"Where the language is used",render:a=>a.domain,isInitiallyVisible:!1,columnGroup:"Characteristics"},{key:"Age",render:a=>a.age,isInitiallyVisible:!1,columnGroup:"Characteristics"},{key:"Territory",render:a=>e.jsx(y,{object:a.territory}),isInitiallyVisible:!1,sortParam:c.Territory,columnGroup:"Location"},{key:"Collector Type",render:a=>a.collectorType,isInitiallyVisible:!1,columnGroup:"Location"},{key:"Collector Name",render:a=>a.collectorName,isInitiallyVisible:!1,columnGroup:"Location"},{key:"Year Collected",render:a=>a.collectorType!==$.CLDR?new Date(a.yearCollected+"-07-01").toLocaleDateString(void 0,{year:"numeric"}):e.jsx(L,{children:"multiple"}),isInitiallyVisible:!1,valueType:d.Date,sortParam:c.Date,columnGroup:"Time"},{key:"Date Published",render:a=>{var s;return(s=a.datePublished)==null?void 0:s.toLocaleDateString()},isInitiallyVisible:!1,valueType:d.Date,columnGroup:"Time"},{key:"Date Accessed",render:a=>{var s;return(s=a.dateAccessed)==null?void 0:s.toLocaleDateString()},isInitiallyVisible:!1,valueType:d.Date,columnGroup:"Time"}]})},en=({territory:t})=>{var a;const{updatePageParams:n}=T();return e.jsx(M,{hoverContent:e.jsx(At,{territory:t}),onClick:()=>n({view:G.Table,objectType:m.Census,territoryFilter:t.ID}),children:((a=t.censuses)==null?void 0:a.length)||e.jsx(L,{children:"—"})})},tn=()=>{const{territories:t}=C();return e.jsx(w,{tableID:V.Territories,objects:t,columns:[F,{key:"ISO Alpha-3 Code",render:n=>n.codeAlpha3||null,isInitiallyVisible:!1,columnGroup:"Codes"},{key:"ISO Numeric Code",render:n=>{var a;return n.codeNumeric||((a=n.ID.match(/\d{3}/))==null?void 0:a[0])||null},isInitiallyVisible:!1,columnGroup:"Codes"},E,Q,{key:"Other names",render:n=>e.jsx(S,{limit:1,limitText:"short",children:[...n.nameOtherEndonyms||[],...n.nameOtherExonyms||[]].filter(a=>a!==n.nameDisplay&&a!==n.nameEndonym)}),isInitiallyVisible:!1,columnGroup:"Names"},{key:"Population",render:n=>n.population,valueType:d.Population,sortParam:c.Population,columnGroup:"Demographics"},{key:"Literacy",render:n=>n.literacyPercent,valueType:d.Decimal,sortParam:c.Literacy,columnGroup:"Demographics"},{key:"Census Tables",render:n=>e.jsx(en,{territory:n}),columnGroup:"Demographics",valueType:d.Count,sortParam:c.CountOfCensuses,isInitiallyVisible:!1},{key:"Languages",render:n=>n.locales&&e.jsx(I,{items:n.locales.map(a=>{var s;return((s=a.language)==null?void 0:s.nameDisplay)??a.nameDisplay})}),valueType:d.Count,sortParam:c.CountOfLanguages,columnGroup:"Language"},{key:"Biggest Language",render:n=>n.locales&&n.locales.length>0&&e.jsx(y,{labelSource:"language",object:gt(n),style:{textDecoration:"none"}}),isInitiallyVisible:!1,sortParam:c.Language,columnGroup:"Language"},{key:"Biggest Language %",render:n=>{var a;return(a=n.locales)==null?void 0:a[0].populationSpeakingPercent},isInitiallyVisible:!1,valueType:d.Decimal,sortParam:c.PopulationPercentInBiggestDescendantLanguage,columnGroup:"Language"},{key:"Writing Systems",render:n=>{var a;return e.jsx(I,{items:((a=Te(n))==null?void 0:a.map(s=>s.nameDisplay))??[]})},valueType:d.Count,sortParam:c.CountOfWritingSystems,columnGroup:"Language"},{key:"Contained UN Region",render:n=>{var a;return(a=n.parentUNRegion)==null?void 0:a.nameDisplay},isInitiallyVisible:!1,columnGroup:"Relations"},{key:"Child Territories",render:n=>e.jsx(I,{items:ht(n).map(a=>a.nameDisplay)}),isInitiallyVisible:!1,valueType:d.Count,sortParam:c.CountOfChildTerritories,columnGroup:"Relations"},{key:"Contained Countries",render:n=>e.jsx(I,{items:mt(n).map(a=>a.nameDisplay)}),isInitiallyVisible:!1,valueType:d.Count,sortParam:c.CountOfCountries,columnGroup:"Relations"},{key:"Population of Dependencies",render:n=>n.dependentTerritories&&n.dependentTerritories.length>0&&dt(n.dependentTerritories,a=>a.population??0),isInitiallyVisible:!1,valueType:d.Population,sortParam:c.PopulationOfDescendants,columnGroup:"Relations"},{key:"Latitude",render:n=>{var a;return((a=n.latitude)==null?void 0:a.toFixed(2))??e.jsx(L,{children:"—"})},exportValue:n=>{var a;return((a=n.latitude)==null?void 0:a.toFixed(4))??""},isInitiallyVisible:!1,valueType:d.Decimal,sortParam:c.Latitude,columnGroup:"Location"},{key:"Longitude",render:n=>{var a;return((a=n.longitude)==null?void 0:a.toFixed(2))??e.jsx(L,{children:"—"})},exportValue:n=>{var a;return((a=n.longitude)==null?void 0:a.toFixed(4))??""},isInitiallyVisible:!1,valueType:d.Decimal,sortParam:c.Longitude,columnGroup:"Location"},{key:"Land Area (km²)",description:"Surprisingly, sources report different numbers for the land area for some areas.",render:n=>{var a;return n.landArea&&((a=pt(n.landArea,3))==null?void 0:a.toLocaleString())},isInitiallyVisible:!1,valueType:d.Decimal,sortParam:c.Area,columnGroup:"Location"},{key:"Density",description:"People per square kilometer",render:n=>n.landArea&&n.population&&n.population/n.landArea,isInitiallyVisible:!1,valueType:d.Decimal,columnGroup:"Location"},{key:"Type",render:n=>n.scope,valueType:d.Enum},{key:"Export Language Data",description:"Export language data for this territory in a format for the World's Atlas of Languages",render:n=>e.jsx(Ht,{territory:n}),isInitiallyVisible:!1}]})},an=()=>{const{variantTags:t}=C();return e.jsx(w,{tableID:V.VariantTags,objects:t,columns:[F,E,{key:"Date Added",render:n=>{var a;return(a=n.dateAdded)==null?void 0:a.toLocaleDateString()},isInitiallyVisible:!1,valueType:d.Date,sortParam:c.Date},{key:"Languages",render:n=>e.jsx(S,{limit:1,limitText:"short",children:n.languages.map(a=>e.jsx(y,{object:a},a.ID))}),sortParam:c.Language,columnGroup:"Related Objects"},{key:"Language Count",render:n=>e.jsx(I,{items:n.languages.map(a=>a.nameDisplay)}),valueType:d.Count,sortParam:c.CountOfLanguages,isInitiallyVisible:!1,columnGroup:"Related Objects"},{key:"Writing Systems",render:n=>{var a;return e.jsx(S,{limit:1,limitText:"short",children:(a=Te(n))==null?void 0:a.map(s=>e.jsx(y,{object:s},s.ID))})},isInitiallyVisible:!1,columnGroup:"Related Objects",sortParam:c.WritingSystem},{key:"Specific to Territories",render:n=>{var a;return e.jsx(S,{limit:1,limitText:"short",children:(a=jt(n))==null?void 0:a.map(s=>e.jsx(y,{object:s},s.ID))})},isInitiallyVisible:!1,sortParam:c.Territory,columnGroup:"Related Objects"},{key:"Potential Population",description:e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:"1em"})," This is not the actual population of this variant tag, but an estimate based on the language(s) it applies to. If its an orthographic variant maybe it applies to the full modern population, but if its a dialect or historic variation it may only be a small group of people or only found in manuscripts."]}),render:n=>yt(n),isInitiallyVisible:!1,valueType:d.Population,sortParam:c.Population}]})},nn=()=>{const{writingSystems:t}=C(),n={...Q,isInitiallyVisible:!0};return e.jsx(w,{tableID:V.WritingSystems,objects:t,columns:[F,E,n,{key:"Potential Population",description:e.jsx(e.Fragment,{children:"An imprecise estimate of how many people use this writing system worldwide, calculated by adding up the population for all of the languages that use the writing system."}),render:a=>a.populationUpperBound,valueType:d.Population,sortParam:c.Population},{key:"Languages",render:a=>a.languages&&e.jsx(S,{limit:1,limitText:"short",children:Object.values(a.languages).sort((s,i)=>(i.populationEstimate??0)-(s.populationEstimate??0)).map(s=>e.jsx(y,{object:s},s.ID))}),sortParam:c.Language,columnGroup:"Related Objects"},{key:"Language Count",render:a=>a.languages&&e.jsx(I,{items:Object.values(a.languages).map(s=>s.nameDisplay)}),valueType:d.Count,sortParam:c.CountOfLanguages,isInitiallyVisible:!1,columnGroup:"Related Objects"},{key:"Area of Origin",render:a=>e.jsx(y,{object:a.territoryOfOrigin}),sortParam:c.Territory,isInitiallyVisible:!1,columnGroup:"Related Objects"},{key:"Used in Countries",render:a=>{var s;return e.jsx(I,{items:(s=Y(a))==null?void 0:s.map(i=>i.nameDisplay)})},isInitiallyVisible:!1,valueType:d.Count,sortParam:c.CountOfCountries,columnGroup:"Related Objects"}]})};function sn(){const{objectType:t}=T();switch(t){case m.Census:return e.jsx(Xa,{});case m.Language:return e.jsx(Ua,{});case m.Locale:return e.jsx(Qa,{});case m.Territory:return e.jsx(tn,{});case m.WritingSystem:return e.jsx(nn,{});case m.VariantTag:return e.jsx(an,{})}}function hn(){const{view:t}=T();switch(t){case G.CardList:return e.jsx(Qt,{});case G.Hierarchy:return e.jsx(da,{});case G.Table:return e.jsx(sn,{});case G.Reports:return e.jsx(Ia,{});case G.Map:return e.jsx(pa,{})}}export{hn as default};
