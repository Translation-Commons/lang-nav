import{A as l,r as j,G as A,j as e,N as G,H as O,W as D,X as v,Y as V,K as k,Z as w,Q as P,$ as C,P as E,O as u,a0 as z,E as p,q as S,a1 as M,a2 as d,a3 as H,a4 as K,L as Q,a5 as $,a as q,a6 as U,V as X,a7 as N,F as y,S as x,d as Y,z as _,a8 as Z,a9 as J,aa as ee,ab as te,ac as se,ad as ae,T as W,ae as re}from"./index-BgU2O8Gf.js";import{L as ie,C as oe,a as ne}from"./ColorGradientSelector-iNycHNwn.js";import{S as le,T as B}from"./TextInput-HTeW5wQ9.js";import{c as ce,b as pe,g as ge}from"./filterByConnections-oPubidMz.js";import{g as ue,a as de,L as ye}from"./BaseColorBar-DIzahkCW.js";const he=()=>{const{page:s,updatePageParams:a}=l();j.useEffect(()=>{const t=i=>{const r=i.target;r!==null&&r instanceof HTMLElement&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable)||(i.key==="ArrowRight"?a({page:s+1}):i.key==="ArrowLeft"&&s>1&&a({page:s-1}))};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[s,a])};function I(s,a,t){return async i=>{const r=i.split("[")[0].trim(),n=ce(r,A.CodeOrNameAny);return s.filter(n).sort((o,g)=>a(o)-a(g)).slice(0,le).map(o=>{const g=e.jsx(G,{object:o,field:A.CodeOrNameAny,query:r,showOriginalName:!0}),c=o.nameDisplay+" ["+o.ID+"]";return{objectID:o.ID,searchString:c,label:g,group:t(o)}})}}const me=({display:s})=>{const{languageFilter:a,updatePageParams:t}=l(),{languagesInSelectedSource:i}=O(),r=D(v.Population),n=V(),o=pe(),g=ge(),c=k(),{display:F}=w(),b=s??F,T=j.useMemo(()=>{const h=m=>{let f=0;return g(m)||(f+=1),o(m)||(f+=2),n(m)||(f+=4),f},R=m=>g(m)?o(m)?n(m)?"matched":"not "+c.languageScope:"not "+c.territoryFilter:"not "+c.writingSystemFilter;return I(i.sort(r),h,R)},[i,n,o,g,c,r]);return e.jsx(P,{display:b,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(C,{label:"Language",description:e.jsxs(e.Fragment,{children:['Filter results to those relevant to a specific language, language family, or dialect. You can enter either the language name or its code. For example, entering "Spanish" or ',e.jsx("code",{children:"spa"})," will filter to objects relevant to Spanish."," ",e.jsx(Se,{})]})}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(B,{inputStyle:{minWidth:"8em"},getSuggestions:T,onSubmit:h=>t({languageFilter:h}),pageParameter:E.languageFilter,placeholder:"Name or code",value:a})})]})})},Se=()=>{const{objectType:s}=l();switch(s){case u.Language:return e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Language view only:"})," Selecting a language family will show the languages in the family. Dialects will also appear if they are enabled."]});case u.Territory:return e.jsx(e.Fragment,{children:"This will filter territories to ones where the selected language is used."});case u.WritingSystem:return e.jsx(e.Fragment,{children:"This will filter writing systems to ones used for the selected language."});case u.VariantTag:return e.jsx(e.Fragment,{children:"This will filter variant tags for ones that are intended for this language."});case u.Locale:return e.jsx(e.Fragment,{children:"This will filter locales with the selected language."});case u.Census:return e.jsxs(e.Fragment,{children:[e.jsx(z,{size:"1em",style:{color:"var(--color-text-yellow)"}})," Censuses are not currently supported by this filter."]})}},be=()=>{const{languageScopes:s,updatePageParams:a}=l();function t(r){return M(je(r))}return e.jsx(p,{selectorLabel:"Languoid Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of language-type objects are shown, such as families, macrolanguages, languages, dialects, and special codes.",options:Object.values(S),onChange:r=>s.includes(r)?a({languageScopes:s.filter(n=>n!=r)}):a({languageScopes:[...s,r]}),selected:s,getOptionLabel:t})};function je(s){switch(s){case S.Family:return"language families";case S.Macrolanguage:return"macrolanguages";case S.Language:return"languages";case S.Dialect:return"dialects";case S.SpecialCode:return"special codes"}}const fe=({display:s})=>{const{territoryFilter:a,updatePageParams:t}=l(),{territories:i}=O(),r=V(),n=k(),o=D(v.Population),{display:g}=w(),c=s??g,F=j.useMemo(()=>{const b=h=>r(h)?0:1,T=h=>r(h)?"matched":"not "+n.territoryScope;return I(i.sort(o),b,T)},[i,r,n,o]);return e.jsx(P,{display:c,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(C,{label:"In Territory",description:"Filter results by ones relevant in a territory."}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(B,{inputStyle:{minWidth:"8em"},getSuggestions:F,onSubmit:b=>t({territoryFilter:b}),pageParameter:E.territoryFilter,placeholder:"Name or code",value:a})})]})})},xe=()=>{const{territoryScopes:s,updatePageParams:a,objectType:t,view:i}=l();return![u.Territory,u.Locale].includes(t)&&!(i===d.Reports&&t===u.Census)?null:e.jsx(p,{selectorLabel:"Territory Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of territories are shown, such as countries, regions, and dependencies.",options:Object.values(H),onChange:n=>s.includes(n)?a({territoryScopes:s.filter(o=>o!=n)}):a({territoryScopes:[...s,n]}),selected:s})},Le=()=>{const{isoStatus:s,updatePageParams:a}=l();return e.jsx(p,{selectorLabel:"ISO Language Status",selectorDescription:"Filter languages by their ISO status (Living, Extinct, etc.)",labelWhenEmpty:"Any",options:Object.values(Q).filter(t=>typeof t=="number"),onChange:t=>s.includes(t)?a({isoStatus:s.filter(i=>i!==t)}):a({isoStatus:[...s,t]}),selected:s,getOptionLabel:K})},ve=()=>{const{vitalityEth2013:s,updatePageParams:a}=l();return e.jsx(p,{selectorLabel:"Vitality Eth 2013",selectorDescription:"Filter languages by their Ethnologue 2013 vitality classification",labelWhenEmpty:"Any",options:Object.values(q).filter(t=>typeof t=="number"),onChange:t=>s.includes(t)?a({vitalityEth2013:s.filter(i=>i!==t)}):a({vitalityEth2013:[...s,t]}),selected:s,getOptionLabel:$})},we=()=>{const{vitalityEth2025:s,updatePageParams:a}=l();return e.jsx(p,{selectorLabel:"Vitality Eth 2025",selectorDescription:"Filter languages by their Ethnologue 2025 vitality classification",labelWhenEmpty:"Any",options:Object.values(X).filter(t=>typeof t=="number"),onChange:t=>s.includes(t)?a({vitalityEth2025:s.filter(i=>i!==t)}):a({vitalityEth2025:[...s,t]}),selected:s,getOptionLabel:U})},Pe=({display:s})=>{const{writingSystemFilter:a,updatePageParams:t}=l(),{writingSystems:i}=O(),r=D(v.Population),{display:n}=w(),o=s??n,g=j.useMemo(()=>I(i.sort(r),c=>c.scope===N.IndividualScript?0:1,c=>c.scope===N.IndividualScript?"":"other types of scripts"),[i,r]);return e.jsx(P,{display:o,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(C,{label:"Written in",description:"Filter results by ones written in this script."}),e.jsx(B,{inputStyle:{minWidth:"8em"},getSuggestions:g,onSubmit:c=>t({writingSystemFilter:c}),pageParameter:E.writingSystemFilter,placeholder:"Name or code",value:a})]})})},Fe=()=>{const{scaleBy:s,updatePageParams:a,objectType:t}=l(),{display:i}=w(),n=["None",...ue(t)];return e.jsx(p,{selectorLabel:i===y.Dropdown?"Scale By":void 0,selectorDescription:"Choose a field to scale items by (map circles).",options:n,onChange:o=>a({scaleBy:o}),selected:s})},Te=()=>{const{sortBy:s,updatePageParams:a,objectType:t}=l(),i=de(t);return e.jsx(p,{selectorLabel:"Sort By",selectorDescription:"Choose the order of items in the view.",options:Object.values(v).filter(r=>i.includes(r)),onChange:r=>a({sortBy:r}),selected:s,display:y.Dropdown})},Oe=()=>{const{sortBehavior:s,updatePageParams:a}=l();return e.jsx(p,{selectorLabel:"Sort Direction",options:[x.Normal,x.Reverse],getOptionLabel:t=>x[t],getOptionDescription:t=>t===x.Normal?"Sort with high numbers first / first letter in alphabet first.":"Sort with low numbers first / last letter in alphabet first.",onChange:t=>a({sortBehavior:t}),selected:s})},De=()=>{const{localeSeparator:s,updatePageParams:a}=l();return e.jsx(p,{selectorLabel:"Locale Separator",selectorDescription:"Choose the separator in locale codes, eg. 'ar-EG' or 'ar_EG'",options:Object.values(Y),onChange:t=>a({localeSeparator:t}),selected:s})},Ce=()=>{const{objectType:s,updatePageParams:a,view:t}=l(),i=j.useCallback(r=>{a({objectType:r,searchString:void 0,page:1})},[a,t]);return e.jsx(p,{selectorLabel:"Entity",options:Object.values(u),onChange:i,selected:s,display:y.ButtonList,getOptionLabel:r=>_(J(r)),getOptionDescription:r=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:8},children:"Click here to change the kind of entity viewed."}),e.jsx(Z,{objectType:r})]})})},Ee=()=>{const{preference:s,setPreference:a}=ee();return e.jsx(p,{selectorLabel:"Page Brightness",selectorDescription:"Choose how bright the page should be. This parameter is stored on your device.",options:["light","dark","follow device"],onChange:t=>a(t),selected:s,getOptionLabel:M})},Be=()=>{const{profile:s,updatePageParams:a}=l();return e.jsx(p,{selectorLabel:"Preset",selectorDescription:"Indicate the profile best describing what you are looking for. This will change the presets.",options:Object.values(te),onChange:t=>a({profile:t}),selected:s})},Ie=()=>{const{view:s,updatePageParams:a}=l();return e.jsx(p,{selectorLabel:"Display",getOptionDescription:t=>e.jsx("img",{src:Ae(t),width:180}),options:Object.values(d),onChange:t=>a({view:t,objectID:void 0}),display:y.ButtonList,getOptionLabel:t=>[d.Map,d.Reports].includes(t)?e.jsxs(e.Fragment,{children:[t," ",e.jsx("em",{children:"β"})]}):t,selected:s})};function Ae(s){switch(s){case d.CardList:return"/lang-nav/cardlist.png";case d.Hierarchy:return"/lang-nav/hierarchy.png";case d.Map:return"/lang-nav/map.png";case d.Table:return"/lang-nav/table.png";case d.Reports:return"/lang-nav/reports.png"}}const Re=()=>(he(),e.jsx(se,{defaultWidth:300,purpose:"filters",title:"Options",children:e.jsxs(P,{display:y.Dropdown,children:[e.jsxs(L,{title:"Common Actions",optionsName:"common actions",children:[e.jsx("div",{}),e.jsx(ae,{})]}),e.jsxs(L,{title:"Data",optionsName:"data options",children:[e.jsx(Ce,{}),e.jsx(ye,{display:y.ButtonList}),e.jsx(Be,{})]}),e.jsxs(L,{title:"Filter",optionsName:"filters",children:[e.jsx(fe,{display:y.ButtonList}),e.jsx(Pe,{display:y.ButtonList}),e.jsx(me,{display:y.ButtonList}),e.jsx(be,{}),e.jsx(xe,{}),e.jsx(Le,{}),e.jsx(ve,{}),e.jsx(we,{})]}),e.jsxs(L,{title:"View",optionsName:"view options",children:[e.jsx(Ie,{}),e.jsx(ie,{}),e.jsx(Te,{}),e.jsx(Oe,{}),e.jsx(oe,{}),e.jsx(Fe,{}),e.jsx(ne,{}),e.jsx(De,{}),e.jsx(Ee,{})]})]})})),L=({children:s,title:a,optionsName:t})=>{const[i,r]=W.useState(!1),n=W.Children.toArray(s);return e.jsxs("div",{style:{borderTop:"0.125em solid var(--color-button-primary)",width:"100%",marginBottom:"0.5em"},children:[e.jsx("div",{style:{fontSize:"1.2em",fontWeight:"lighter",borderRadius:"0",width:"100%",textAlign:"left",backgroundColor:"var(--color-button-secondary)",padding:"0.5em"},children:a}),e.jsxs("div",{style:{display:"flex",padding:"0.25em 0.5em",gap:"0.5em",flexDirection:"column"},children:[n[0],i&&n.slice(1),e.jsx(re,{style:{padding:"0em 0.25em"},onClick:()=>r(o=>!o),children:i?`close extra ${t} ▲`:`see all ${t} ▶`})]})]})};export{Re as default};
