import{ai as D,A as B,j as s,X as O,a7 as I,G as j,I as G,aj as k,ak as v,al as w,N,r as f,O as c,am as C,H as W,T as E,P as _}from"./index-BJkzpN7E.js";import{S as H,T as z}from"./TextInput-BRk8ukL0.js";import{b as A,c as K,a as Q,g as R}from"./filterByConnections-B3foWc6c.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],V=D("search",U),X=()=>{const{updatePageParams:r,searchBy:i}=B();return s.jsx(O,{selectorLabel:"Search by",options:Object.values(j),onChange:n=>r({searchBy:n}),selected:i,display:I.Dropdown,selectorStyle:{marginLeft:"1em",marginBottom:"0em"}})};function J(){const{searchBy:r,objectType:i}=B(),{censuses:n,territories:o,languagesInSelectedSource:l,locales:F,writingSystems:x,variantTags:T}=G(),g=k(),u=v(),y=w(),S=A(),m=K(),h=Q(),a=N(),L=f.useMemo(()=>{switch(i){case c.Language:return l;case c.Locale:return F;case c.Territory:return o;case c.WritingSystem:return x;case c.Census:return Object.values(n);case c.VariantTag:return T}},[n,l,F,o,T,x,i,r]),[p,M]=f.useMemo(()=>[e=>{let t=0;return m(e)||(t+=1),S(e)||(t+=2),h(e)||(t+=4),y(e)||(t+=8),u(e)||(t+=16),g(e)||(t+=32),t},e=>m(e)?S(e)?h(e)?y(e)?u(e)?g(e)?"matched":"not "+a.languageScope:"not "+a.modalityFilter:"not "+a.territoryScope:"not "+a.territoryFilter:"not "+a.writingSystemFilter:"not "+a.languageFilter],[m,S,h,y,u,g,a]);return f.useCallback(async d=>{const P=R(d,r);return(L||[]).filter(P).sort((e,t)=>p(e)-p(t)).slice(0,H).map(e=>{const t=s.jsx(W,{object:e,field:r,query:d,showOriginalName:!0}),b=C(e,r);return{objectID:e.ID,searchString:b,label:t,group:M(e)}})},[L,r,p,M])}const ee=()=>{const{searchString:r,updatePageParams:i}=B(),n=J(),o=l=>i({searchString:l});return s.jsx(E,{display:I.ButtonList,children:s.jsxs("form",{className:"selector",style:{display:"inline-flex",alignItems:"center",marginBottom:"0.5em"},children:[s.jsx(z,{label:s.jsx(V,{size:"1em",display:"block",style:{padding:"0.5em"}}),inputStyle:{minWidth:"20em",border:"none"},getSuggestions:n,onSubmit:o,placeholder:"search",pageParameter:_.searchString,value:r}),s.jsx(X,{})]})})};export{ee as S};
