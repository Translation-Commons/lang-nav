import{u as P,j as e,S as ae,r as b,O as d,P as fe,H as w,a as l,L as X,T as Z,R as _,b as ee,c as xe,d as je,i as be,V}from"./index-D2nowbRA.js";import{V as te,D as Se,O as Pe,a as ke,C as Le,T as H,b as v,c as k,d as C,N as T,H as j,L as Ce,E as $,P as E,e as q,f as Te,I as ve,g as ie,h as De,n as I,i as oe,j as W,k as Ie,l as we,m as Ne,o as le,p as ne,q as se,W as Oe,r as Ve,s as Be,t as Me,u as Fe}from"./ObjectDetails-CRgyspZ1.js";import{c as N,S as A,a as z,g as M,b as Ge,d as Re,H as Ee,e as L,f as J,h as K,i as Q,j as We,k as ze,V as B,I as He,l as _e,m as Ae,n as Ue,o as $e,p as qe,q as Je,r as Ke}from"./filter-DctFZAOj.js";import{T as ce,L as ue}from"./LimitInput-Dg7NpLXY.js";import{u as h,a as Qe,C as de,t as Ye,s as Xe}from"./DataContext-zevvCp2-.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],et=N("copy",Ze);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],nt=N("search",tt);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],rt=N("wifi-high",st);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],it=N("wifi-low",at);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],lt=N("wifi-off",ot);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],ut=N("wifi",ct),dt=()=>{const{updatePageParams:s,searchBy:t}=P();return e.jsx(A,{selectorLabel:"Search by",options:Object.values(ae),display:z.Dropdown,onChange:n=>s({searchBy:n}),selected:t,selectorStyle:{marginLeft:"1em",marginBottom:"0em"}})},pt=10;function gt(){const{searchBy:s,objectType:t}=P(),{censuses:n,territories:r,languagesInSelectedSource:a,locales:o,writingSystems:i,variantTags:p}=h(),g=M(),u=b.useMemo(()=>{switch(t){case d.Language:return a;case d.Locale:return o;case d.Territory:return r;case d.WritingSystem:return i;case d.Census:return Object.values(n);case d.VariantTag:return p}},[n,a,o,r,p,i,t,s]);return b.useMemo(()=>async c=>{const x=Ge(c,s);return Qe((u||[]).filter(g).filter(x).slice(0,pt).map(m=>{let y=e.jsx(Ee,{object:m,field:s,query:c});const S=Re(m,s);return s===ae.Code&&(y=e.jsxs(e.Fragment,{children:[m.nameDisplay," [",y,"]"]})),{objectID:m.ID,searchString:S,label:y}}),m=>m.objectID)},[u,g,s])}const mt=()=>{const{searchString:s,updatePageParams:t}=P(),n=gt(),r=a=>{t({searchString:a})};return e.jsxs("form",{className:"selector",style:{display:"inline-flex",alignItems:"center",marginBottom:"0.5em"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",borderRadius:".75em",border:"0.125em solid var(--color-button-primary)"},children:[e.jsx(nt,{size:"1em",display:"block",style:{padding:"0.5em"}}),e.jsx(ce,{inputStyle:{minWidth:"20em",border:"none"},getSuggestions:n,onChange:r,display:z.ButtonList,placeholder:"search",pageParameter:fe.searchString,value:s})]}),e.jsx(dt,{})]})},Y=({children:s})=>e.jsx("div",{className:"ViewCard",children:s}),ht=300;function O({objects:s,renderCard:t}){const n=L(),r=J(),a=K(),o=M(),i=Q(),p=b.useMemo(()=>i(s.filter(o).filter(a).filter(r).sort(n)),[s,o,a,r,n,i]);return p.length===1?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"1em"},children:e.jsx(te,{objects:s})}),e.jsx(Se,{title:e.jsx(ke,{object:p[0]}),children:e.jsx(Pe,{object:p[0]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"1em"},children:e.jsx(te,{objects:s})}),e.jsx(yt,{children:p.map(g=>e.jsx(Y,{children:t(g)},g.ID))})]})}const yt=({children:s})=>{const t=b.useRef(null),[n,r]=b.useState(0);b.useEffect(()=>{const o=new ResizeObserver(([i])=>{i.contentRect&&r(i.contentRect.width)});return t.current&&o.observe(t.current),()=>o.disconnect()},[]);const a=n>0?Math.floor(n/ht):1;return e.jsx("div",{ref:t,style:{display:"grid",gridGap:"1.5em",gridTemplateColumns:`repeat(${a}, 1fr)`},children:s})},ft=()=>{const{censuses:s}=h();return e.jsx(O,{objects:Object.values(s),renderCard:t=>e.jsx(Le,{census:t})})},xt=()=>{const{territories:s}=h(),t=L(),n=M(),r=jt(s,t,n);return e.jsx(H,{rootNodes:r,description:e.jsx(e.Fragment,{children:"This view shows censuses and census tables, organized by the country they were collected for."})})};function jt(s,t,n=()=>!0){return s.filter(n??(()=>!0)).filter(r=>r.censuses&&r.censuses.length>0).sort(t).map(r=>bt(r,t,n))}function bt(s,t,n){return{type:d.Census,object:s,children:St(s,t,n)}}function St(s,t,n){return s.censuses?s.censuses.filter(n).sort(t).map(r=>Pt(r)):[]}function Pt(s){return{type:d.Census,object:s,labelStyle:{fontWeight:"bold"},children:[]}}const D=({items:s,label:t,limit:n=20})=>s==null?null:s.length===0?e.jsx(v,{children:"0"}):e.jsxs(w,{hoverContent:s.slice(0,n).join(", ")+(s.length>n?"...":""),children:[s.length,t&&e.jsx("span",{style:{marginLeft:"0.25em"},children:t})]}),kt=()=>{const{censuses:s,getLanguage:t}=h();return e.jsx(k,{objects:Object.values(s),columns:[C,T,{key:"Languages",render:n=>e.jsx(D,{items:Object.keys(n.languageEstimates).map(r=>{var a;return((a=t(r))==null?void 0:a.nameDisplay)??r})}),isNumeric:!0,sortParam:l.CountOfLanguages},{key:"Eligible Population",render:n=>n.eligiblePopulation!=null?n.eligiblePopulation.toLocaleString():"Unknown",isNumeric:!0,sortParam:l.Population,columnGroup:"Population"},{key:"Percent of Current Population",render:n=>{var r;return n.territory&&n.eligiblePopulation!=null?(r=We(n))==null?void 0:r.toFixed(1):"Unknown"},isNumeric:!0,isInitiallyVisible:!1,sortParam:l.PercentOfTerritoryPopulation,columnGroup:"Population"},{key:"Territory",render:n=>e.jsx(j,{object:n.territory}),isInitiallyVisible:!1},{key:"Year Collected",render:n=>n.collectorType!==de.CLDR?new Date(n.yearCollected+"-07-01").toLocaleDateString(void 0,{year:"numeric"}):e.jsx(v,{children:"multiple"}),isInitiallyVisible:!1,isNumeric:!0,sortParam:l.Date}]})},Lt=()=>{const{languagesInSelectedSource:s}=h();return e.jsx(O,{objects:s,renderCard:t=>e.jsx(Ce,{lang:t,includeRelations:!0})})};function Ct(s){return s===null?"Unknown":s>=7?"Strong":s>=4?"Medium":s>=1?"Low":"Extinct"}const Tt=({bucket:s})=>{switch(s){case"Strong":return e.jsx(ut,{size:"1em"});case"Medium":return e.jsx(rt,{size:"1em"});case"Low":return e.jsx(it,{size:"1em"});case"Extinct":return e.jsx(lt,{size:"1em"});case"Unknown":default:return null}};function vt(s){switch(s){case"Strong":return"var(--color-text-green)";case"Medium":return"var(--color-text-yellow)";case"Low":return"var(--color-text-orange)";case"Extinct":return"var(--color-text-red)";case"Unknown":return"var(--color-text-secondary)"}}const G=({lang:s,type:t})=>{const{score:n,explanation:r,label:a}=ze(s)[t],o=Ct(n);return e.jsx(w,{hoverContent:r,children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25em",color:vt(o)},children:[e.jsx(Tt,{bucket:o}),e.jsx("span",{children:t===B.Metascore?(n==null?void 0:n.toFixed(1))??"—":a??"—"})]})})},Dt=()=>{const{languagesInSelectedSource:s}=h(),t={...$,isInitiallyVisible:!0},n={...C,render:r=>e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.codeDisplay,e.jsx(re,{lang:r})]})};return e.jsx(k,{objects:s,columns:[n,{key:"ISO 639-3",render:r=>e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.sourceSpecific.ISO.code,e.jsx(re,{lang:r})]}),isInitiallyVisible:!1,columnGroup:"Codes"},{key:"Glottocode",render:r=>r.sourceSpecific.Glottolog.code,isInitiallyVisible:!1,columnGroup:"Codes"},T,t,{key:"Scope",render:r=>r.scope??r.scope,isInitiallyVisible:!1},{key:"Population",label:e.jsxs(e.Fragment,{children:["Population",e.jsx(E,{})]}),render:r=>r.populationEstimate,isNumeric:!0,sortParam:l.Population,columnGroup:"Population"},{key:"Population Attested",label:e.jsxs(e.Fragment,{children:["Population",e.jsx("br",{}),"Attested",e.jsx(w,{hoverContent:"This comes from a citable source (citations still needed).",children:e.jsx(He,{size:"1em"})})]}),render:r=>r.populationCited,isNumeric:!0,isInitiallyVisible:!1,sortParam:l.PopulationAttested,columnGroup:"Population"},{key:"Population of Descendents",label:e.jsxs(e.Fragment,{children:["Population of",e.jsx("br",{}),"Descendents",e.jsx(E,{})]}),render:r=>{var a;return e.jsxs(e.Fragment,{children:[(r.populationOfDescendents??0)>(r.populationEstimate??0)?e.jsx(w,{hoverContent:"Computed population of descendants exceeds population estimate.",children:e.jsx(q,{style:{color:"var(--color-text-yellow)"},size:"1em"})}):null,(a=r.populationOfDescendents)==null?void 0:a.toLocaleString()]})},isNumeric:!0,isInitiallyVisible:!1,sortParam:l.PopulationOfDescendents,columnGroup:"Population"},{key:"Vitality: Metascore",render:r=>e.jsx(G,{lang:r,type:B.Metascore}),sortParam:l.VitalityMetascore,columnGroup:"Vitality"},{key:"Vitality: ISO",render:r=>e.jsx(G,{lang:r,type:B.ISO}),sortParam:l.VitalityISO,isInitiallyVisible:!1,columnGroup:"Vitality"},{key:"Vitality: Ethnologue 2013",render:r=>e.jsx(G,{lang:r,type:B.Eth2013}),sortParam:l.VitalityEthnologue2013,isInitiallyVisible:!1,columnGroup:"Vitality"},{key:"Vitality: Ethnologue 2025",render:r=>e.jsx(G,{lang:r,type:B.Eth2025}),sortParam:l.VitalityEthnologue2025,isInitiallyVisible:!1,columnGroup:"Vitality"},{key:"CLDR Coverage",label:"CLDR Coverage",render:r=>e.jsx(Te,{object:r}),isInitiallyVisible:!1,columnGroup:"Digital Support"},{key:"ICU Support",label:"ICU Support",render:r=>e.jsx(ve,{object:r}),isInitiallyVisible:!1,columnGroup:"Digital Support"},{key:"Parent Language",render:r=>r.parentLanguage&&e.jsx(j,{object:r.parentLanguage}),isInitiallyVisible:!1,columnGroup:"Relations"},{key:"Dialects",render:r=>e.jsx(D,{items:r.childLanguages.sort((a,o)=>(o.populationCited??0)-(a.populationCited??0)).map(a=>a.nameDisplay)}),isNumeric:!0,isInitiallyVisible:!1,sortParam:l.CountOfLanguages,columnGroup:"Relations"},{key:"Territories",render:r=>e.jsx(D,{items:_e(r).map(a=>a.nameDisplay)}),isNumeric:!0,sortParam:l.CountOfTerritories,columnGroup:"Relations"},{key:"Wikipedia",render:r=>e.jsx(ie,{object:r,size:"compact"}),isInitiallyVisible:!1,columnGroup:"Digital Support"},{key:"Literacy",render:r=>{const a=Ae(r);return a==null?e.jsx(v,{children:"—"}):a.toFixed(1)},isInitiallyVisible:!1,sortParam:l.Literacy,isNumeric:!0}]})};function re({lang:s}){return s.warnings&&s.warnings[X.isoCode]?e.jsx(w,{hoverContent:s.warnings[X.isoCode],style:{marginLeft:"0.125em"},children:e.jsx(q,{size:"1em",display:"block",color:"var(--color-text-yellow)"})}):null}const It=()=>{const{locales:s}=h();return e.jsx(O,{objects:s,renderCard:t=>e.jsx(De,{locale:t})})},wt=()=>{const{locales:s}=h(),{languageSource:t}=P();return e.jsx(k,{objects:s.filter(n=>{var r;return((r=n.language)==null?void 0:r.sourceSpecific[t].code)!=null}),columns:[C,T,$,{label:e.jsxs(e.Fragment,{children:["Population",e.jsx(E,{})]}),key:"Population",render:n=>n.populationSpeaking,isNumeric:!0,sortParam:l.Population,columnGroup:"Demographics"},{key:"Literacy",render:n=>n.literacyPercent!=null?I(n.literacyPercent):null,isInitiallyVisible:!1,isNumeric:!0,sortParam:l.Literacy,columnGroup:"Demographics"},{key:"% in Territory",render:n=>n.populationSpeakingPercent&&e.jsxs(e.Fragment,{children:[I(n.populationSpeakingPercent),n.populationSpeakingPercent>10&&e.jsx("span",{style:{visibility:"hidden"},children:"0"})]}),isNumeric:!0,sortParam:l.PercentOfTerritoryPopulation,columnGroup:"Demographics"},{key:"% of Global Language Speakers",render:n=>{var r;return n.populationSpeaking&&I(n.populationSpeaking*100/(((r=n.language)==null?void 0:r.populationEstimate)??1))},isNumeric:!0,isInitiallyVisible:!1,sortParam:l.PercentOfOverallLanguageSpeakers,columnGroup:"Demographics"},{key:"Population Source",render:n=>e.jsx(oe,{locale:n,size:"short"}),columnGroup:"Demographics"},{key:"Contained Locales",render:n=>{var r;return e.jsx(W,{limit:2,children:(r=n.containedLocales)==null?void 0:r.map(a=>e.jsx(j,{object:a},a.ID))})},isInitiallyVisible:!1,isNumeric:!0,sortParam:l.CountOfLanguages,columnGroup:"Linked Data"},{key:"Language",render:n=>e.jsx(j,{object:n.language}),isInitiallyVisible:!1,columnGroup:"Linked Data",sortParam:l.Language},{key:"Territory",render:n=>e.jsx(j,{object:n.territory}),isInitiallyVisible:!1,columnGroup:"Linked Data"},{key:"Writing System",render:n=>e.jsx(j,{object:n.writingSystem}),isInitiallyVisible:!1,columnGroup:"Linked Data"},{key:"Variant Tags",render:n=>n.variantTags&&e.jsx(W,{limit:1,children:n.variantTags.map(r=>e.jsx(j,{object:r},r.ID))}),isInitiallyVisible:!1,columnGroup:"Linked Data"},{key:"Wikipedia",render:n=>e.jsx(ie,{object:n,size:"compact"}),isInitiallyVisible:!1},{key:"Locale Source",render:n=>Ye(n.localeSource),isInitiallyVisible:!1}]})},Nt=()=>{const{territories:s}=h();return e.jsx(O,{objects:s,renderCard:t=>e.jsx(Ie,{territory:t})})},Ot=()=>{const{territories:s}=h(),t=L(),n=M(),r=pe(s.filter(a=>a.parentUNRegion==null||!n(a.parentUNRegion)),t,n);return e.jsx(H,{rootNodes:r,description:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Bold territories"})," are countries. ",e.jsx("em",{children:"Italicized countries"})," are dependencies."]})})};function pe(s,t,n){return s.sort(t).filter(n).map(r=>Vt(r,t,n))}function Vt(s,t,n){return{type:d.Language,object:s,children:s.containsTerritories?pe(s.containsTerritories,t,n):[],labelStyle:{fontWeight:s.scope===Z.Country?"bold":"normal",fontStyle:s.scope===Z.Dependency?"italic":"normal"}}}const Bt=()=>{const{territories:s}=h();return e.jsx(k,{objects:s,columns:[C,T,{key:"Population",render:t=>t.population,isNumeric:!0,sortParam:l.Population,columnGroup:"Demographics"},{key:"Literacy",render:t=>t.literacyPercent!=null?t.literacyPercent.toFixed(1)+"%":null,isNumeric:!0,sortParam:l.Literacy,columnGroup:"Demographics"},{key:"Languages",render:t=>t.locales&&e.jsx(D,{items:t.locales.map(n=>{var r;return((r=n.language)==null?void 0:r.nameDisplay)??n.nameDisplay})}),isNumeric:!0,sortParam:l.CountOfLanguages,columnGroup:"Language"},{key:"Biggest Language",render:t=>t.locales&&t.locales.length>0&&e.jsx(j,{labelSource:"language",object:Ue(t),style:{textDecoration:"none"}}),isInitiallyVisible:!1,sortParam:l.Language,columnGroup:"Language"},{key:"Biggest Language %",render:t=>{var n;return t.locales?((n=t.locales[0].populationSpeakingPercent)==null?void 0:n.toFixed(1))+"%":null},isInitiallyVisible:!1,isNumeric:!0,sortParam:l.PopulationPercentInBiggestDescendentLanguage,columnGroup:"Language"},{key:"Contained UN Region",render:t=>{var n;return(n=t.parentUNRegion)==null?void 0:n.nameDisplay},isInitiallyVisible:!1,columnGroup:"Relations"},{key:"Territories and/or Dependencies",render:t=>e.jsx(D,{items:$e(t).map(n=>n.nameDisplay)}),isInitiallyVisible:!1,isNumeric:!0,sortParam:l.CountOfTerritories,columnGroup:"Relations"},{key:"Population of Dependencies",render:t=>t.dependentTerritories&&t.dependentTerritories.length>0?Xe(t.dependentTerritories,n=>n.population??0):null,isInitiallyVisible:!1,isNumeric:!0,sortParam:l.PopulationOfDescendents,columnGroup:"Relations"},{key:"Type",render:t=>t.scope}]})},Mt=()=>{const{variantTags:s}=h();return e.jsx(O,{objects:s,renderCard:t=>e.jsx(we,{data:t})})},Ft=()=>{const{variantTags:s}=h(),t=L(),n=Gt(s),r=ge(n,t);return e.jsx(H,{rootNodes:r,description:e.jsx(e.Fragment,{children:'Variant tags are associated with different "prefixes" (entities in bold) -- usually but not always language codes. This view organizes variant tags by the prefixes they apply to.'})})};function Gt(s){return s.reduce((t,n)=>(n.prefixes.forEach(a=>{const o=[...a.split("-"),n.ID];return o.reduce((i,p,g)=>{const u=i[p]||{key:p,branches:{}};return i[p]||(i[p]=u),g===o.length-1&&(u.variantTag=n),u.branches},t),t}),t),{})}function ge(s,t){return Object.values(s).map(Rt).filter(n=>n!=null).sort((n,r)=>t(n.object,r.object))}function Rt(s){const t=Ne(s.key);return t==null?null:{type:(t==null?void 0:t.type)??d.VariantTag,object:s.variantTag??t,children:ge(s.branches,L()),labelStyle:{fontWeight:(t==null?void 0:t.type)===d.VariantTag?"normal":"bold"}}}const Et=()=>{const{variantTags:s}=h();return e.jsx(k,{objects:s,columns:[C,T,{key:"Date Added",render:t=>{var n;return(n=t.dateAdded)==null?void 0:n.toLocaleDateString()},isInitiallyVisible:!1,isNumeric:!0,sortParam:l.Date},{key:"Languages",render:t=>e.jsx(D,{items:t.languages.map(n=>n.nameDisplay)}),isNumeric:!0,sortParam:l.CountOfLanguages},{key:"Potential Population",label:e.jsx(w,{hoverContent:e.jsxs(e.Fragment,{children:[e.jsx(q,{size:"1em"})," This is not the actual population of this variant tag, but an estimate based on the language(s) it applies to. If its an orthographic variant maybe it applies to the full modern population, but if its a dialect or historic variation it may only be a small group of people or only found in manuscripts."]}),children:"Potential Population"}),render:t=>qe(t),isInitiallyVisible:!1,isNumeric:!0,sortParam:l.Population}]})},F=({title:s,children:t})=>e.jsxs("details",{className:"collapsible-report",children:[e.jsx("summary",{style:{width:"100%",backgroundColor:"var(--color-button-secondary)",padding:"0.5em",borderRadius:"0.5em",cursor:"pointer",textAlign:"left",fontSize:"1.2em",marginBottom:"1em"},children:s}),t]}),Wt=()=>{const{territories:s}=h();return e.jsx(F,{title:"Countries with Censuses",children:e.jsx(k,{objects:s,columns:[C,T,{key:"Censuses",render:t=>{var n;return(n=t.censuses)==null?void 0:n.length},isNumeric:!0},...Object.values(de).map(t=>({key:t,render:n=>{var r;return e.jsx("div",{style:{maxWidth:"10em"},children:e.jsx(W,{limit:1,children:(r=n.censuses)==null?void 0:r.filter(a=>a.collectorType===t).map(a=>e.jsx(j,{object:a},a.ID))})})}})),{key:"Population",render:t=>t.population,isNumeric:!0,sortParam:l.Population},{key:"Languages",render:t=>{var n;return(n=t.locales)==null?void 0:n.length},isNumeric:!0,sortParam:l.CountOfLanguages}]})})},zt=()=>{const{getLanguage:s,getTerritory:t,getWritingSystem:n,languagesInSelectedSource:r}=h(),{page:a,limit:o}=P(),i=J(),p=K(),g=L(),u=Q(),f=b.useMemo(()=>r.filter(i).filter(p).filter(c=>c.codeDisplay.match("xx.-|^[0-9]")),[r,i,p]);return e.jsxs(F,{title:`Dubious languages (${f.length})`,children:["These languages have strange language codes and maybe should be removed from the list of languages. Some possibilities are:",e.jsxs("ol",{children:[e.jsx("li",{children:"It may be a dialect that doesn't have a standard ISO code. There may be a glottocode instead -- in that case it's probably redundant."}),e.jsx("li",{children:"If it is a combination of a language + territory, it is probably a locale incorrectly saved to the language list. Add the locale if it does not yet exist then remove the entry from the language list."}),e.jsx("li",{children:"If it is a combination of a language + writing system, it is probably there to represent an non-standard writing system used to write that language. We have not yet imported writing system alternatives so we cannot add that data yet."})]}),e.jsxs("div",{children:[e.jsx(ue,{}),e.jsx(le,{currentPage:a,totalPages:o<1?1:Math.ceil(f.length/o)})]}),e.jsx("div",{className:"CardList",style:{marginBottom:"1em"},children:u(f.sort(g)).map(c=>{const m=c.codeDisplay.split(/-|_/).map(y=>s(y)??t(y)??n(y)).filter(y=>y!=null);return e.jsxs(Y,{children:[e.jsxs("div",{children:[e.jsx("label",{children:"Names:"}),c.nameDisplay]}),e.jsxs("div",{children:[e.jsx("label",{children:"Language Code:"}),c.codeDisplay]}),e.jsxs("div",{children:[e.jsx("label",{children:"Population:"}),c.populationEstimate||e.jsx(v,{children:"no population"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Potentially related objects:"}),e.jsx("ul",{style:{margin:0},children:m.length>0?m.map(y=>e.jsx("li",{children:e.jsx(j,{object:y,labelSource:"code"})},y.ID)):e.jsx(v,{children:"none"})})]})]},c.ID)})})]})},Ht=()=>{const{languagesInSelectedSource:s}=h();s.forEach(i=>{i.largestDescendant=void 0}),s.forEach(i=>{i.largestDescendant=me(i)});const[t,n]=_.useState(0),[r,a]=_.useState(100),o=b.useMemo(()=>s.filter(i=>{var g;if(i.largestDescendant==null||i.populationEstimate==null||i.populationEstimate===0)return!1;const p=(((g=i.largestDescendant)==null?void 0:g.populationEstimate)||0)/(i.populationEstimate||1)*100;return p>=t&&p<=r}),[s,t,r]);return e.jsxs(F,{title:"Largest Descendant",children:["This report shows, for each language family or group, which of its descendants is the largest language by population. This can help identify which languages are the most prominent within a family. It may also reveal some problems in the data, especially if the largest descendant has more population than is estimated for the language/language family itself.",e.jsx(A,{selectorLabel:"Minimum % of population",options:[0,25,50,75,90,95,99],selected:t,onChange:i=>n(i)}),e.jsx(A,{selectorLabel:"Maximum % of population",options:[75,90,95,99,99.5,99.9,99.99,100,1e6],selected:r,onChange:i=>a(i)}),e.jsx(k,{columns:[C,T,{key:"Population",render:i=>i.populationEstimate,isNumeric:!0,sortParam:l.Population},{key:"Estimated Population of Descendents",label:e.jsxs(e.Fragment,{children:["Estimated Population",e.jsx("br",{})," of Descendents"]}),render:i=>i.populationOfDescendents,isNumeric:!0,sortParam:l.PopulationOfDescendents},{key:"Largest Descendant",render:i=>i.largestDescendant&&e.jsxs(e.Fragment,{children:[e.jsx(j,{object:i.largestDescendant})," [",i.largestDescendant.codeDisplay,"]"]})},{key:"Descendent Population",render:i=>{var p;return((p=i.largestDescendant)==null?void 0:p.populationEstimate)||null},isNumeric:!0},{key:"% Descendent",render:i=>{const p=Je(i);return p?I(p*100):null},isNumeric:!0,sortParam:l.PopulationPercentInBiggestDescendentLanguage}],objects:o})]})};function me(s){if(s.largestDescendant!==void 0)return s.largestDescendant;if(s.childLanguages.length!==0)return s.childLanguages.reduce((t,n)=>{const r=me(n),a=((r==null?void 0:r.populationCited)||0)>(n.populationCited||0)?r:n;return a!=null&&a.populationCited!=null&&a.populationCited>0&&(t==null||a.populationCited>((t==null?void 0:t.populationCited)||0))?a:t},void 0)}const _t=()=>{const{languagesInSelectedSource:s}=h(),{page:t,limit:n}=P(),r=J(),a=K(),o=L(),i=Q(),p=b.useMemo(()=>s.filter(r).filter(a).reduce((u,f)=>{const c=f.nameDisplay;return u[c]==null?u[c]=[f]:u[c].push(f),u},{}),[s,r,a]),g=Object.entries(p).reduce((u,[f,c])=>(c.length>1&&(u[f]=c),u),{});return e.jsxs(F,{title:`Languages with identical names (${Object.keys(g).length})`,children:["The following languages have identical names. This can happen when merging data from multiple sources. It gets confusing to find the right language when names overlap. To fix this we should change names with these possible options:",e.jsxs("ol",{children:[e.jsx("li",{children:"Use language family names e.g. Japanese → Japonic, Bantu → Bantuoid. Only if that name is understood -- don't invent names, let the academics do that."}),e.jsx("li",{children:"Append term in parentheses to distiniguish the scope for the rarer term eg. Malay (macrolanguage), Malay (individual language)"}),e.jsx("li",{children:"Append territory name in parentheses eg. Tonga (Malawi), Tonga (Tonga Islands)"}),e.jsx("li",{children:"Some entries may correspond to language fragments that maybe should not be in the list and be removed."})]}),e.jsxs("div",{children:[e.jsx(ue,{}),e.jsx(le,{currentPage:t,totalPages:n<1?1:Math.ceil(Object.keys(g).length/n)})]}),i(Object.entries(g).sort((u,f)=>{const c=u[1][0],x=f[1][0];return c!=null&&x!=null?o(c,x):0})).map(([u,f])=>e.jsxs("div",{style:{marginBottom:"1em"},children:[e.jsx("h3",{style:{marginBottom:0},children:u}),e.jsx("div",{className:"CardList",children:f.map(c=>{const{ISO:x,Glottolog:m}=c.sourceSpecific,y=c.names.filter(S=>S!==c.nameDisplay&&S!==c.nameEndonym);return e.jsxs(Y,{children:[e.jsxs("div",{children:[e.jsx("label",{children:"Other Names:"}),e.jsx(W,{children:y.length>0?y:e.jsx(v,{children:"none"})})]}),e.jsxs("div",{children:[e.jsx("label",{children:"ISO code:"}),x.code]}),e.jsxs("div",{children:[e.jsx("label",{children:"Glottocode:"}),m.code]}),e.jsxs("div",{children:[e.jsx("label",{children:"Scope:"}),c.scope??e.jsx(v,{children:"Unknown"})]}),x.code!=null&&e.jsxs("div",{children:["ISO Hierarchy:"," ",e.jsx(ne,{rootNodes:se([c],ee.ISO,o)})]}),m.code!=null&&e.jsxs("div",{children:["Glottolog Hierarchy:"," ",e.jsx(ne,{rootNodes:se([c],ee.Glottolog,o)})]})]},c.ID)})})]},u))]})};function At(){const[s,t]=_.useState(.05),n=e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"end",marginBottom:"0.5em"},children:[e.jsx(Ke,{display:z.ButtonGroup,label:"Percent Threshold:",description:"Limit results by the minimum percent population in a territory that uses the language."}),e.jsx(ce,{inputStyle:{width:"3em",borderRadius:"1em 0 0 1em"},getSuggestions:async()=>[{searchString:"0.001",label:"0.001%"},{searchString:"0.005",label:"0.005%"},{searchString:"0.01",label:"0.01%"},{searchString:"0.05",label:"0.05%"},{searchString:"0.1",label:"0.1%"},{searchString:"0.5",label:"0.5%"},{searchString:"1",label:"1%"},{searchString:"5",label:"5%"},{searchString:"10",label:"10%"}],display:z.ButtonGroup,onChange:r=>t(Number(r)),placeholder:"",value:Number.isNaN(s)?"":s.toString()})]});return{percentThreshold:s,percentThresholdSelector:n}}const Ut=()=>{const{censuses:s,getLanguage:t,getLocale:n,locales:r}=h(),{localeSeparator:a}=P(),{percentThreshold:o,percentThresholdSelector:i}=At(),p=qt(Object.values(s),t,n,r,a,o);return e.jsxs("div",{children:[e.jsx("h1",{children:"Potential Locales"}),e.jsx("p",{children:"This page lists locales from Census data that are not in the list of defined locales. There are too many possible combinations of language + territory + variation information, so the number of actualized locales is smaller than the possible ones. However ones that appear here may be worth considering."}),i,e.jsx(R,{title:"Largest Populations",locales:p.largest,children:"Of all of the census records collected so far, these locales have more people speaking it than the other instantiated locales. This likely means the world population is indigenous to this country. However, since we do not have full census coverage it is very possible that the language is native to a different country without an inputted census record. Additionally, some of these locales are macrolanguages or constituents thereof, so we may actually have the language but represented by a different aspect."}),e.jsxs(R,{title:"Largest ** with caveats",locales:p.largestButDescendentExists,children:["The locales represent the largest population of a language in a territory, but a language or dialect of that locale is already present for that locale, so it may not be necessary or it may be a language family not consistently listed in other censuses.",e.jsx("div",{style:{height:"0.5em"}}),"For example, the Canadian [CA] census includes Indo-European [ine] as an entry. Since few censuses include Indo-European, it looks as if ine_CA is native to Canada. That is a data coverage issue -- not a real origin for the language group. Indo-European contains other languages that are listed in other parts of the same census like Italian eng_CA."]}),e.jsx(R,{title:"Significant Population",locales:p.significant,children:"This is the list of locales native to other countries, but with a significant population in other countries."}),e.jsx(R,{title:"Significant ** with caveats",locales:p.significantButMaybeRedundant,children:"Locales in this table reflect languages that already have other locales in territories but a consistent of the same language not necessarily the same locale. For example, they may have an entry with a writing system specified."})]})},R=({title:s,children:t,locales:n})=>{const r=M(),a=L(),{limit:o,page:i}=P(),p=n.filter(r).sort(a).slice(o*(i-1),Math.min(o*i,n.length)).map(he).join("");return e.jsxs(F,{title:`${s} (${n.filter(r).length})`,children:[t," ",e.jsx("button",{style:{padding:"0.25em"},onClick:()=>{navigator.clipboard.writeText(p)},children:"Copy visible locales to Clipboard"}),e.jsx($t,{locales:n})]})},$t=({locales:s})=>e.jsx(k,{objects:s,columns:[{key:"Potential Locale",render:t=>e.jsx(j,{object:t,labelSource:"code"}),sortParam:l.Code},{key:"Language",render:t=>t.language?e.jsx(j,{object:t.language}):t.languageCode,sortParam:l.Name},{key:"Population",render:t=>t.populationSpeaking,isNumeric:!0,sortParam:l.Population},{key:"% in Territory",render:t=>t.populationSpeakingPercent&&I(t.populationSpeakingPercent),isNumeric:!0,sortParam:l.PercentOfTerritoryPopulation},{key:"% of Global Language Speakers",render:t=>{var n;return t.populationSpeaking&&I(t.populationSpeaking*100/(((n=t.language)==null?void 0:n.populationEstimate)??1))},isNumeric:!0,sortParam:l.PercentOfOverallLanguageSpeakers},{key:"Population Source",render:t=>e.jsx(oe,{locale:t,size:"short"})},{key:"Related Locale",render:t=>{const n=t.containedLocales?t.containedLocales[0]:null;return n&&e.jsx(j,{object:n,labelSource:"code"})}},{key:"Copy",render:t=>e.jsx("button",{style:{padding:"0.25em"},onClick:()=>navigator.clipboard.writeText(he(t)),children:e.jsx(et,{size:"1em",display:"block"})})}]});function he(s){var t;return`${s.ID}	${s.nameDisplay} (${(t=s.territory)==null?void 0:t.nameDisplay})		Official	${s.populationSpeaking}	
`}function qt(s,t,n,r,a,o){const i=b.useMemo(()=>s.reduce((g,u)=>{var f;return(f=Object.entries(u.languageEstimates??{}))==null||f.forEach(([c,x])=>{const m=c+"_"+u.isoRegionCode,y=t(c);if(n(m)||y==null)return;const S=x*100/u.eligiblePopulation;S<o||(g[m]==null?g[m]={localeSource:je.Census,type:d.Locale,ID:c+"_"+u.isoRegionCode,codeDisplay:y.codeDisplay+a+u.isoRegionCode,languageCode:c,language:y,nameDisplay:y.nameDisplay,names:y.names,territory:u.territory,territoryCode:u.isoRegionCode,populationSource:xe.Official,populationSpeaking:x,populationSpeakingPercent:S,populationCensus:u,censusRecords:[{census:u,populationEstimate:x,populationPercent:S}]}:((g[m].populationSpeaking??0)<x&&(g[m].populationSpeaking=x,g[m].populationSpeakingPercent=S,g[m].populationCensus=u),g[m].censusRecords==null&&(g[m].censusRecords=[]),g[m].censusRecords.push({census:u,populationEstimate:x,populationPercent:S})))}),g},{}),[s,a,o,t,n]),p=b.useMemo(()=>[...r,...Object.values(i)].reduce((g,u)=>{var x;const f=(x=u.territory)==null?void 0:x.scope;if(be(f))return g;const c=u.languageCode;return g[c]||(g[c]=[]),g[c].push(u),g},{}),[i]);return Object.values(p).reduce(Jt,{largest:[],largestButDescendentExists:[],significant:[],significantButMaybeRedundant:[]})}function Jt(s,t){const n=t.sort((a,o)=>(o.populationSpeaking??0)-(a.populationSpeaking??0)),r=n.reduce((a,o)=>(o.populationSpeaking??0)>(a.populationSpeaking??0)?o:a,n[0]);if(r.localeSource==="census"){const a=r.language?U([r.language],r.territoryCode):null;a?(r.containedLocales=[a],s.largestButDescendentExists.push(r)):(r.containedLocales=[n[1]],s.largest.push(r))}return t.filter(a=>a!==r&&a.localeSource==="census").forEach(a=>{const o=a.language?U([a.language],a.territoryCode):null;o?(a.containedLocales=[o],s.significantButMaybeRedundant.push(a)):(a.containedLocales=[n[0]],s.significant.push(a))}),s}function U(s,t){const n=Kt(s,t),r=(s==null?void 0:s.map(a=>U(a.childLanguages,t)))??[];return[n,...r].filter(Boolean).sort((a,o)=>((o==null?void 0:o.populationSpeaking)??0)-((a==null?void 0:a.populationSpeaking)??0))[0]??null}function Kt(s,t){return(s==null?void 0:s.map(n=>n.locales.filter(r=>r.territoryCode===t)[0]??null).filter(Boolean)[0])??null}const Qt=()=>{const{objectType:s}=P();return e.jsx("div",{style:{textAlign:"start"},children:e.jsx(Yt,{objectType:s})})},Yt=({objectType:s})=>{switch(s){case d.Locale:return e.jsx(Ut,{});case d.Language:return e.jsxs(e.Fragment,{children:[e.jsx(zt,{}),e.jsx(_t,{}),e.jsx(Ht,{})]});case d.Census:return e.jsx(Wt,{});case d.Territory:case d.WritingSystem:return e.jsx("div",{children:"There are no reports for this object type."})}},Xt=()=>{const{writingSystems:s}=h();return e.jsx(O,{objects:s,renderCard:t=>e.jsx(Oe,{writingSystem:t})})},Zt=()=>{const{writingSystems:s}=h(),t=L(),n=b.useMemo(()=>ye(s.filter(r=>r.parentWritingSystem==null),t),[s,t]);return e.jsx(H,{rootNodes:n,description:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Bold writing systems"})," historically led to other writing systems that are still used today. ",e.jsx("em",{children:"Italicized writing systems"})," have few recorded users (either missing data or it is functionally extinct)."]})})};function ye(s,t,n=()=>!0){return s.filter(n).sort(t).map(r=>en(r,t,n)).filter(r=>r!=null)}function en(s,t,n){return{type:d.WritingSystem,object:s,children:s.childWritingSystems?ye(s.childWritingSystems,t,n):[],labelStyle:{fontWeight:((s==null?void 0:s.populationOfDescendents)??0)>100?"bold":"normal",fontStyle:((s==null?void 0:s.populationUpperBound)??0)<=100?"italic":"normal"}}}const tn=()=>{const{writingSystems:s}=h(),t={...$,isInitiallyVisible:!0};return e.jsx(k,{objects:s,columns:[C,T,t,{label:e.jsxs(e.Fragment,{children:["Population",e.jsx(E,{})]}),key:"Population",render:n=>n.populationUpperBound,isNumeric:!0,sortParam:l.Population},{key:"Languages",render:n=>n.languages&&e.jsx(D,{items:Object.values(n.languages).map(r=>r.nameDisplay)}),isNumeric:!0,sortParam:l.CountOfLanguages}]})};function nn(){const{view:s,objectType:t}=P();switch(s){case V.CardList:switch(t){case d.Census:return e.jsx(ft,{});case d.Language:return e.jsx(Lt,{});case d.Locale:return e.jsx(It,{});case d.Territory:return e.jsx(Nt,{});case d.WritingSystem:return e.jsx(Xt,{});case d.VariantTag:return e.jsx(Mt,{})}case V.Details:return e.jsx(Me,{});case V.Hierarchy:switch(t){case d.Census:return e.jsx(xt,{});case d.Language:return e.jsx(Be,{});case d.Locale:return e.jsx(Ve,{});case d.Territory:return e.jsx(Ot,{});case d.WritingSystem:return e.jsx(Zt,{});case d.VariantTag:return e.jsx(Ft,{})}case V.Table:switch(t){case d.Census:return e.jsx(kt,{});case d.Language:return e.jsx(Dt,{});case d.Locale:return e.jsx(wt,{});case d.Territory:return e.jsx(Bt,{});case d.WritingSystem:return e.jsx(tn,{});case d.VariantTag:return e.jsx(Et,{})}case V.Reports:return e.jsx(Qt,{})}}const cn=()=>e.jsxs("main",{style:{padding:"1em",flex:1,overflow:"auto",width:"100%"},children:[e.jsx(mt,{}),e.jsx(Fe,{}),e.jsx("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"1rem 2rem",textAlign:"center"},children:e.jsx(nn,{})})]});export{cn as default};
