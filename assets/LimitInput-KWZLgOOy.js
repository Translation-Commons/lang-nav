import{r as u,j as e,R as E,k as S,V as f,P as D,n as W,C as L}from"./index-Cj0G6XF0.js";import{E as j,N as P,P as g,Q as F,a as x,R as H,r as v,X as M,U as N,S as B,V,j as K,q as A}from"./BaseColorBar-BBU2EelG.js";import{e as U}from"./useDataContext-DHMdzvK9.js";const z=t=>{const s=u.useRef(null),[r,o]=u.useState(50);return u.useEffect(()=>{s.current&&o(s.current.offsetWidth+10)},[t]),{CalculateWidthFromHere:e.jsx("span",{ref:s,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:t||" "}),width:r}},k=({children:t,disabled:s=!1,position:r=g.Middle})=>{const{display:o}=j();return e.jsx("button",{className:"secondaryHoverableText",disabled:s,style:{...P(o,!1,r),lineHeight:"0.5em"},type:"button",children:e.jsx("div",{style:{fontSize:"0.75em"},children:t})})},q=10,Q=({onClickSuggestion:t,onKeyDownSuggestion:s,pageParameter:r,showSuggestions:o,suggestions:n,topLabel:i})=>{function a(d){const l=H(d,n.length);return i?l===g.Only?g.Last:l===g.Last?g.Last:g.Middle:l}return e.jsxs(F,{isOpen:o&&n.length>0,children:[i,n.map((d,l)=>e.jsxs(E.Fragment,{children:[l>0&&n[l-1].group!==d.group&&e.jsx(k,{disabled:!0,position:g.Middle,children:d.group}),e.jsx(X,{pageParameter:r,position:a(l),onClick:t,onKeyDown:s,suggestion:d})]},l))]})},X=({pageParameter:t,position:s=g.Standalone,onClick:r,onKeyDown:o,suggestion:n})=>{const{view:i}=S(),a=P(x.Dropdown,!1,s);return i===f.Details&&t===D.searchString?e.jsx(_,{suggestion:n,style:a}):e.jsx("button",{onMouseDown:o,onClick:()=>r(n),style:a,role:"option",type:"button",children:n.label})},_=({style:t,suggestion:s})=>{const{objectID:r,searchString:o,label:n}=s,{updatePageParams:i}=S(),a=()=>{i({objectID:r,view:f.Details,searchString:o})};return e.jsx(v,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",o]}),onClick:a,style:t,children:n})},$=({getSuggestions:t=async()=>[],inputStyle:s,label:r,onSubmit:o,pageParameter:n,placeholder:i,value:a})=>{const{CalculateWidthFromHere:d,width:l}=z(a),[p,y]=u.useState(a);u.useEffect(()=>{y(a)},[a,y]);const b=u.useRef(!1),[R,T]=u.useState([]),[w,h]=u.useState(!1),m=u.useCallback((c,C)=>{if(C!==2&&b.current)return;o(c);const G=setTimeout(()=>{h(!1),y(c),b.current=!1},100);return()=>clearTimeout(G)},[o,h]);u.useEffect(()=>{let c=!0;return(async()=>{const C=await t(p);c&&T(C.slice(0,q))})(),()=>{c=!1}},[t,p]);const I=u.useCallback(c=>{b.current=!1,h(!0),c.key==="Enter"?(c.preventDefault(),m(p,0)):c.key==="Escape"&&(y(a),h(!1))},[m,p,h,a]),O=u.useCallback(c=>{b.current=!0,m(c.searchString,2)},[m]);return e.jsxs("div",{style:{display:"flex",alignItems:"center",borderRadius:".75em",border:"0.125em solid var(--color-button-primary)"},children:[r,e.jsx(Q,{pageParameter:n,showSuggestions:w,suggestions:R,onClickSuggestion:O,onKeyDownSuggestion:()=>b.current=!0,topLabel:e.jsxs(k,{position:g.First,children:["Pick a suggestion",p!==""?` or press [enter] to filter by "${p}"`:" or type to filter"]})}),e.jsx("input",{type:"text","aria-expanded":w,"aria-controls":"suggestion-list",autoComplete:"off",className:p===""?"empty":"",id:n,onChange:c=>y(c.target.value),onBlur:()=>m(p,0),onFocus:()=>h(!0),onKeyDown:I,placeholder:i,role:"combobox",style:{borderRadius:"0.75em",borderWidth:0,padding:"0.5em",lineHeight:"1.5em",...s,width:l+5},value:p}),d,e.jsx(J,{onClear:()=>m("",1)})]})},J=({onClear:t})=>{const{display:s}=j();return e.jsx(v,{buttonType:"button",hoverContent:"Clear the input",onClick:t,style:{...s===x.ButtonList?{borderRadius:"0.5em",border:"none"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},marginLeft:"0em",padding:"0.5em"},children:e.jsx(M,{size:"1em",display:"block"})})},se=({objectType:t})=>{const{colorBy:s,updatePageParams:r,view:o,objectType:n}=S(),{display:i}=j(),a=N(t??n),d=["None",...Object.values(W).filter(l=>a.includes(l))];return o!==f.Map&&o!==f.CardList?null:e.jsx(B,{selectorLabel:i===x.Dropdown?"Color By":void 0,selectorDescription:"Choose the color coding for items in the view.",options:d,onChange:l=>r({colorBy:l}),selected:s})},oe=()=>{const{colorBy:t,colorGradient:s,updatePageParams:r,view:o}=S(),{display:n}=j();return t=="None"||o!==f.Map&&o!==f.CardList?null:e.jsx(B,{selectorLabel:n===x.Dropdown?"Color gradient":void 0,selectorDescription:"Choose the range of colors used to represent values.",options:Object.values(L).filter(i=>typeof i=="number"),onChange:i=>r({colorGradient:i}),selected:s,getOptionLabel:i=>e.jsx("div",{style:{minWidth:"4em",height:"16px",display:"inline-block"},children:e.jsx(V,{colorGradient:i})}),getOptionDescription:Y})};function Y(t){var r;const s=((r=Object.entries(L).find(([,o])=>o===t))==null?void 0:r[0])||"";return U(s)}const re=()=>{const{limit:t,updatePageParams:s}=S();return e.jsx(K,{display:x.ButtonList,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center"},children:[e.jsx(A,{description:"Limit how many results are shown.",label:"Item Limit"}),e.jsx($,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"},{searchString:"1000",label:"1000"},{searchString:"-1",label:"∞"},{searchString:"",label:"default"}],onSubmit:r=>s({limit:parseInt(r)}),pageParameter:D.limit,placeholder:"∞",value:t.toString()})]})})};export{se as C,re as L,q as S,$ as T,oe as a};
