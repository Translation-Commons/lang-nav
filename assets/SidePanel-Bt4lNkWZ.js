import{l as G,k as l,r as x,m as N,j as e,n as u,P as D,O as d,e as f,V as y,T as X,W,S as v,L as H,q,s as _,R as L,t as K}from"./index-3GzipLU0.js";import{h as U,H as Y,B as O,k,e as Q,c as $,f as R,C as P,j as C,q as B,T as J,S as p,E as Z,F as ee,G as te,a as h,I as se,O as re,o as ae,J as ie,L as oe,r as M}from"./BaseColorBar-XvgeXAJu.js";import{S as ne,T as E,L as le,C as ce,a as ge}from"./LimitInput-ClEaJq_7.js";import{d as I,e as V,c as ue}from"./useDataContext-BStwwt__.js";import{L as pe,a as de,V as ye}from"./VitalityTypes-CbVUEUAD.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],me=G("chevron-right",he),Se=()=>{const{page:s,updatePageParams:r}=l();x.useEffect(()=>{const t=i=>{const a=i.target;a!==null&&a instanceof HTMLElement&&(a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable)||(i.key==="ArrowRight"?r({page:s+1}):i.key==="ArrowLeft"&&s>1&&r({page:s-1}))};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[s,r])};function A(s,r,t){return async i=>{const a=i.split("[")[0].trim(),n=U(a,N.CodeOrNameAny);return s.filter(n).sort((o,g)=>r(o)-r(g)).slice(0,ne).map(o=>{const g=e.jsx(Y,{object:o,field:N.CodeOrNameAny,query:a,showOriginalName:!0}),c=o.nameDisplay+" ["+o.ID+"]";return{objectID:o.ID,searchString:c,label:g,group:t(o)}})}}const fe=({display:s})=>{const{languageFilter:r,updatePageParams:t}=l(),{languagesInSelectedSource:i}=I(),a=O(u.Population),n=k(),o=Q(),g=$(),c=R(),{display:T}=P(),j=s??T,F=x.useMemo(()=>{const m=S=>{let b=0;return g(S)||(b+=1),o(S)||(b+=2),n(S)||(b+=4),b},z=S=>g(S)?o(S)?n(S)?"matched":"not "+c.languageScope:"not "+c.territoryFilter:"not "+c.writingSystemFilter;return A(i.sort(a),m,z)},[i,n,o,g,c,a]);return e.jsx(C,{display:j,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(B,{label:"Language",description:e.jsxs(e.Fragment,{children:['Filter results to those relevant to a specific language, language family, or dialect. You can enter either the language name or its code. For example, entering "Spanish" or ',e.jsx("code",{children:"spa"})," will filter to objects relevant to Spanish."," ",e.jsx(je,{})]})}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(E,{inputStyle:{minWidth:"8em"},getSuggestions:F,onSubmit:m=>t({languageFilter:m}),pageParameter:D.languageFilter,placeholder:"Name or code",value:r})})]})})},je=()=>{const{objectType:s}=l();switch(s){case d.Language:return e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Language view only:"})," Selecting a language family will show the languages in the family. Dialects will also appear if they are enabled."]});case d.Territory:return e.jsx(e.Fragment,{children:"This will filter territories to ones where the selected language is used."});case d.WritingSystem:return e.jsx(e.Fragment,{children:"This will filter writing systems to ones used for the selected language."});case d.VariantTag:return e.jsx(e.Fragment,{children:"This will filter variant tags for ones that are intended for this language."});case d.Locale:return e.jsx(e.Fragment,{children:"This will filter locales with the selected language."});case d.Census:return e.jsxs(e.Fragment,{children:[e.jsx(J,{size:"1em",style:{color:"var(--color-text-yellow)"}})," Censuses are not currently supported by this filter."]})}},xe=()=>{const{languageScopes:s,updatePageParams:r}=l();function t(a){return V(be(a))}return e.jsx(p,{selectorLabel:"Languoid Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of language-type objects are shown, such as families, macrolanguages, languages, dialects, and special codes.",options:Object.values(f),onChange:a=>s.includes(a)?r({languageScopes:s.filter(n=>n!=a)}):r({languageScopes:[...s,a]}),selected:s,getOptionLabel:t})};function be(s){switch(s){case f.Family:return"language families";case f.Macrolanguage:return"macrolanguages";case f.Language:return"languages";case f.Dialect:return"dialects";case f.SpecialCode:return"special codes"}}const ve=({display:s})=>{const{territoryFilter:r,updatePageParams:t}=l(),{territories:i}=I(),a=k(),n=R(),o=O(u.Population),{display:g}=P(),c=s??g,T=x.useMemo(()=>{const j=m=>a(m)?0:1,F=m=>a(m)?"matched":"not "+n.territoryScope;return A(i.sort(o),j,F)},[i,a,n,o]);return e.jsx(C,{display:c,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(B,{label:"In Territory",description:"Filter results by ones relevant in a territory."}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(E,{inputStyle:{minWidth:"8em"},getSuggestions:T,onSubmit:j=>t({territoryFilter:j}),pageParameter:D.territoryFilter,placeholder:"Name or code",value:r})})]})})},we=()=>{const{territoryScopes:s,updatePageParams:r,objectType:t,view:i}=l();return![d.Territory,d.Locale].includes(t)&&!(i===y.Reports&&t===d.Census)?null:e.jsx(p,{selectorLabel:"Territory Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of territories are shown, such as countries, regions, and dependencies.",options:Object.values(X),onChange:n=>s.includes(n)?r({territoryScopes:s.filter(o=>o!=n)}):r({territoryScopes:[...s,n]}),selected:s})},Le=()=>{const{isoStatus:s,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"ISO Language Status",selectorDescription:"Filter languages by their ISO status (Living, Extinct, etc.)",labelWhenEmpty:"Any",options:Object.values(pe).filter(t=>typeof t=="number"),onChange:t=>s.includes(t)?r({isoStatus:s.filter(i=>i!==t)}):r({isoStatus:[...s,t]}),selected:s,getOptionLabel:Z})},Pe=()=>{const{vitalityEth2013:s,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Vitality Eth 2013",selectorDescription:"Filter languages by their Ethnologue 2013 vitality classification",labelWhenEmpty:"Any",options:Object.values(de).filter(t=>typeof t=="number"),onChange:t=>s.includes(t)?r({vitalityEth2013:s.filter(i=>i!==t)}):r({vitalityEth2013:[...s,t]}),selected:s,getOptionLabel:ee})},Ce=()=>{const{vitalityEth2025:s,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Vitality Eth 2025",selectorDescription:"Filter languages by their Ethnologue 2025 vitality classification",labelWhenEmpty:"Any",options:Object.values(ye).filter(t=>typeof t=="number"),onChange:t=>s.includes(t)?r({vitalityEth2025:s.filter(i=>i!==t)}):r({vitalityEth2025:[...s,t]}),selected:s,getOptionLabel:te})},Te=({display:s})=>{const{writingSystemFilter:r,updatePageParams:t}=l(),{writingSystems:i}=I(),a=O(u.Population),{display:n}=P(),o=s??n,g=x.useMemo(()=>A(i.sort(a),c=>c.scope===W.IndividualScript?0:1,c=>c.scope===W.IndividualScript?"":"other types of scripts"),[i,a]);return e.jsx(C,{display:o,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(B,{label:"Written in",description:"Filter results by ones written in this script."}),e.jsx(E,{inputStyle:{minWidth:"8em"},getSuggestions:g,onSubmit:c=>t({writingSystemFilter:c}),pageParameter:D.writingSystemFilter,placeholder:"Name or code",value:r})]})})};function Fe(s){let t=[...[u.Population,u.PopulationDirectlySourced,u.Area,u.CountOfLanguages,u.CountOfDialects,u.CountOfTerritories]];return s===d.Language&&(t=t.filter(i=>i!==u.CountOfLanguages&&i!==u.Area)),s===d.Territory&&(t=t.filter(i=>i!==u.CountOfDialects)),t}const De=()=>{const{scaleBy:s,updatePageParams:r,objectType:t}=l(),{display:i}=P(),n=["None",...Fe(t)];return e.jsx(p,{selectorLabel:i===h.Dropdown?"Scale By":void 0,selectorDescription:"Choose a field to scale items by (map circles).",options:n,onChange:o=>r({scaleBy:o}),selected:s})},Oe=()=>{const{sortBy:s,updatePageParams:r,objectType:t}=l(),i=se(t);return e.jsx(p,{selectorLabel:"Sort By",selectorDescription:"Choose the order of items in the view.",options:Object.values(u).filter(a=>i.includes(a)),onChange:a=>r({sortBy:a}),selected:s,display:h.Dropdown})},Be=()=>{const{sortBehavior:s,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Sort Direction",options:[v.Normal,v.Reverse],getOptionLabel:t=>v[t],getOptionDescription:t=>t===v.Normal?"Sort with high numbers first / first letter in alphabet first.":"Sort with low numbers first / last letter in alphabet first.",onChange:t=>r({sortBehavior:t}),selected:s})},Ee=()=>{const{localeSeparator:s,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Locale Separator",selectorDescription:"Choose the separator in locale codes, eg. 'ar-EG' or 'ar_EG'",options:Object.values(H),onChange:t=>r({localeSeparator:t}),selected:s})},Ie=()=>{const{objectType:s,updatePageParams:r,view:t}=l(),i=x.useCallback(a=>{r({objectID:void 0,objectType:a,view:t===y.Details?y.CardList:t,searchString:void 0,page:1})},[r,t]);return e.jsx(p,{selectorLabel:"Entity",options:Object.values(d),onChange:i,selected:s,display:h.ButtonList,getOptionLabel:a=>ue(ae(a)),getOptionDescription:a=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:8},children:"Click here to change the kind of entity viewed."}),e.jsx(re,{objectType:a})]})})},Ae=()=>{const{preference:s,setPreference:r}=q();return e.jsx(p,{selectorLabel:"Page Brightness",selectorDescription:"Choose how bright the page should be. This parameter is stored on your device.",options:["light","dark","follow device"],onChange:t=>r(t),selected:s,getOptionLabel:V})},Ne=()=>{const{profile:s,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Preset",selectorDescription:"Indicate the profile best describing what you are looking for. This will change the presets.",options:Object.values(_),onChange:t=>r({profile:t}),selected:s})},We=()=>{const{view:s,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Display",getOptionDescription:t=>e.jsx("img",{src:ke(t),width:180}),options:Object.values(y),onChange:t=>r({view:t,objectID:void 0}),display:h.ButtonList,getOptionLabel:t=>[y.Map,y.Reports].includes(t)?e.jsxs(e.Fragment,{children:[t," ",e.jsx("em",{children:"β"})]}):t,selected:s})};function ke(s){switch(s){case y.CardList:return"/lang-nav/cardlist.png";case y.Details:return"/lang-nav/details.png";case y.Hierarchy:return"/lang-nav/hierarchy.png";case y.Map:return"/lang-nav/map.png";case y.Table:return"/lang-nav/table.png";case y.Reports:return"/lang-nav/reports.png"}}const _e=()=>{const[s,r]=L.useState(!0),[t,i]=L.useState(300),a=ie(()=>{});return Se(),e.jsx(Re,{isOpen:s,panelWidth:t,setPanelWidth:i,panelRef:a,children:e.jsxs(C,{display:h.Dropdown,children:[e.jsxs(w,{panelWidth:t,title:"Common Actions",optionsName:"common actions",children:[e.jsx("div",{}),e.jsx(K,{})]}),e.jsxs(w,{panelWidth:t,title:"Data",optionsName:"data options",children:[e.jsx(Ie,{}),e.jsx(oe,{display:h.ButtonList}),e.jsx(Ne,{})]}),e.jsxs(w,{panelWidth:t,title:"Filter",optionsName:"filters",children:[e.jsx(ve,{display:h.ButtonList}),e.jsx(Te,{display:h.ButtonList}),e.jsx(fe,{display:h.ButtonList}),e.jsx(xe,{}),e.jsx(we,{}),e.jsx(Le,{}),e.jsx(Pe,{}),e.jsx(Ce,{})]}),e.jsxs(w,{panelWidth:t,title:"View",optionsName:"view options",children:[e.jsx(We,{}),e.jsx(le,{}),e.jsx(Oe,{}),e.jsx(Be,{}),e.jsx(ce,{}),e.jsx(De,{}),e.jsx(ge,{}),e.jsx(Ee,{}),e.jsx(Ae,{})]}),e.jsx(Me,{isOpen:s,onClick:()=>r(n=>!n),panelWidth:t})]})})},Re=({children:s,isOpen:r,panelWidth:t,setPanelWidth:i,panelRef:a})=>e.jsxs("aside",{ref:a,style:{width:t,maxWidth:r?t:"0",overflowY:"scroll",overflowX:"hidden",borderRight:"2px solid var(--color-button-primary)",transition:"max-width 0.3s ease-in-out",position:"relative"},children:[r&&e.jsx(Ve,{panelWidth:t,onResize:i}),s]}),Me=({isOpen:s,onClick:r,panelWidth:t})=>e.jsx(M,{hoverContent:s?"Close side panel":"Open side panel to customize view",className:s?"selected primary":"primary",onClick:r,style:{borderRadius:"1em",padding:".5em",position:"fixed",top:"50%",left:s?t:"1.5em",transform:"translateX(-50%) translateY(-50%)",zIndex:1e3,transition:"left 0.3s ease-in-out"},"aria-label":s?"Close side panel":"Open side panel to customize view",children:e.jsx(me,{size:"1em",display:"block",style:{transform:s?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease-in-out"}})}),w=({children:s,panelWidth:r,title:t,optionsName:i})=>{const[a,n]=L.useState(!1),o=L.Children.toArray(s);return e.jsxs("div",{style:{borderTop:"0.125em solid var(--color-button-primary)",width:r,marginBottom:"0.5em"},children:[e.jsx("div",{style:{fontSize:"1.2em",fontWeight:"lighter",borderRadius:"0",width:"100%",textAlign:"left",backgroundColor:"var(--color-button-secondary)",padding:"0.5em"},children:t}),e.jsxs("div",{style:{display:"flex",padding:"0.25em 0.5em",gap:"0.5em",flexDirection:"column"},children:[o[0],a&&o.slice(1),e.jsx(M,{style:{padding:"0em 0.25em"},onClick:()=>n(g=>!g),children:a?`close extra ${i} ▲`:`see all ${i} ▶`})]})]})},Ve=({panelWidth:s,onResize:r})=>e.jsx("div",{style:{position:"absolute",top:0,right:0,width:"0.5em",height:"100%",cursor:"ew-resize",zIndex:10},onMouseDown:t=>{t.preventDefault();const i=t.clientX,a=s,n=g=>{const c=g.clientX-i;r(a+c)},o=()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",o)}});export{_e as default};
