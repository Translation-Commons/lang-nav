import{ak as I,G as B,j as s,a0 as O,a8 as b,K as j,N as G,al as k,am as v,an as w,W as N,r as f,O as c,ao as W,M as C,Y as E,P as _}from"./index-Dj24q9gt.js";import{S as K,T as z}from"./TextInput-9R2CGCvi.js";import{b as H,c as Q,a as R,g as U}from"./filterByConnections-lkAc_pOr.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Y=I("search",V),A=()=>{const{updatePageParams:r,searchBy:n}=B();return s.jsx(O,{selectorLabel:"Search by",options:Object.values(j),onChange:i=>r({searchBy:i}),selected:n,display:b.Dropdown,selectorStyle:{marginLeft:"1em",marginBottom:"0em"}})};function J(){const{searchBy:r,objectType:n}=B(),{censuses:i,territories:o,languagesInSelectedSource:l,locales:F,writingSystems:x,variantTags:L}=G(),g=k(),u=v(),y=w(),S=H(),m=Q(),h=R(),a=N(),T=f.useMemo(()=>{switch(n){case c.Language:return l;case c.Locale:return F;case c.Territory:return o;case c.WritingSystem:return x;case c.Census:return Object.values(i);case c.VariantTag:return L}},[i,l,F,o,L,x,n,r]),[p,M]=f.useMemo(()=>[e=>{let t=0;return m(e)||(t+=1),S(e)||(t+=2),h(e)||(t+=4),y(e)||(t+=8),u(e)||(t+=16),g(e)||(t+=32),t},e=>m(e)?S(e)?h(e)?y(e)?u(e)?g(e)?"matched":"not "+a.languageScope:"not "+a.modalityFilter:"not "+a.territoryScope:"not "+a.territoryFilter:"not "+a.writingSystemFilter:"not "+a.languageFilter],[m,S,h,y,u,g,a]);return f.useCallback(async d=>{const P=U(d,r);return(T||[]).filter(P).sort((e,t)=>p(e)-p(t)).slice(0,K).map(e=>{const t=s.jsx(C,{object:e,field:r,query:d,showOriginalName:!0}),D=W(e,r);return{objectID:e.ID,searchString:D,label:t,group:M(e)}})},[T,r,p,M])}const ee=()=>{const{searchString:r,updatePageParams:n}=B(),i=J(),o=l=>n({searchString:l});return s.jsx(E,{display:b.ButtonList,children:s.jsxs("form",{className:"selector",style:{display:"inline-flex",alignItems:"center",marginBottom:"0.5em"},children:[s.jsx(z,{label:s.jsx(Y,{size:"1em",display:"block",style:{padding:"0.5em"}}),inputStyle:{minWidth:"20em",border:"none"},getSuggestions:i,onSubmit:o,placeholder:"search",pageParameter:_.searchString,value:r}),s.jsx(A,{})]})})};export{ee as S};
