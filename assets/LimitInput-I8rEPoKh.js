import{r as c,j as e,k as b,V as m,P as w,n as I,C as D}from"./index-alS_j6S3.js";import{F as T,G as W,I as O,a as y,P as E,x,n as P,X as F,C as H,S as v,J as N,d as V,l as A}from"./BaseColorBar-Bk4m8ohF.js";import{e as K}from"./useDataContext-BOtc5One.js";const M=t=>{const s=c.useRef(null),[r,o]=c.useState(50);return c.useEffect(()=>{s.current&&o(s.current.offsetWidth+10)},[t]),{CalculateWidthFromHere:e.jsx("span",{ref:s,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:t||" "}),width:r}},z=({getSuggestions:t=async()=>[],inputStyle:s,label:r,onSubmit:o,pageParameter:a,placeholder:i,value:l})=>{const{CalculateWidthFromHere:h,width:B}=M(l),[u,S]=c.useState(l);c.useEffect(()=>{S(l)},[l,S]);const f=c.useRef(!1),[C,L]=c.useState([]),[j,d]=c.useState(!1),p=c.useCallback((n,g)=>{if(g!==2&&f.current)return;o(n);const G=setTimeout(()=>{d(!1),f.current=!1},100);return()=>clearTimeout(G)},[o,d]);c.useEffect(()=>{let n=!0;return(async()=>{const g=await t(u);n&&L(g.slice(0,10))})(),()=>{n=!1}},[t,u]);const k=c.useCallback(n=>{f.current=!1,d(!0),n.key==="Enter"?(n.preventDefault(),p(u,0)):n.key==="Escape"&&(S(l),d(!1))},[p,u,d,l]),R=c.useCallback(n=>{f.current=!0,p(n.searchString,2)},[p]);return e.jsxs("div",{style:{display:"flex",alignItems:"center",borderRadius:".75em",border:"0.125em solid var(--color-button-primary)"},children:[r,j&&C.length>0&&e.jsx(T,{children:C.map((n,g)=>e.jsx(J,{pageParameter:a,position:W(g,C.length),onClick:R,onKeyDown:()=>f.current=!0,suggestion:n},g))}),e.jsx("input",{type:"text","aria-expanded":j,"aria-controls":"suggestion-list",autoComplete:"off",className:u===""?"empty":"",id:a,onChange:n=>S(n.target.value),onBlur:()=>p(u,0),onFocus:()=>d(!0),onKeyDown:k,placeholder:i,role:"combobox",style:{borderRadius:"0.75em",borderWidth:0,padding:"0.5em",lineHeight:"1.5em",...s,width:B+5},value:u}),h,e.jsx(X,{onClear:()=>p("",1)})]})},J=({pageParameter:t,position:s=E.Standalone,onClick:r,onKeyDown:o,suggestion:a})=>{const{view:i}=b(),l=O(y.Dropdown,!1,s);return i==m.Details&&t===w.searchString?e.jsx(U,{suggestion:a,style:l}):e.jsx("button",{onMouseDown:o,onClick:()=>r(a),style:l,role:"option",type:"button",children:a.label})},U=({style:t,suggestion:s})=>{const{objectID:r,searchString:o,label:a}=s,{updatePageParams:i}=b(),l=()=>{i({objectID:r,view:m.Details,searchString:o})};return e.jsx(P,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",o]}),onClick:l,style:t,children:a})},X=({onClear:t})=>{const{display:s}=x();return e.jsx(P,{buttonType:"button",hoverContent:"Clear the input",onClick:t,style:{...s===y.ButtonList?{borderRadius:"0.5em",border:"none"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},marginLeft:"0em",padding:"0.5em"},children:e.jsx(F,{size:"1em",display:"block"})})},_=()=>{const{colorBy:t,updatePageParams:s,objectType:r,view:o}=b(),{display:a}=x(),i=H(r),l=["None",...Object.values(I).filter(h=>i.includes(h))];return o!==m.Map&&o!==m.CardList?null:e.jsx(v,{selectorLabel:a===y.Dropdown?"Color By":void 0,selectorDescription:"Choose the color coding for items in the view.",options:l,onChange:h=>s({colorBy:h}),selected:t})},$=()=>{const{colorBy:t,colorGradient:s,updatePageParams:r,view:o}=b(),{display:a}=x();return t=="None"||o!==m.Map&&o!==m.CardList?null:e.jsx(v,{selectorLabel:a===y.Dropdown?"Color gradient":void 0,selectorDescription:"Choose the range of colors used to represent values.",options:Object.values(D).filter(i=>typeof i=="number"),onChange:i=>r({colorGradient:i}),selected:s,getOptionLabel:i=>e.jsx("div",{style:{minWidth:"4em",height:"16px",display:"inline-block"},children:e.jsx(N,{colorGradient:i})}),getOptionDescription:q})};function q(t){var r;const s=((r=Object.entries(D).find(([,o])=>o===t))==null?void 0:r[0])||"";return K(s)}const ee=()=>{const{limit:t,updatePageParams:s}=b();return e.jsx(V,{display:y.ButtonList,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center"},children:[e.jsx(A,{description:"Limit how many results are shown.",label:"Item Limit"}),e.jsx(z,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"},{searchString:"1000",label:"1000"},{searchString:"-1",label:"∞"},{searchString:"",label:"default"}],onSubmit:r=>s({limit:parseInt(r)}),pageParameter:w.limit,placeholder:"∞",value:t.toString()})]})})};export{_ as C,ee as L,z as T,$ as a};
