import{r as a,j as e,V as d,P as C,m as D,C as j}from"./index-CkmjabWr.js";import{A as b,B as L,C as T,a as m,E as G,P as I,z as x,X as R,t as F,S as w,F as O,l as W}from"./BaseColorBar-AjcF8Hbs.js";import{d as g,f as E}from"./useDataContext-BnHiovct.js";const k=t=>{const s=a.useRef(null),[n,o]=a.useState(50);return a.useEffect(()=>{s.current&&o(s.current.offsetWidth+10)},[t]),{CalculateWidthFromHere:e.jsx("span",{ref:s,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:t||" "}),width:n}},H=({getSuggestions:t=()=>[],inputStyle:s,onChange:n,pageParameter:o,placeholder:i,value:r})=>{const{CalculateWidthFromHere:c,width:p}=k(r),{display:v}=b(),[u,h]=a.useState(r);a.useEffect(()=>{h(r)},[r,h]),a.useEffect(()=>{const l=setTimeout(()=>n(u),300);return()=>clearTimeout(l)},[u]);const[S,B]=a.useState([]),[P,f]=a.useState(!1);return a.useEffect(()=>{let l=!0;return(async()=>{const y=await t(u);l&&B(y.slice(0,10))})(),()=>{l=!1}},[t,u]),e.jsxs(e.Fragment,{children:[P&&S.length>0&&e.jsx(L,{children:S.map((l,y)=>e.jsx(A,{pageParameter:o,position:T(y,S.length),setImmediateValue:h,suggestion:l},y))}),e.jsx("input",{type:"text",id:o,className:u===""?"empty":"",value:u,autoComplete:"off",onChange:l=>{h(l.target.value),f(!0)},onBlur:()=>setTimeout(()=>f(!1),500),onFocus:()=>f(!0),placeholder:i,style:{borderRadius:v===m.ButtonList?"0.5em":void 0,padding:"0.5em",lineHeight:"1.5em",...s,width:p+5}}),c,e.jsx(V,{onClick:()=>{h(""),f(!1)}})]})},A=({pageParameter:t,position:s=I.Standalone,setImmediateValue:n,suggestion:o})=>{const{view:i}=g(),r=G(m.Dropdown,!1,s);if(i==d.Details&&t===C.searchString)return e.jsx(N,{suggestion:o,style:r});const c=()=>{n(o.searchString)};return e.jsx("button",{onClick:c,style:r,role:"option",type:"button",children:o.label})},N=({style:t,suggestion:s})=>{const{objectID:n,searchString:o,label:i}=s,{updatePageParams:r}=g(),c=()=>{r({objectID:n,view:d.Details,searchString:o})};return e.jsx(x,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",o]}),onClick:c,style:t,children:i})},V=({onClick:t})=>{const{display:s}=b();return e.jsx(x,{buttonType:"reset",hoverContent:"Clear the input",onClick:t,style:{...s===m.ButtonList?{borderRadius:"0.5em",border:"none"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},padding:"0.5em"},children:e.jsx(R,{size:"1em",display:"block"})})},q=()=>{const{colorBy:t,updatePageParams:s,objectType:n,view:o}=g(),{display:i}=b(),r=F(n),c=["None",...Object.values(D).filter(p=>r.includes(p))];return o!==d.Map&&o!==d.CardList?null:e.jsx(w,{selectorLabel:i===m.Dropdown?"Color By":void 0,selectorDescription:"Choose the color coding for items in the view.",options:c,onChange:p=>s({colorBy:p}),selected:t})},J=()=>{const{colorBy:t,colorGradient:s,updatePageParams:n,view:o}=g(),{display:i}=b();return t=="None"||o!==d.Map&&o!==d.CardList?null:e.jsx(w,{selectorLabel:i===m.Dropdown?"Color gradient":void 0,selectorDescription:"Choose the range of colors used to represent values.",options:Object.values(j).filter(r=>typeof r=="number"),onChange:r=>n({colorGradient:r}),selected:s,getOptionLabel:r=>e.jsx("div",{style:{minWidth:"4em",height:"16px",display:"inline-block"},children:e.jsx(O,{colorGradient:r})}),getOptionDescription:z})};function z(t){var n;const s=((n=Object.entries(j).find(([,o])=>o===t))==null?void 0:n[0])||"";return E(s)}const Q=()=>{const{limit:t,updatePageParams:s}=g();return e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center"},children:[e.jsx(W,{description:"Limit how many results are shown.",label:"Item Limit"}),e.jsx(H,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"},{searchString:"1000",label:"1000"},{searchString:"-1",label:"∞"},{searchString:"",label:"default"}],onChange:n=>s({limit:parseInt(n)}),pageParameter:C.limit,placeholder:"∞",value:t.toString()})]})};export{q as C,Q as L,H as T,J as a};
