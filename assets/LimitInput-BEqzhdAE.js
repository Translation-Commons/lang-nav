import{r as c,j as e,R as W,k as S,V as f,P as D,n as E,C as L}from"./index-B68VRU0p.js";import{C,M as P,P as g,N as F,a as x,Q as M,r as v,X as H,R as N,S as B,U as K,j as V,q as A}from"./BaseColorBar-DPgoty7V.js";import{e as U}from"./useDataContext-BuubdNxx.js";const z=t=>{const s=c.useRef(null),[r,o]=c.useState(50);return c.useEffect(()=>{s.current&&o(s.current.offsetWidth+10)},[t]),{CalculateWidthFromHere:e.jsx("span",{ref:s,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:t||" "}),width:r}},k=({children:t,disabled:s=!1,position:r=g.Middle})=>{const{display:o}=C();return e.jsx("button",{className:"secondaryHoverableText",disabled:s,style:{...P(o,!1,r),lineHeight:"0.5em"},type:"button",children:e.jsx("div",{style:{fontSize:"0.75em"},children:t})})},q=10,Q=({onClickSuggestion:t,onKeyDownSuggestion:s,pageParameter:r,showSuggestions:o,suggestions:n,topLabel:i})=>{function a(u){const d=M(u,n.length);return i?d===g.Only?g.Last:d===g.Last?g.Last:g.Middle:d}return e.jsxs(F,{isOpen:o&&n.length>0,children:[i,n.map((u,d)=>e.jsxs(W.Fragment,{children:[d>0&&n[d-1].group!==u.group&&e.jsx(k,{disabled:!0,position:g.Middle,children:u.group}),e.jsx(X,{pageParameter:r,position:a(d),onClick:t,onKeyDown:s,suggestion:u})]},d))]})},X=({pageParameter:t,position:s=g.Standalone,onClick:r,onKeyDown:o,suggestion:n})=>{const{view:i}=S(),a=P(x.Dropdown,!1,s);return i===f.Details&&t===D.searchString?e.jsx(_,{suggestion:n,style:a}):e.jsx("button",{onMouseDown:o,onClick:()=>r(n),style:a,role:"option",type:"button",children:n.label})},_=({style:t,suggestion:s})=>{const{objectID:r,searchString:o,label:n}=s,{updatePageParams:i}=S(),a=()=>{i({objectID:r,view:f.Details,searchString:o})};return e.jsx(v,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",o]}),onClick:a,style:t,children:n})},$=({getSuggestions:t=async()=>[],inputStyle:s,label:r,onSubmit:o,pageParameter:n,placeholder:i,value:a})=>{const{CalculateWidthFromHere:u,width:d}=z(a),[p,y]=c.useState(a);c.useEffect(()=>{y(a)},[a,y]);const b=c.useRef(!1),[R,I]=c.useState([]),[w,h]=c.useState(!1),m=c.useCallback((l,j)=>{if(j!==2&&b.current)return;o(l);const O=setTimeout(()=>{h(!1),y(l),b.current=!1},100);return()=>clearTimeout(O)},[o,h]);c.useEffect(()=>{let l=!0;return(async()=>{const j=await t(p);l&&I(j.slice(0,q))})(),()=>{l=!1}},[t,p]);const T=c.useCallback(l=>{b.current=!1,h(!0),l.key==="Enter"?(l.preventDefault(),m(p,0)):l.key==="Escape"&&(y(a),h(!1))},[m,p,h,a]),G=c.useCallback(l=>{b.current=!0,m(l.searchString,2)},[m]);return e.jsxs("div",{style:{display:"flex",alignItems:"center",borderRadius:".75em",border:"0.125em solid var(--color-button-primary)"},children:[r,e.jsx(Q,{pageParameter:n,showSuggestions:w,suggestions:R,onClickSuggestion:G,onKeyDownSuggestion:()=>b.current=!0,topLabel:e.jsxs(k,{position:g.First,children:["Pick a suggestion",p!==""?` or press [enter] to filter by "${p}"`:" or type to filter"]})}),e.jsx("input",{type:"text","aria-expanded":w,"aria-controls":"suggestion-list",autoComplete:"off",className:p===""?"empty":"",id:n,onChange:l=>y(l.target.value),onBlur:()=>m(p,0),onFocus:()=>h(!0),onKeyDown:T,placeholder:i,role:"combobox",style:{borderRadius:"0.75em",borderWidth:0,padding:"0.5em",lineHeight:"1.5em",...s,width:d+5},value:p}),u,e.jsx(J,{onClear:()=>m("",1)})]})},J=({onClear:t})=>{const{display:s}=C();return e.jsx(v,{buttonType:"button",hoverContent:"Clear the input",onClick:t,style:{...s===x.ButtonList?{borderRadius:"0.5em",border:"none"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},marginLeft:"0em",padding:"0.5em"},children:e.jsx(H,{size:"1em",display:"block"})})},se=()=>{const{colorBy:t,updatePageParams:s,objectType:r,view:o}=S(),{display:n}=C(),i=N(r),a=["None",...Object.values(E).filter(u=>i.includes(u))];return o!==f.Map&&o!==f.CardList?null:e.jsx(B,{selectorLabel:n===x.Dropdown?"Color By":void 0,selectorDescription:"Choose the color coding for items in the view.",options:a,onChange:u=>s({colorBy:u}),selected:t})},oe=()=>{const{colorBy:t,colorGradient:s,updatePageParams:r,view:o}=S(),{display:n}=C();return t=="None"||o!==f.Map&&o!==f.CardList?null:e.jsx(B,{selectorLabel:n===x.Dropdown?"Color gradient":void 0,selectorDescription:"Choose the range of colors used to represent values.",options:Object.values(L).filter(i=>typeof i=="number"),onChange:i=>r({colorGradient:i}),selected:s,getOptionLabel:i=>e.jsx("div",{style:{minWidth:"4em",height:"16px",display:"inline-block"},children:e.jsx(K,{colorGradient:i})}),getOptionDescription:Y})};function Y(t){var r;const s=((r=Object.entries(L).find(([,o])=>o===t))==null?void 0:r[0])||"";return U(s)}const re=()=>{const{limit:t,updatePageParams:s}=S();return e.jsx(V,{display:x.ButtonList,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center"},children:[e.jsx(A,{description:"Limit how many results are shown.",label:"Item Limit"}),e.jsx($,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"},{searchString:"1000",label:"1000"},{searchString:"-1",label:"∞"},{searchString:"",label:"default"}],onSubmit:r=>s({limit:parseInt(r)}),pageParameter:D.limit,placeholder:"∞",value:t.toString()})]})})};export{se as C,re as L,q as S,$ as T,oe as a};
