import{F as n,r as j,J as I,j as e,K as G,M as T,N as D,Q as S,T as A,U as M,W as w,X as P,Y as O,P as C,O as u,Z as R,$ as c,a0 as z,d as H,a1 as K,y as Q,a2 as U,a3 as $,a4 as q,L as X,a5 as Y,a6 as _,c as J,a7 as Z,a8 as ee,V as te,a9 as N,aa as y,ab as d,S as x,h as se,D as re,ac as ae,ad as ie,ae as oe,af as ne,ag as le,ah as ce,ai as pe,R as W,aj as ge}from"./index-Dimu78xM.js";import{L as ue,C as de,a as ye}from"./ColorGradientSelector-ZZDbiApd.js";import{S as he,T as E}from"./TextInput-B1NwWmEU.js";import{g as me,a as Se,b as be}from"./filterByConnections-C3MKsUyg.js";import{g as je,a as V,L as fe}from"./BaseColorBar-BbIg-a6E.js";const xe=()=>{const{page:t,updatePageParams:r}=n();j.useEffect(()=>{const s=a=>{const i=a.target;i!==null&&i instanceof HTMLElement&&(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.isContentEditable)||(a.key==="ArrowRight"?r({page:t+1}):a.key==="ArrowLeft"&&t>1&&r({page:t-1}))};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[t,r])};function B(t,r,s){return async a=>{const i=a.split("[")[0].trim(),o=me(i,I.CodeOrNameAny);return t.filter(o).sort((l,g)=>r(l)-r(g)).slice(0,he).map(l=>{const g=e.jsx(G,{object:l,field:I.CodeOrNameAny,query:i,showOriginalName:!0}),p=l.nameDisplay+" ["+l.ID+"]";return{objectID:l.ID,searchString:p,label:g,group:s(l)}})}}const Le=({display:t})=>{const{languageFilter:r,updatePageParams:s}=n(),{languagesInSelectedSource:a}=T(),i=D(S.Population),o=A(),l=Se(),g=be(),p=M(),{display:F}=w(),b=t??F,v=j.useMemo(()=>{const h=m=>{let f=0;return g(m)||(f+=1),l(m)||(f+=2),o(m)||(f+=4),f},k=m=>g(m)?l(m)?o(m)?"matched":"not "+p.languageScope:"not "+p.territoryFilter:"not "+p.writingSystemFilter;return B(a.sort(i),h,k)},[a,o,l,g,p,i]);return e.jsx(P,{display:b,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(O,{label:"Language",description:e.jsxs(e.Fragment,{children:['Filter results to those relevant to a specific language, language family, or dialect. You can enter either the language name or its code. For example, entering "Spanish" or ',e.jsx("code",{children:"spa"})," will filter to objects relevant to Spanish."," ",e.jsx(we,{})]})}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(E,{inputStyle:{minWidth:"8em"},getSuggestions:v,onSubmit:h=>s({languageFilter:h}),pageParameter:C.languageFilter,placeholder:"Name or code",value:r})})]})})},we=()=>{const{objectType:t}=n();switch(t){case u.Language:return e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Language view only:"})," Selecting a language family will show the languages in the family. Dialects will also appear if they are enabled."]});case u.Territory:return e.jsx(e.Fragment,{children:"This will filter territories to ones where the selected language is used."});case u.WritingSystem:return e.jsx(e.Fragment,{children:"This will filter writing systems to ones used for the selected language."});case u.VariantTag:return e.jsx(e.Fragment,{children:"This will filter variant tags for ones that are intended for this language."});case u.Locale:return e.jsx(e.Fragment,{children:"This will filter locales with the selected language."});case u.Census:return e.jsxs(e.Fragment,{children:[e.jsx(R,{size:"1em",style:{color:"var(--color-text-yellow)"}})," Censuses are not currently supported by this filter."]})}},Pe=()=>{const{modalityFilter:t,updatePageParams:r}=n();return e.jsx(c,{selectorLabel:"Modality",labelWhenEmpty:"Any",selectorDescription:"Filter by how the language is primarily used: written, spoken, sign, or a combination.",options:Object.values(H).filter(a=>typeof a=="number"),onChange:a=>t.includes(a)?r({modalityFilter:t.filter(i=>i!==a)}):r({modalityFilter:[...t,a]}),selected:t,getOptionLabel:z})},Fe=()=>{const{languageScopes:t,updatePageParams:r}=n();return e.jsx(c,{selectorLabel:"Languoid Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of language-type objects are shown, such as families, macrolanguages, languages, dialects, and special codes.",options:Object.values(Q).filter(a=>typeof a=="number"),onChange:a=>t.includes(a)?r({languageScopes:t.filter(i=>i!=a)}):r({languageScopes:[...t,a]}),selected:t,getOptionLabel:K})},ve=({display:t})=>{const{territoryFilter:r,updatePageParams:s}=n(),{territories:a}=T(),i=A(),o=M(),l=D(S.Population),{display:g}=w(),p=t??g,F=j.useMemo(()=>{const b=h=>i(h)?0:1,v=h=>i(h)?"matched":"not "+o.territoryScope;return B(a.sort(l),b,v)},[a,i,o,l]);return e.jsx(P,{display:p,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(O,{label:"In Territory",description:"Filter results by ones relevant in a territory."}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(E,{inputStyle:{minWidth:"8em"},getSuggestions:F,onSubmit:b=>s({territoryFilter:b}),pageParameter:C.territoryFilter,placeholder:"Name or code",value:r})})]})})},Te=()=>{const{territoryScopes:t,updatePageParams:r,objectType:s}=n();return[u.Territory,u.Locale,u.Census].includes(s)?e.jsx(c,{selectorLabel:"Territory Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of territories are shown, such as countries, regions, and dependencies.",options:Object.values($).filter(i=>typeof i=="number"),onChange:i=>t.includes(i)?r({territoryScopes:t.filter(o=>o!=i)}):r({territoryScopes:[...t,i]}),selected:t,getOptionLabel:U}):null},De=()=>{const{isoStatus:t,updatePageParams:r}=n();return e.jsx(c,{selectorLabel:"ISO Language Status",selectorDescription:"Filter languages by their ISO status (Living, Extinct, etc.)",labelWhenEmpty:"Any",options:Object.values(X).filter(s=>typeof s=="number"),onChange:s=>t.includes(s)?r({isoStatus:t.filter(a=>a!==s)}):r({isoStatus:[...t,s]}),selected:t,getOptionLabel:q})},Oe=()=>{const{vitalityEthFine:t,updatePageParams:r}=n();return e.jsx(c,{selectorLabel:"Vitality Eth (Fine)",selectorDescription:"Filter languages by their Extended Graded Intergenerational Disruption Scale (EGIDS) vitality classification sourced from Ethnologue in 2012",labelWhenEmpty:"Any",options:Object.values(J).filter(s=>typeof s=="number"),onChange:s=>t.includes(s)?r({vitalityEthFine:t.filter(a=>a!==s)}):r({vitalityEthFine:[...t,s]}),selected:t,getOptionLabel:_,getOptionDescription:Y})},Ce=()=>{const{vitalityEthCoarse:t,updatePageParams:r}=n();return e.jsx(c,{selectorLabel:"Vitality Eth (Coarse)",selectorDescription:"Filter languages by their Ethnologue 2025 vitality classification, a coarser scale than the 2012 EGIDS",labelWhenEmpty:"Any",options:Object.values(te).filter(s=>typeof s=="number"),onChange:s=>t.includes(s)?r({vitalityEthCoarse:t.filter(a=>a!==s)}):r({vitalityEthCoarse:[...t,s]}),selected:t,getOptionLabel:ee,getOptionDescription:Z})},Ee=({display:t})=>{const{writingSystemFilter:r,updatePageParams:s}=n(),{writingSystems:a}=T(),i=D(S.Population),{display:o}=w(),l=t??o,g=j.useMemo(()=>B(a.sort(i),p=>p.scope===N.IndividualScript?0:1,p=>p.scope===N.IndividualScript?"":"other types of scripts"),[a,i]);return e.jsx(P,{display:l,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(O,{label:"Written in",description:"Filter results by ones written in this script."}),e.jsx(E,{inputStyle:{minWidth:"8em"},getSuggestions:g,onSubmit:p=>s({writingSystemFilter:p}),pageParameter:C.writingSystemFilter,placeholder:"Name or code",value:r})]})})},Be=()=>{const{scaleBy:t,updatePageParams:r,objectType:s,view:a}=n(),{display:i}=w();return a!==y.Map?null:e.jsx(c,{selectorLabel:i===d.Dropdown?"Scale By":void 0,selectorDescription:"Choose a field to scale items by (map circles).",options:je(s),onChange:o=>r({scaleBy:o}),selected:t})},Ie=()=>{const{secondarySortBy:t,updatePageParams:r,objectType:s}=n(),a=V(s),i=[S.None,...a];return e.jsx(c,{selectorLabel:"Secondary Sort By",selectorDescription:"Tie-breaker when the primary sort is equal.",options:i,onChange:o=>r({secondarySortBy:o}),selected:t??S.None,display:d.Dropdown})},Ne=()=>{const{sortBy:t,updatePageParams:r,objectType:s}=n(),a=V(s);return e.jsx(c,{selectorLabel:"Sort By",selectorDescription:"Choose the order of items in the view.",options:Object.values(S).filter(i=>a.includes(i)),onChange:i=>r({sortBy:i}),selected:t,display:d.Dropdown})},We=()=>{const{sortBehavior:t,updatePageParams:r}=n();return e.jsx(c,{selectorLabel:"Sort Direction",options:[x.Normal,x.Reverse],getOptionLabel:s=>x[s],getOptionDescription:s=>s===x.Normal?"Sort with high numbers first / first letter in alphabet first.":"Sort with low numbers first / last letter in alphabet first.",onChange:s=>r({sortBehavior:s}),selected:t})},Ae=()=>{const{localeSeparator:t,updatePageParams:r}=n();return e.jsx(c,{selectorLabel:"Locale Separator",selectorDescription:"Choose the separator in locale codes, eg. 'ar-EG' or 'ar_EG'",options:Object.values(se),onChange:s=>r({localeSeparator:s}),selected:t})},Me=()=>{const{objectType:t,updatePageParams:r}=n(),s=j.useCallback(a=>{r({objectType:a})},[r]);return e.jsx(c,{selectorLabel:"Entity",options:Object.values(u),onChange:s,selected:t,display:d.ButtonList,getOptionLabel:a=>re(ie(a)),getOptionDescription:a=>e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:8},children:"Click here to change the kind of entity viewed."}),e.jsx(ae,{objectType:a})]})})},Ve=()=>{const{preference:t,setPreference:r}=oe();return e.jsx(c,{selectorLabel:"Page Brightness",selectorDescription:"Choose how bright the page should be. This parameter is stored on your device.",options:["light","dark","follow device"],onChange:s=>r(s),selected:t,getOptionLabel:ne})},ke=()=>{const{profile:t,updatePageParams:r}=n();return e.jsx(c,{selectorLabel:"Preset",selectorDescription:"Indicate the profile best describing what you are looking for. This will change the presets.",options:Object.values(le),onChange:s=>r({profile:s}),selected:t})},Ge=()=>{const{view:t,updatePageParams:r}=n();return e.jsx(c,{selectorLabel:"Display",getOptionDescription:s=>e.jsx("img",{src:Re(s),width:180}),options:Object.values(y),onChange:s=>r({view:s}),display:d.ButtonList,getOptionLabel:s=>[y.Map,y.Reports].includes(s)?e.jsxs(e.Fragment,{children:[s," ",e.jsx("em",{children:"β"})]}):s,selected:t})};function Re(t){switch(t){case y.CardList:return"/lang-nav/cardlist.png";case y.Hierarchy:return"/lang-nav/hierarchy.png";case y.Map:return"/lang-nav/map.png";case y.Table:return"/lang-nav/table.png";case y.Reports:return"/lang-nav/reports.png"}}const $e=()=>(xe(),e.jsx(ce,{defaultWidth:300,purpose:"filters",title:"Options",children:e.jsxs(P,{display:d.Dropdown,children:[e.jsxs(L,{title:"Common Actions",optionsName:"common actions",children:[e.jsx("div",{}),e.jsx(pe,{})]}),e.jsxs(L,{title:"Data",optionsName:"data options",children:[e.jsx(Me,{}),e.jsx(fe,{display:d.ButtonList}),e.jsx(ke,{})]}),e.jsxs(L,{title:"Filter",optionsName:"filters",children:[e.jsx(ve,{display:d.ButtonList}),e.jsx(Ee,{display:d.ButtonList}),e.jsx(Le,{display:d.ButtonList}),e.jsx(Fe,{}),e.jsx(Pe,{}),e.jsx(Te,{}),e.jsx(De,{}),e.jsx(Oe,{}),e.jsx(Ce,{})]}),e.jsxs(L,{title:"View",optionsName:"view options",children:[e.jsx(Ge,{}),e.jsx(ue,{}),e.jsx(Ne,{}),e.jsx(Ie,{}),e.jsx(We,{}),e.jsx(de,{}),e.jsx(Be,{}),e.jsx(ye,{}),e.jsx(Ae,{}),e.jsx(Ve,{})]})]})})),L=({children:t,title:r,optionsName:s})=>{const[a,i]=W.useState(!1),o=W.Children.toArray(t);return e.jsxs("div",{style:{borderTop:"0.125em solid var(--color-button-primary)",width:"100%",marginBottom:"0.5em"},children:[e.jsx("div",{style:{fontSize:"1.2em",fontWeight:"lighter",borderRadius:"0",width:"100%",textAlign:"left",backgroundColor:"var(--color-button-secondary)",padding:"0.5em"},children:r}),e.jsxs("div",{style:{display:"flex",padding:"0.25em 0.5em",gap:"0.5em",flexDirection:"column"},children:[o[0],a&&o.slice(1),e.jsx(ge,{style:{padding:"0em 0.25em"},onClick:()=>i(l=>!l),children:a?`close extra ${s} ▲`:`see all ${s} ▶`})]})]})};export{$e as default};
