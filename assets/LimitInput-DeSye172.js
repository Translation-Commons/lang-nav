import{r as a,j as e,k as g,V as d,P as C,n as D,C as j}from"./index-TNqF_S3z.js";import{x as b,F as L,G,a as p,I,P as T,n as x,X as R,C as F,S as w,J as O,d as W,l as k}from"./BaseColorBar-C76FJPSL.js";import{e as E}from"./useDataContext-CdrZaZI_.js";const H=t=>{const s=a.useRef(null),[n,o]=a.useState(50);return a.useEffect(()=>{s.current&&o(s.current.offsetWidth+10)},[t]),{CalculateWidthFromHere:e.jsx("span",{ref:s,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:t||" "}),width:n}},N=({getSuggestions:t=()=>[],inputStyle:s,onChange:n,pageParameter:o,placeholder:i,value:r})=>{const{CalculateWidthFromHere:c,width:h}=H(r),{display:v}=b(),[u,m]=a.useState(r);a.useEffect(()=>{m(r)},[r,m]),a.useEffect(()=>{const l=setTimeout(()=>n(u),300);return()=>clearTimeout(l)},[u]);const[S,B]=a.useState([]),[P,f]=a.useState(!1);return a.useEffect(()=>{let l=!0;return(async()=>{const y=await t(u);l&&B(y.slice(0,10))})(),()=>{l=!1}},[t,u]),e.jsxs(e.Fragment,{children:[P&&S.length>0&&e.jsx(L,{children:S.map((l,y)=>e.jsx(V,{pageParameter:o,position:G(y,S.length),setImmediateValue:m,suggestion:l},y))}),e.jsx("input",{type:"text",id:o,className:u===""?"empty":"",value:u,autoComplete:"off",onChange:l=>{m(l.target.value),f(!0)},onBlur:()=>setTimeout(()=>f(!1),500),onFocus:()=>f(!0),placeholder:i,style:{borderRadius:v===p.ButtonList?"0.5em":void 0,padding:"0.5em",lineHeight:"1.5em",...s,width:h+5}}),c,e.jsx(M,{onClick:()=>{m(""),f(!1)}})]})},V=({pageParameter:t,position:s=T.Standalone,setImmediateValue:n,suggestion:o})=>{const{view:i}=g(),r=I(p.Dropdown,!1,s);if(i==d.Details&&t===C.searchString)return e.jsx(A,{suggestion:o,style:r});const c=()=>{n(o.searchString)};return e.jsx("button",{onClick:c,style:r,role:"option",type:"button",children:o.label})},A=({style:t,suggestion:s})=>{const{objectID:n,searchString:o,label:i}=s,{updatePageParams:r}=g(),c=()=>{r({objectID:n,view:d.Details,searchString:o})};return e.jsx(x,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",o]}),onClick:c,style:t,children:i})},M=({onClick:t})=>{const{display:s}=b();return e.jsx(x,{buttonType:"reset",hoverContent:"Clear the input",onClick:t,style:{...s===p.ButtonList?{borderRadius:"0.5em",border:"none"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},padding:"0.5em"},children:e.jsx(R,{size:"1em",display:"block"})})},q=()=>{const{colorBy:t,updatePageParams:s,objectType:n,view:o}=g(),{display:i}=b(),r=F(n),c=["None",...Object.values(D).filter(h=>r.includes(h))];return o!==d.Map&&o!==d.CardList?null:e.jsx(w,{selectorLabel:i===p.Dropdown?"Color By":void 0,selectorDescription:"Choose the color coding for items in the view.",options:c,onChange:h=>s({colorBy:h}),selected:t})},Q=()=>{const{colorBy:t,colorGradient:s,updatePageParams:n,view:o}=g(),{display:i}=b();return t=="None"||o!==d.Map&&o!==d.CardList?null:e.jsx(w,{selectorLabel:i===p.Dropdown?"Color gradient":void 0,selectorDescription:"Choose the range of colors used to represent values.",options:Object.values(j).filter(r=>typeof r=="number"),onChange:r=>n({colorGradient:r}),selected:s,getOptionLabel:r=>e.jsx("div",{style:{minWidth:"4em",height:"16px",display:"inline-block"},children:e.jsx(O,{colorGradient:r})}),getOptionDescription:z})};function z(t){var n;const s=((n=Object.entries(j).find(([,o])=>o===t))==null?void 0:n[0])||"";return E(s)}const U=()=>{const{limit:t,updatePageParams:s}=g();return e.jsx(W,{display:p.ButtonList,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center"},children:[e.jsx(k,{description:"Limit how many results are shown.",label:"Item Limit"}),e.jsx(N,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"},{searchString:"1000",label:"1000"},{searchString:"-1",label:"∞"},{searchString:"",label:"default"}],onChange:n=>s({limit:parseInt(n)}),pageParameter:C.limit,placeholder:"∞",value:t.toString()})]})})};export{q as C,U as L,N as T,Q as a};
