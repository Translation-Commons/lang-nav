import{r as i,j as e,$ as S,ah as j,ai as p,aj as E,U as I,F as C,P as L,ak as H,A as W,ag as w,al as M}from"./index-ByaRy_0r.js";const O=t=>{const s=i.useRef(null),[a,o]=i.useState(50);return i.useEffect(()=>{s.current&&o(s.current.offsetWidth+10)},[t]),{CalculateWidthFromHere:e.jsx("span",{ref:s,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:t||" "}),width:a}},D=({children:t,disabled:s=!1,position:a=p.Middle})=>{const{display:o}=S();return e.jsx("button",{className:"secondaryHoverableText",disabled:s,style:{...j(o,!1,a),lineHeight:"0.5em"},type:"button",children:e.jsx("div",{style:{fontSize:"0.75em"},children:t})})},B=10,G=({onClickSuggestion:t,onKeyDownSuggestion:s,pageParameter:a,showSuggestions:o,suggestions:n,topLabel:u})=>{function l(f){const c=H(f,n.length);return u?c===p.Only?p.Last:c===p.Last?p.Last:p.Middle:c}return e.jsxs(E,{isOpen:o&&n.length>0,children:[u,n.map((f,c)=>e.jsxs(I.Fragment,{children:[c>0&&n[c-1].group!==f.group&&e.jsx(D,{disabled:!0,position:p.Middle,children:f.group}),e.jsx(K,{pageParameter:a,position:l(c),onClick:t,onKeyDown:s,suggestion:f})]},c))]})},K=({pageParameter:t,position:s=p.Standalone,onClick:a,onKeyDown:o,suggestion:n})=>{const u=j(C.Dropdown,!1,s);return t===L.searchString?e.jsx(v,{suggestion:n,style:u}):e.jsx("button",{onMouseDown:o,onClick:()=>a(n),style:u,role:"option",type:"button",children:n.label})},v=({style:t,suggestion:s})=>{const{objectID:a,searchString:o,label:n}=s,{updatePageParams:u}=W(),l=()=>{u({objectID:a,searchString:o})};return e.jsx(w,{hoverContent:e.jsxs(e.Fragment,{children:["Open the details pane for ",o]}),onClick:l,style:t,children:n})},U=({getSuggestions:t=async()=>[],inputStyle:s,label:a,onSubmit:o,pageParameter:n,placeholder:u,value:l})=>{const{CalculateWidthFromHere:f,width:c}=O(l),[d,m]=i.useState(l);i.useEffect(()=>{m(l)},[l,m]);const y=i.useRef(!1),[k,R]=i.useState([]),[x,g]=i.useState(!1),h=i.useCallback((r,b)=>{if(b!==2&&y.current)return;o(r);const T=setTimeout(()=>{g(!1),m(r),y.current=!1},100);return()=>clearTimeout(T)},[o,g]);i.useEffect(()=>{let r=!0;return(async()=>{const b=await t(d);r&&R(b.slice(0,B))})(),()=>{r=!1}},[t,d]);const P=i.useCallback(r=>{y.current=!1,g(!0),r.key==="Enter"?(r.preventDefault(),h(d,0)):r.key==="Escape"&&(m(l),g(!1))},[h,d,g,l]),F=i.useCallback(r=>{y.current=!0,h(r.searchString,2)},[h]);return e.jsxs("div",{style:{display:"flex",alignItems:"center",borderRadius:".75em",border:"0.125em solid var(--color-button-primary)"},children:[a,e.jsx(G,{pageParameter:n,showSuggestions:x,suggestions:k,onClickSuggestion:F,onKeyDownSuggestion:()=>y.current=!0,topLabel:e.jsxs(D,{position:p.First,children:["Pick a suggestion",d!==""?` or press [enter] to filter by "${d}"`:" or type to filter"]})}),e.jsx("input",{type:"text","aria-expanded":x,"aria-controls":"suggestion-list",autoComplete:"off",className:d===""?"empty":"",id:n,onChange:r=>m(r.target.value),onBlur:()=>h(d,0),onFocus:()=>g(!0),onKeyDown:P,placeholder:u,role:"combobox",style:{borderRadius:"0.75em",borderWidth:0,padding:"0.5em",lineHeight:"1.5em",...s,width:c+5},value:d}),f,e.jsx(A,{onClear:()=>h("",1)})]})},A=({onClear:t})=>{const{display:s}=S();return e.jsx(w,{buttonType:"button",hoverContent:"Clear the input",onClick:t,style:{...s===C.ButtonList?{borderRadius:"0.5em",border:"none"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},marginLeft:"0em",padding:"0.5em"},children:e.jsx(M,{size:"1em",display:"block"})})};export{B as S,U as T};
