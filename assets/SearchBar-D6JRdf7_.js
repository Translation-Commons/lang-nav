import{an as I,F as B,j as s,$ as O,ab as b,J as j,M as v,ao as w,ap as G,aq as k,U as C,r as f,O as c,ar as N,K as W,X as E,P as _}from"./index-Dimu78xM.js";import{S as K,T as U}from"./TextInput-B1NwWmEU.js";import{b as z,c as H,a as J,g as Q}from"./filterByConnections-C3MKsUyg.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],V=I("search",R),X=()=>{const{updatePageParams:r,searchBy:n}=B();return s.jsx(O,{selectorLabel:"Search by",options:Object.values(j),onChange:i=>r({searchBy:i}),selected:n,display:b.Dropdown,selectorStyle:{marginLeft:"1em",marginBottom:"0em"}})};function $(){const{searchBy:r,objectType:n}=B(),{censuses:i,territories:o,languagesInSelectedSource:l,locales:F,writingSystems:x,variantTags:L}=v(),g=w(),u=G(),y=k(),S=z(),m=H(),p=J(),a=C(),T=f.useMemo(()=>{switch(n){case c.Language:return l;case c.Locale:return F;case c.Territory:return o;case c.WritingSystem:return x;case c.Census:return Object.values(i);case c.VariantTag:return L}},[i,l,F,o,L,x,n,r]),[h,M]=f.useMemo(()=>[e=>{let t=0;return m(e)||(t+=1),S(e)||(t+=2),p(e)||(t+=4),y(e)||(t+=8),u(e)||(t+=16),g(e)||(t+=32),t},e=>m(e)?S(e)?p(e)?y(e)?u(e)?g(e)?"matched":"not "+a.languageScope:"not "+a.modalityFilter:"not "+a.territoryScope:"not "+a.territoryFilter:"not "+a.writingSystemFilter:"not "+a.languageFilter],[m,S,p,y,u,g,a]);return f.useCallback(async d=>{const P=Q(d,r);return(T||[]).filter(P).sort((e,t)=>h(e)-h(t)).slice(0,K).map(e=>{const t=s.jsx(W,{object:e,field:r,query:d,showOriginalName:!0}),D=N(e,r);return{objectID:e.ID,searchString:D,label:t,group:M(e)}})},[T,r,h,M])}const ee=()=>{const{searchString:r,updatePageParams:n}=B(),i=$(),o=l=>n({searchString:l});return s.jsx(E,{display:b.ButtonList,children:s.jsxs("form",{className:"selector",style:{display:"inline-flex",alignItems:"center",marginBottom:"0.5em"},children:[s.jsx(U,{label:s.jsx(V,{size:"1em",display:"block",style:{padding:"0.5em"}}),inputStyle:{minWidth:"20em",border:"none"},getSuggestions:i,onSubmit:o,placeholder:"search",pageParameter:_.searchString,value:r}),s.jsx(X,{})]})})};export{ee as S};
