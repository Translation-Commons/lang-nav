import{r as n,j as e,u as b,V as x,P as y}from"./index-q73fKP-g.js";import{p as P,q as L,a as h,r as I,o as j,P as v,X as R,l as B}from"./filter-BEWNmn-M.js";const D=t=>{const s=n.useRef(null),[r,u]=n.useState(50);return n.useEffect(()=>{s.current&&u(s.current.offsetWidth+10)},[t]),{CalculateWidthFromHere:e.jsx("span",{ref:s,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:t||" "}),width:r}},F=({getSuggestions:t=()=>[],inputStyle:s,onChange:r,display:u,pageParameter:d,placeholder:m,value:a})=>{const{CalculateWidthFromHere:f,width:S}=D(a),[i,l]=n.useState(a);n.useEffect(()=>{l(a)},[a,l]),n.useEffect(()=>{const o=setTimeout(()=>r(i),300);return()=>clearTimeout(o)},[i]);const[c,w]=n.useState([]),[C,g]=n.useState(!1);return n.useEffect(()=>{let o=!0;return(async()=>{const p=await t(i);o&&w(p.slice(0,10))})(),()=>{o=!1}},[t,i]),e.jsxs(e.Fragment,{children:[C&&c.length>0&&e.jsx(P,{children:c.map((o,p)=>e.jsx(T,{pageParameter:d,position:L(p,c.length),setImmediateValue:l,suggestion:o},p))}),e.jsx("input",{type:"text",id:d,className:i===""?"empty":"",value:i,onChange:o=>{l(o.target.value),g(!0)},onBlur:()=>setTimeout(()=>g(!1),500),onFocus:()=>g(!0),placeholder:m,style:{borderRadius:u===h.ButtonList?"0.5em":void 0,padding:"0.5em",lineHeight:"1.5em",...s,width:S+5}}),f,e.jsx(W,{onClick:()=>{l(""),g(!1)},display:u})]})},T=({pageParameter:t,position:s=v.Standalone,setImmediateValue:r,suggestion:u})=>{const{objectID:d,searchString:m,label:a}=u,{updatePageParams:f,view:S}=b(),i=()=>{r(m)},l=()=>{f({objectID:d,view:x.Details,searchString:m})},c=I(h.Dropdown,!1,s);return S==x.Details&&t===y.searchString?e.jsx(j,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",m]}),onClick:l,style:c,children:a}):e.jsx("button",{onClick:i,style:c,children:a})},W=({onClick:t,display:s})=>e.jsx(j,{buttonType:"reset",hoverContent:"Clear the input",onClick:t,style:{...s===h.ButtonList?{borderRadius:"0.5em",border:"none"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},padding:"0.5em"},children:e.jsx(R,{size:"1em",display:"block"})}),N=()=>{const{limit:t,updatePageParams:s}=b();return e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center"},children:[e.jsx(B,{description:"Limit how many results are shown.",label:"Item Limit",display:h.ButtonList}),e.jsx(F,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"}],onChange:r=>s({limit:parseInt(r)}),display:h.ButtonList,pageParameter:y.limit,placeholder:"âˆž",value:t<1||Number.isNaN(t)?"":t.toString()})]})};export{N as L,F as T};
