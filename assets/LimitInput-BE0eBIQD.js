import{j as e,H as N,r as u,u as y,V as p}from"./index-M_9FsYWa.js";import{c as F,u as E,H as j,X as I,E as T}from"./getObjectName-DTvAG_-s.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],H=F("funnel",A),S=({label:t,description:i,optionsDisplay:s,style:n})=>t==null?null:e.jsx("span",{style:{marginLeft:s===m.ButtonGroup?"-0.125em":"0",marginRight:s===m.ButtonGroup?"-0.125em":"0",lineHeight:"1em",fontWeight:"bold",padding:"0.5em",whiteSpace:"nowrap",borderTopLeftRadius:s===m.ButtonList?"0":"1em",borderBottomLeftRadius:s===m.ButtonList?"0":"1em",...n},children:e.jsx(N,{hoverContent:i,style:{textDecoration:"none"},children:t})});var m=(t=>(t.Dropdown="dropdown",t.ButtonGroup="buttonGroup",t.ButtonList="buttonList",t))(m||{});function $({selectorLabel:t,selectorDescription:i,size:s="regular",getOptionDescription:n=()=>{},getOptionLabel:o=f=>f,selected:a,optionsDisplay:r="buttonList",onChange:l,options:x}){const[f,h]=u.useState(!1),c=E(()=>h(!1));return e.jsxs("div",{className:"selector "+s+" "+r,style:{marginLeft:"0.125em",marginRight:"0.5em",display:"flex",flexDirection:r==="buttonList"?"column":"row",alignItems:r==="buttonList"?"start":"end",gap:r==="buttonGroup"?"-0.125em":"0"},children:[e.jsx(S,{label:t,description:i,optionsDisplay:r}),r==="dropdown"&&e.jsx(C,{getOptionDescription:n,getOptionLabel:d=>`${o(d)} ${f?"▼":"▶"}`,onClick:()=>h(d=>!d),option:Array.isArray(a)?a[0]:a,optionsDisplay:r,isSelected:!0}),e.jsx(W,{isExpanded:f,containerRef:c,optionsDisplay:r,children:e.jsx(G,{getOptionDescription:n,getOptionLabel:o,onClick:d=>{h(!1),l(d)},options:x,optionsDisplay:r,selected:a})})]})}const W=({children:t,containerRef:i,isExpanded:s,optionsDisplay:n})=>{switch(n){case"buttonList":return e.jsx("div",{ref:i,style:{display:"flex",flexWrap:"wrap",gap:"0.25em 0.5em",marginLeft:"1em"},children:t});case"buttonGroup":return e.jsx(e.Fragment,{children:t});case"dropdown":return s?e.jsx("div",{style:{position:"relative"},ref:i,children:e.jsx("div",{className:"dropdown",style:{alignItems:"end",position:"absolute",display:"flex",right:"0px",flexDirection:"column",width:"fit-content",zIndex:100},children:t})}):null}};function G({getOptionDescription:t=()=>{},getOptionLabel:i=r=>r,onClick:s,options:n,optionsDisplay:o,selected:a}){return n.map((r,l)=>e.jsx(C,{getOptionDescription:t,getOptionLabel:i,onClick:s,option:r,optionsDisplay:o,isSelected:Array.isArray(a)?a.includes(r):a===r,position:l==0?"first":l==n.length-1?"last":"middle"},r))}function C({getOptionDescription:t=()=>{},getOptionLabel:i=l=>l,isSelected:s,onClick:n,option:o,optionsDisplay:a,position:r="standalone"}){return e.jsx(j,{className:"selectorOption "+(s?"selected":"notselected"),hoverContent:t(o),onClick:()=>n(o),style:k(a,s,r),children:i(o)})}function k(t,i,s){let n="0px",o="0.125em solid var(--color-button-primary)",a,r;switch(t){case"buttonGroup":s==="last"?n="0 1em 1em 0":s==="first"&&(n="1em 0 0 1em");break;case"buttonList":n="1em",i||(o="0.125em solid var(--color-button-secondary)");break;case"dropdown":a="100%",n=void 0,s==="first"?(n="1em 1em 0 0",r="0 0 -0.125em 0"):s==="last"?(n="0 0 1em 1em",r="0"):s==="middle"?r="0 0 -0.125em 0":s==="standalone"&&(n="1em",a="fit-content");break}return{border:o,borderRadius:n,cursor:"pointer",lineHeight:"1em",padding:"0.5em",margin:r,width:a,whiteSpace:"nowrap"}}var w=(t=>(t.Standalone="standalone",t.First="first",t.Last="last",t.Middle="middle",t))(w||{});const O=({getSuggestions:t=()=>[],inputStyle:i,onChange:s,optionsDisplay:n,placeholder:o,showGoToDetailsButton:a=!1,showTextInputButton:r=!0,value:l})=>{const x=u.useRef(null),[f,h]=u.useState(50);u.useEffect(()=>{x.current&&h(x.current.offsetWidth+10)},[l]);const[c,d]=u.useState(l);u.useEffect(()=>{d(l)},[l,d]),u.useEffect(()=>{const g=setTimeout(()=>s(c),300);return()=>clearTimeout(g)},[c]);const[v,R]=u.useState([]),[B,L]=u.useState(!1);return u.useEffect(()=>{let g=!0;return(async()=>{const b=await t(c);g&&R(b.slice(0,10))})(),()=>{g=!1}},[t,c]),e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",className:c===""?"empty":"",value:c,onChange:g=>{d(g.target.value),L(!0)},onBlur:()=>setTimeout(()=>L(!1),500),onFocus:()=>L(!0),placeholder:o,style:{...n===m.ButtonList?{borderRadius:"0.5em"}:{},...i,width:f+5}}),e.jsx("span",{ref:x,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:l||" "}),B&&v.length>0&&e.jsx("div",{className:"SelectorPopupAnchor",children:e.jsx("div",{className:"SelectorPopup",style:{border:"none"},children:v.map((g,b)=>e.jsx(z,{position:b===0?w.First:b===v.length-1?w.Last:w.Middle,setImmediateValue:d,showTextInputButton:r,showGoToDetailsButton:a,suggestion:g},b))})}),e.jsx(j,{hoverContent:"Clear the input",style:n===m.ButtonList?{padding:".5em",borderRadius:"0.5em",border:"none",marginLeft:"0.5em"}:{marginRight:"0em",borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px",borderLeft:"none"},onClick:()=>{d(""),L(!1)},children:e.jsx(I,{size:"1em",display:"block"})})]})},z=({position:t=w.Standalone,setImmediateValue:i,showGoToDetailsButton:s,showTextInputButton:n,suggestion:o})=>{const{objectID:a,searchString:r,label:l}=o,{updatePageParams:x}=y(),f=()=>{i(r)},h=()=>{x({objectID:a,view:p.Details,searchString:r})},c=k(m.Dropdown,!1,t);return s?n?e.jsxs("div",{className:"SuggestionRowWithMultipleInteractions",style:{...c,display:"flex",flexDirection:"row",alignItems:"center",padding:"0.125em",justifyContent:"end",backgroundColor:"var(--color-background)"},children:[e.jsx("div",{style:{whiteSpace:"nowrap",maxWidth:"12em",overflow:"hidden",textOverflow:"ellipsis",paddingLeft:"1em",margin:"none"},children:l}),e.jsx(j,{hoverContent:e.jsxs(e.Fragment,{children:['Filter by "',r,'"']}),onClick:f,style:{width:"fit-content"},children:e.jsx(H,{size:"1em",display:"block"})}),e.jsx(j,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",r]}),onClick:h,style:{width:"fit-content"},children:e.jsx(T,{size:"1em",display:"block"})})]}):e.jsx(j,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",r]}),onClick:h,style:c,children:l}):n?e.jsx("button",{onClick:f,style:c,children:l}):l},_=()=>{const{limit:t,objectType:i,updatePageParams:s,view:n}=y();return e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center"},children:[e.jsx(S,{description:`Limit how many ${i.toLowerCase()} ${P(n)} are shown.`,label:"Item Limit",optionsDisplay:m.ButtonList}),e.jsx(O,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"}],onChange:o=>s({limit:parseInt(o)}),optionsDisplay:m.ButtonList,placeholder:"∞",value:t<1||Number.isNaN(t)?"":t.toString()})]})};function P(t){switch(t){case p.CardList:return"cards";case p.Hierarchy:return"root nodes";case p.Details:return"not applicable";case p.Table:return"rows";case p.Reports:return"reports"}}export{_ as L,m as O,$ as S,O as T,S as a};
