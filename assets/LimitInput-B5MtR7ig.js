import{r as t,j as e,u as S,V as y,P as I}from"./index-Ba1pVkRi.js";import{o as v,O as m,n as j,X as L,p as R,P as C,m as D}from"./filter-W6ecf7ep.js";const k=({getSuggestions:s=()=>[],inputStyle:r,onChange:l,optionsDisplay:d,pageParameter:h,placeholder:u,value:n})=>{const c=t.useRef(null),[f,x]=t.useState(50);t.useEffect(()=>{c.current&&x(c.current.offsetWidth+10)},[n]);const[i,o]=t.useState(n);t.useEffect(()=>{o(n)},[n,o]),t.useEffect(()=>{const a=setTimeout(()=>l(i),300);return()=>clearTimeout(a)},[i]);const[b,w]=t.useState([]),[P,p]=t.useState(!1);return t.useEffect(()=>{let a=!0;return(async()=>{const g=await s(i);a&&w(g.slice(0,10))})(),()=>{a=!1}},[s,i]),e.jsxs(e.Fragment,{children:[P&&b.length>0&&e.jsx("div",{style:{position:"relative"},children:e.jsx("div",{className:"SelectorPopup",style:{background:"var(--color-background)",border:"none",borderRadius:"1em",alignItems:"start",position:"absolute",display:"flex",left:"0px",flexDirection:"column",width:"fit-content",zIndex:100},children:b.map((a,g)=>e.jsx(B,{pageParameter:h,position:v(g,b.length),setImmediateValue:o,suggestion:a},g))})}),e.jsx("input",{type:"text",className:i===""?"empty":"",value:i,onChange:a=>{o(a.target.value),p(!0)},onBlur:()=>setTimeout(()=>p(!1),500),onFocus:()=>p(!0),placeholder:u,style:{...d===m.ButtonList?{borderRadius:"0.5em"}:{},...r,width:f+5}}),e.jsx("span",{ref:c,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",font:"inherit"},children:n||" "}),e.jsx(j,{hoverContent:"Clear the input",style:d===m.ButtonList?{padding:".5em",borderRadius:"0.5em",border:"none",marginLeft:"0.5em"}:{marginRight:"0em",borderRadius:"0 1em 1em 0",borderLeft:"none"},onClick:()=>{o(""),p(!1)},children:e.jsx(L,{size:"1em",display:"block"})})]})},B=({pageParameter:s,position:r=C.Standalone,setImmediateValue:l,suggestion:d})=>{const{objectID:h,searchString:u,label:n}=d,{updatePageParams:c,view:f}=S(),x=()=>{l(u)},i=()=>{c({objectID:h,view:y.Details,searchString:u})},o=R(m.Dropdown,!1,r);return f==y.Details&&s===I.searchString?e.jsx(j,{hoverContent:e.jsxs(e.Fragment,{children:["Go to the details page for ",u]}),onClick:i,style:o,children:n}):e.jsx("button",{onClick:x,style:o,children:n})},T=()=>{const{limit:s,updatePageParams:r}=S();return e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"end"},children:[e.jsx(D,{style:{lineHeight:"1.25em"},description:"Limit how many results are shown.",label:"Item Limit",optionsDisplay:m.ButtonList}),e.jsx(k,{inputStyle:{minWidth:"3em"},getSuggestions:async()=>[{searchString:"8",label:"8"},{searchString:"20",label:"20"},{searchString:"100",label:"100"},{searchString:"200",label:"200"}],onChange:l=>r({limit:parseInt(l)}),optionsDisplay:m.ButtonList,placeholder:"âˆž",value:s<1||Number.isNaN(s)?"":s.toString()})]})};export{T as L,k as T};
