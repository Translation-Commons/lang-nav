import{c as w,O as a,j as i,f as b,r as L,H as N,b as x,S as g,u as y,a as o,T as P}from"./index-DLw8IQsG.js";import{d as S,a as A}from"./DataContext-BERRLHIR.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ne=w("external-link",D);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],B=w("info",M);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],re=w("x",W),te=({objectType:e})=>{switch(e){case a.Census:return i.jsxs(i.Fragment,{children:[i.jsx("label",{children:"Census:"})," A count of people in a given area -- for this site this is typically the count of people that speak or understand a language."]});case a.Language:return i.jsxs(i.Fragment,{children:[i.jsx("label",{children:"Language (Languoid):"}),'A verbal communication system used by multiple people. Languages should be mutually intelligible, whereas a dialect is a subset of a language defined by differences in lexicon and pronunciation. Since languages families, contested languages, and dialects are included it is more precise to consider these "Languoids".']});case a.Locale:return i.jsxs(i.Fragment,{children:[i.jsx("label",{children:"Locale:"}),"The combination of a language and territory -- used to express how many people speak a language in a given area or if a language is officially supported. Some locales specify a particular writing system and/or variation information (dialect, orthography...)."]});case a.Territory:return i.jsxs(i.Fragment,{children:[i.jsx("label",{children:"Territory:"}),"A geographical unit. Some may not have universal recognition. Currently showing both countries as well as dependencies (eg. Hong Kong) that have separate ISO codes."]});case a.WritingSystem:return i.jsxs(i.Fragment,{children:[i.jsx("label",{children:"Writing System:"}),"A system for writing a language to a persistent visual media. For instance Latin alphabet, Han characters, cursive Arabic script. Some systems may contain other systems."]});case a.VariantTag:return i.jsxs(i.Fragment,{children:[i.jsx("label",{children:"Variant Tag:"}),'The Internet Assigned Numbers Authority (IANA) maintains an enumeration of language tags in common usage. The "variant" tags are used in composite locales in the form ',i.jsx("code",{children:"ca_valencia"})," or ",i.jsx("code",{children:"ca-u-va-valencia"}),". These are typically used to specify a particular orthography or dialect."]})}},H=({children:e,className:r,hoverContent:t,onClick:n,style:s})=>{const{showHoverCard:u,hideHoverCard:l}=b();if(t==null)return i.jsx("button",{className:r,onClick:n,style:{cursor:n?"pointer":"auto",...s},type:"button",children:e});const c=p=>{u(t,p.clientX,p.clientY)},d=p=>{u(t,p.clientX,p.clientY)};return i.jsx("button",{className:r,onMouseEnter:c,onMouseMove:d,onMouseLeave:l,onClick:()=>{l(),n!=null&&n()},style:{cursor:n?"pointer":"auto",...s},children:e})};var m=(e=>(e.Standalone="standalone",e.First="first",e.Middle="middle",e.Last="last",e.Only="only",e))(m||{});function j(e,r){return r===1?"only":e===0?"first":e===r-1?"last":"middle"}function V(e){const r=L.useRef(null);return L.useEffect(()=>{function t(n){r.current&&!r.current.contains(n.target)&&e()}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[e]),r}const I=({label:e,description:r,optionsDisplay:t,style:n})=>e==null?null:i.jsxs("span",{style:{...$(t),...n},children:[e,r&&i.jsx(N,{hoverContent:r,style:{marginLeft:"0.25em"},children:i.jsx(B,{size:"1em",style:{verticalAlign:"middle"}})})]});function $(e){const r={lineHeight:"1em",fontWeight:"bold",padding:"0.5em",whiteSpace:"nowrap",borderRadius:"1em"};switch(e){case h.ButtonGroup:r.borderRadius="1em 0 0 1em",r.marginLeft="-0.125em",r.marginRight="-0.125em";break;case h.ButtonList:r.borderRadius="1em 0 0 1em";break;case h.InlineDropdown:r.padding="0 0.5em";break;case h.Dropdown:break}return r}var h=(e=>(e.Dropdown="dropdown",e.InlineDropdown="inlineDropdown",e.ButtonGroup="buttonGroup",e.ButtonList="buttonList",e))(h||{});function ae({getOptionDescription:e=()=>{},getOptionLabel:r=d=>d,onChange:t,options:n,optionsDisplay:s="buttonList",selected:u,selectorDescription:l,selectorLabel:c}){const[d,p]=L.useState(!1),R=V(()=>p(!1));return i.jsxs(U,{optionsDisplay:s,children:[c&&i.jsx(I,{label:c,description:l,optionsDisplay:s}),i.jsx(_,{isExpanded:d,containerRef:R,optionsDisplay:s,children:i.jsx(q,{getOptionDescription:e,getOptionLabel:r,onClick:f=>{p(!1),t(f)},options:n,optionsDisplay:s,selected:u})}),(s==="dropdown"||s==="inlineDropdown")&&i.jsx(F,{getOptionDescription:e,getOptionLabel:f=>`${r(f)} ${d?"▼":"▶"}`,onClick:()=>p(f=>!f),option:Array.isArray(u)?u[0]:u,optionsDisplay:s,isSelected:!0})]})}const U=({children:e,optionsDisplay:r})=>{const t={display:"flex",flexDirection:"row",alignItems:"end",marginLeft:"0.125em",marginRight:"0.5em",marginBottom:"0.5em"};return r==="buttonList"?(t.flexDirection="column",t.alignItems="start"):r==="inlineDropdown"?(t.marginLeft="0",t.marginRight="0",t.marginBottom="0"):r==="buttonGroup"&&(t.gap="-0.125em"),i.jsx("div",{className:"selector "+r,style:t,children:e})},_=({children:e,containerRef:r,isExpanded:t,optionsDisplay:n})=>{switch(n){case"buttonList":return i.jsx("div",{ref:r,style:{display:"flex",flexWrap:"wrap",gap:"0.25em 0.25em",marginLeft:"1em"},children:e});case"buttonGroup":return i.jsx(i.Fragment,{children:e});case"dropdown":case"inlineDropdown":return t?i.jsx("div",{style:{position:"relative"},ref:r,children:i.jsx("div",{className:"dropdown",style:{alignItems:"start",position:"absolute",display:"flex",left:"0px",flexDirection:"column",width:"fit-content",zIndex:100,marginTop:n==="inlineDropdown"?"0.25em":"0",backgroundColor:"var(--color-background)",borderRadius:"1em",maxHeight:"20em",overflowY:"auto"},children:e})}):null}};function q({getOptionDescription:e=()=>{},getOptionLabel:r=l=>l,onClick:t,options:n,optionsDisplay:s,selected:u}){return n.map((l,c)=>i.jsx(F,{getOptionDescription:e,getOptionLabel:r,onClick:t,option:l,optionsDisplay:s,isSelected:Array.isArray(u)?u.includes(l):u===l,position:j(c,n.length)},l))}function F({getOptionDescription:e=()=>{},getOptionLabel:r=c=>c,isSelected:t,onClick:n,option:s,optionsDisplay:u,position:l=m.Standalone}){let c="selectorOption";return t&&(c+=" selected"),t||(c+=" unselected"),u==="inlineDropdown"&&l===m.Standalone&&(c+=" hoverableText"),i.jsx(H,{className:c,hoverContent:e(s),onClick:()=>n(s),style:k(u,t,l),children:r(s)})}function k(e,r,t){const n={border:"0.125em solid var(--color-button-primary)",borderRadius:"0px",cursor:"pointer",lineHeight:"1em",padding:"0.5em",whiteSpace:"nowrap"};switch(e){case"buttonGroup":t===m.Last?(n.marginLeft="-0.125em",n.borderRadius="0 1em 1em 0"):t===m.First?n.borderRadius="1em 0 0 1em":t===m.Middle&&(n.marginLeft="-0.125em");break;case"buttonList":n.borderRadius="1em",r||(n.border="0.125em solid var(--color-button-secondary)");break;case"inlineDropdown":return t===m.Standalone?(n.margin="-0.25em",n.border="none",n.borderRadius=".5em",n.padding="0.25em",n):k("dropdown",r,t);case"dropdown":n.textAlign="left",n.width="100%",n.borderRadius=void 0,t===m.First?(n.borderRadius="1em 1em 0 0",n.margin="0 0 -0.125em 0",n.borderBottom="none"):t===m.Last?(n.borderRadius="0 0 1em 1em",n.margin="0",n.borderTop="none"):t===m.Middle?(n.margin="0 0 -0.125em 0",n.borderTop="none",n.borderBottom="none"):t===m.Only?n.borderRadius="1em":t===m.Standalone&&(n.borderRadius="1em",n.width="fit-content");break}return n}function se(e){switch(e.type){case a.Census:return[e.modality,e.proficiency,e.acquisitionOrder,e.domain&&e.domain!="Any"?"@"+e.domain:null].filter(r=>r!=null&&r!="Any").join(", ");case a.Language:return z(e);case a.Locale:return;case a.Territory:return e.scope;case a.WritingSystem:return e.nameDisplay!=e.nameFull?e.nameFull:void 0}}function z(e){let r=e.nameSubtitle,t=e.scope;r==="macrolanguage"&&(r=void 0),t==x.Language&&(t=void 0);const n=[t,r].filter(Boolean).join(", ");return n!==""?n:void 0}function ie(e){switch(e){case a.Census:return"censuses";case a.Language:return"languages";case a.Locale:return"locales";case a.Territory:return"territories";case a.WritingSystem:return"writing systems";case a.VariantTag:return"variant tags"}}function G(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const X=({text:e,searchPattern:r})=>{if(r==="")return e;const t=G(r),n=e.match(new RegExp(`(^|.*\\P{L})(${t})(?:(.*\\P{L})(${t}))*?(.*)`,"iu"));return n?i.jsx(i.Fragment,{children:n.slice(1).map((s,u)=>u%2===0?s:i.jsx("span",{className:"highlighted",children:s},u))}):e},oe=({object:e,field:r})=>{const{searchBy:t,searchString:n}=y(),s=n.toLowerCase();return t===r?i.jsx(C,{object:e,query:n,field:r}):t===g.AllNames&&[g.EngName,g.Endonym].includes(r)?i.jsx(C,{object:e,query:n,field:r}):t===g.NameOrCode&&[g.EngName,g.Code].includes(r)?i.jsx(C,{object:e,query:n,field:r}):v(e,r,s)},C=({object:e,field:r,query:t})=>i.jsx(X,{text:v(e,r,t),searchPattern:t.toLowerCase()});function v(e,r,t){switch(r){case g.AllNames:return e.names.filter(n=>S(n,(t==null?void 0:t.toLowerCase())??""))[0]??"";case g.Code:return e.codeDisplay;case g.Endonym:return e.nameEndonym??"";case g.EngName:return e.nameDisplay;case g.NameOrCode:return e.nameDisplay+" ["+e.codeDisplay+"]"}}function T(e,r,t){switch(e.type){case a.Language:return(e.populationCited??0)+(r&&t?e.sourceSpecific[t].populationOfDescendents??0:0);case a.Locale:return e.populationSpeaking;case a.Census:return e.languageCount;case a.WritingSystem:return e.populationUpperBound+(r?e.populationOfDescendents:0);case a.Territory:return e.population;case a.VariantTag:return e.languages.reduce((n,s)=>n+(s.populationCited||0),0)}}function ue(e,r){const{sortBy:t,languageSource:n,sortDirection:s}=y(),l=Y(t,n,e??!1);return s==="reverse"?(c,d)=>-l(c,d):l}function Y(e,r,t){switch(e){case o.Code:return(n,s)=>n.codeDisplay>s.codeDisplay?1:s.codeDisplay>n.codeDisplay?-1:0;case o.Name:return(n,s)=>n.nameDisplay>s.nameDisplay?1:s.nameDisplay>n.nameDisplay?-1:0;case o.Endonym:return(n,s)=>n.nameEndonym==null?s.nameEndonym==null?0:1:s.nameEndonym==null?-1:n.nameEndonym>s.nameEndonym?1:s.nameEndonym>n.nameEndonym?-1:0;case o.CountOfTerritories:return(n,s)=>{switch(n.type){case a.Language:return s.type===a.Language?O(s).length-O(n).length:-1;case a.Locale:return 0;case a.Census:return 0;case a.WritingSystem:return 0;case a.Territory:return s.type===a.Territory?s.containsTerritories.length-n.containsTerritories.length:-1;case a.VariantTag:return 0}};case o.CountOfLanguages:return(n,s)=>{var u,l,c,d;switch(n.type){case a.Language:return s.type===a.Language?s.childLanguages.length-n.childLanguages.length:-1;case a.Locale:return s.type===a.Locale?(((u=s.containedLocales)==null?void 0:u.length)||0)-(((l=n.containedLocales)==null?void 0:l.length)||0):-1;case a.Census:return s.type===a.Census?s.languageCount-n.languageCount:-1;case a.WritingSystem:return s.type===a.WritingSystem?Object.values(s.languages).length-Object.values(n.languages).length:-1;case a.Territory:return s.type===a.Territory?s.locales.length-n.locales.length:-1;case a.VariantTag:return s.type===a.VariantTag?(((c=s.languageCodes)==null?void 0:c.length)||0)-(((d=n.languageCodes)==null?void 0:d.length)||0):-1}};case o.Population:return(n,s)=>T(s,t,r)-T(n,t,r);case o.RelativePopulation:return(n,s)=>{var u,l;switch(n.type){case a.Census:case a.Language:case a.WritingSystem:case a.VariantTag:return 0;case a.Locale:return s.type===a.Locale?(s.populationSpeakingPercent??0)-(n.populationSpeakingPercent??0):-1;case a.Territory:return s.type===a.Territory?s.population/(((u=s.parentUNRegion)==null?void 0:u.population)??1)-n.population/(((l=n.parentUNRegion)==null?void 0:l.population)??1):-1}};case o.Literacy:return(n,s)=>{switch(n.type){case a.Census:case a.Language:case a.WritingSystem:case a.VariantTag:return 0;case a.Locale:return s.type===a.Locale?(s.literacyPercent??0)-(n.literacyPercent??0):-1;case a.Territory:return s.type===a.Territory?(s.literacyPercent??0)-(n.literacyPercent??0):-1}};case o.Date:return(n,s)=>E(s)-E(n)}}function le(e){switch(e){case a.Locale:return[o.Code,o.Name,o.Endonym,o.Population,o.Literacy,o.RelativePopulation,o.CountOfLanguages];case a.Territory:return[o.Code,o.Name,o.Population,o.Literacy,o.CountOfLanguages,o.CountOfTerritories];case a.Language:return[o.Code,o.Name,o.Endonym,o.Population,o.CountOfTerritories,o.CountOfLanguages];case a.Census:return[o.Date,o.Code,o.Name,o.Population,o.CountOfLanguages];case a.WritingSystem:return[o.Code,o.Name,o.Endonym,o.Population,o.CountOfLanguages];case a.VariantTag:return[o.Date,o.Code,o.Name,o.Population,o.CountOfLanguages]}}function O(e){return A(e.locales.sort((r,t)=>(t.populationSpeaking??0)-(r.populationSpeaking??0)).map(r=>{var t;return((t=r.territory)==null?void 0:t.nameDisplay)??r.territoryCode}).filter(r=>r!=null&&r!==""),r=>r)}function E(e){var r;switch(e.type){case a.Census:return e.yearCollected;case a.VariantTag:return((r=e.dateAdded)==null?void 0:r.getTime())??0;default:return 0}}function ce(){const{searchBy:e,searchString:r}=y();return r==""?()=>!0:K(r.toLowerCase(),e)}function K(e,r){const t=e.toLowerCase();switch(r){case g.Code:case g.Endonym:case g.EngName:case g.NameOrCode:return n=>S(v(n,r),t);case g.AllNames:return n=>n.names.map(s=>S(s,t)).reduce((s,u)=>s||u,!1)}}function ge(){var s,u;const{territoryFilter:e}=y(),r=e.split("["),t=(s=r[0])==null?void 0:s.toLowerCase().trim();let n="";return e.length===2?n=e.toUpperCase():e.length===3&&e.match(/^[0-9]{3}$/)?n=e:r.length>1&&(n=(u=r[1].split("]")[0])==null?void 0:u.toUpperCase()),L.useCallback(l=>{if(e=="")return!0;const c=Q(l);return n!==""?c.some(d=>d.ID===n):c.some(d=>d.nameDisplay.toLowerCase().startsWith(t))},[e,n,t])}function Q(e){switch(e.type){case a.Territory:return[e,e.parentUNRegion,e.sovereign].filter(r=>r!=null);case a.Locale:return[e.territory].filter(r=>r!=null);case a.Census:return[e.territory].filter(r=>r!=null);case a.Language:return e.locales.map(r=>r.territory).filter(r=>r!=null);case a.WritingSystem:return[e.territoryOfOrigin].filter(r=>r!=null);case a.VariantTag:return[]}}function de(){const{languageScopes:e,territoryScopes:r}=y();function t(n){switch(n.type){case a.Language:return e.length===0||e.includes(n.scope??x.SpecialCode);case a.Territory:return r.length===0||r.includes(n.scope);case a.Locale:return J(n,e,r);case a.Census:case a.WritingSystem:case a.VariantTag:return!0}}return t}function J(e,r,t){var u,l;const n=r.includes(((u=e.language)==null?void 0:u.scope)??x.SpecialCode),s=t.includes(((l=e.territory)==null?void 0:l.scope)??P.Country);return(r.length==0||n)&&(t.length==0||s)}function me(){const{page:e,limit:r}=y();return t=>r<1||t.length<r?t:t.slice(r*(e-1),r*e)}export{ne as E,H,B as I,h as O,m as P,ae as S,re as X,K as a,v as b,C as c,ue as d,ce as e,ge as f,de as g,me as h,O as i,T as j,te as k,ie as l,le as m,I as n,j as o,k as p,se as q,oe as r,V as u};
