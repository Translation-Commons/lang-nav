import{H as l,r as L,N as E,j as e,Q as G,T,U as D,W as S,X as A,Y as M,Z as w,$ as P,a0 as B,P as O,O as d,a1 as V,a2 as p,a3 as H,d as z,a4 as K,k as Q,a5 as U,a6 as $,a7 as q,L as X,a8 as N,a9 as u,aa as y,S as b,i as Y,ab as _,ac as J,ad as Z,ae as ee,af as te,R as W,J as se}from"./index-DhqR0ZD0.js";import{L as re,C as ae,a as oe}from"./ColorGradientSelector-CfWmzTDo.js";import{g as ie,a as k,L as ne,F as le}from"./BaseColorBar-BSLsGXGe.js";import{S as ce,T as C}from"./TextInput-BYrqtQMq.js";import{g as pe,a as ge,b as de}from"./filterByConnections-DGC691RZ.js";const ue=()=>{const{page:t,updatePageParams:r}=l();L.useEffect(()=>{const s=a=>{const o=a.target;o!==null&&o instanceof HTMLElement&&(o.tagName==="INPUT"||o.tagName==="TEXTAREA"||o.isContentEditable)||(a.key==="ArrowRight"?r({page:t+1}):a.key==="ArrowLeft"&&t>1&&r({page:t-1}))};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[t,r])};function I(t,r,s){return async a=>{const o=a.split("[")[0].trim(),i=pe(o,E.CodeOrNameAny);return t.filter(i).sort((n,g)=>r(n)-r(g)).slice(0,ce).map(n=>{const g=e.jsx(G,{object:n,field:E.CodeOrNameAny,query:o,showOriginalName:!0}),c=n.nameDisplay+" ["+n.ID+"]";return{objectID:n.ID,searchString:c,label:g,group:s(n)}})}}const ye=({display:t})=>{const{languageFilter:r,updatePageParams:s}=l(),{languagesInSelectedSource:a}=T(),o=D(S.Population),i=A(),n=ge(),g=de(),c=M(),{display:F}=w(),f=t??F,v=L.useMemo(()=>{const h=m=>{let x=0;return g(m)||(x+=1),n(m)||(x+=2),i(m)||(x+=4),x},R=m=>g(m)?n(m)?i(m)?"matched":"not "+c.languageScope:"not "+c.territoryFilter:"not "+c.writingSystemFilter;return I(a.sort(o),h,R)},[a,i,n,g,c,o]);return e.jsx(P,{display:f,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(B,{label:"Language",description:e.jsxs(e.Fragment,{children:['Filter results to those relevant to a specific language, language family, or dialect. You can enter either the language name or its code. For example, entering "Spanish" or ',e.jsx("code",{children:"spa"})," will filter to objects relevant to Spanish."," ",e.jsx(he,{})]})}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(C,{inputStyle:{minWidth:"8em"},getSuggestions:v,onSubmit:h=>s({languageFilter:h}),pageParameter:O.languageFilter,placeholder:"Name or code",value:r})})]})})},he=()=>{const{objectType:t}=l();switch(t){case d.Language:return e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Language view only:"})," Selecting a language family will show the languages in the family. Dialects will also appear if they are enabled."]});case d.Territory:return e.jsx(e.Fragment,{children:"This will filter territories to ones where the selected language is used."});case d.WritingSystem:return e.jsx(e.Fragment,{children:"This will filter writing systems to ones used for the selected language."});case d.VariantTag:return e.jsx(e.Fragment,{children:"This will filter variant tags for ones that are intended for this language."});case d.Locale:return e.jsx(e.Fragment,{children:"This will filter locales with the selected language."});case d.Census:return e.jsxs(e.Fragment,{children:[e.jsx(V,{size:"1em",style:{color:"var(--color-text-yellow)"}})," Censuses are not currently supported by this filter."]})}},me=()=>{const{modalityFilter:t,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Modality",labelWhenEmpty:"Any",selectorDescription:"Filter by how the language is primarily used: written, spoken, sign, or a combination.",options:Object.values(z).filter(a=>typeof a=="number"),onChange:a=>t.includes(a)?r({modalityFilter:t.filter(o=>o!==a)}):r({modalityFilter:[...t,a]}),selected:t,getOptionLabel:H})},Se=()=>{const{languageScopes:t,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Languoid Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of language-type objects are shown, such as families, macrolanguages, languages, dialects, and special codes.",options:Object.values(Q).filter(a=>typeof a=="number"),onChange:a=>t.includes(a)?r({languageScopes:t.filter(o=>o!=a)}):r({languageScopes:[...t,a]}),selected:t,getOptionLabel:K})},fe=({display:t})=>{const{territoryFilter:r,updatePageParams:s}=l(),{territories:a}=T(),o=A(),i=M(),n=D(S.Population),{display:g}=w(),c=t??g,F=L.useMemo(()=>{const f=h=>o(h)?0:1,v=h=>o(h)?"matched":"not "+i.territoryScope;return I(a.sort(n),f,v)},[a,o,i,n]);return e.jsx(P,{display:c,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(B,{label:"In Territory",description:"Filter results by ones relevant in a territory."}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(C,{inputStyle:{minWidth:"8em"},getSuggestions:F,onSubmit:f=>s({territoryFilter:f}),pageParameter:O.territoryFilter,placeholder:"Name or code",value:r})})]})})},xe=()=>{const{territoryScopes:t,updatePageParams:r,objectType:s}=l();return[d.Territory,d.Locale,d.Census].includes(s)?e.jsx(p,{selectorLabel:"Territory Type",labelWhenEmpty:"Any",selectorDescription:"Filter what level of territories are shown, such as countries, regions, and dependencies.",options:Object.values($).filter(o=>typeof o=="number"),onChange:o=>t.includes(o)?r({territoryScopes:t.filter(i=>i!=o)}):r({territoryScopes:[...t,o]}),selected:t,getOptionLabel:U}):null},be=()=>{const{isoStatus:t,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"ISO Language Status",selectorDescription:"Filter languages by their ISO status (Living, Extinct, etc.)",labelWhenEmpty:"Any",options:Object.values(X).filter(s=>typeof s=="number"),onChange:s=>t.includes(s)?r({isoStatus:t.filter(a=>a!==s)}):r({isoStatus:[...t,s]}),selected:t,getOptionLabel:q})},je=()=>{const{vitalityEthFine:t,updatePageParams:r}=l();return null},Le=()=>{const{vitalityEthCoarse:t,updatePageParams:r}=l();return null},we=({display:t})=>{const{writingSystemFilter:r,updatePageParams:s}=l(),{writingSystems:a}=T(),o=D(S.Population),{display:i}=w(),n=t??i,g=L.useMemo(()=>I(a.sort(o),c=>c.scope===N.IndividualScript?0:1,c=>c.scope===N.IndividualScript?"":"other types of scripts"),[a,o]);return e.jsx(P,{display:n,children:e.jsxs("div",{className:"selector",style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[e.jsx(B,{label:"Written in",description:"Filter results by ones written in this script."}),e.jsx(C,{inputStyle:{minWidth:"8em"},getSuggestions:g,onSubmit:c=>s({writingSystemFilter:c}),pageParameter:O.writingSystemFilter,placeholder:"Name or code",value:r})]})})},Pe=()=>{const{scaleBy:t,updatePageParams:r,objectType:s,view:a}=l(),{display:o}=w();return a!==u.Map?null:e.jsx(p,{selectorLabel:o===y.Dropdown?"Scale By":void 0,selectorDescription:"Choose a field to scale items by (map circles).",options:ie(s),onChange:i=>r({scaleBy:i}),selected:t})},Fe=()=>{const{secondarySortBy:t,updatePageParams:r,objectType:s}=l(),a=k(s),o=[S.None,...a];return e.jsx(p,{selectorLabel:"Secondary Sort By",selectorDescription:"Tie-breaker when the primary sort is equal.",options:o,onChange:i=>r({secondarySortBy:i}),selected:t??S.None,display:y.Dropdown})},ve=()=>{const{sortBy:t,updatePageParams:r,objectType:s}=l(),a=k(s);return e.jsx(p,{selectorLabel:"Sort By",selectorDescription:"Choose the order of items in the view.",options:Object.values(S).filter(o=>a.includes(o)),onChange:o=>r({sortBy:o}),selected:t,display:y.Dropdown})},Te=()=>{const{sortBehavior:t,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Sort Direction",options:[b.Normal,b.Reverse],getOptionLabel:s=>b[s],getOptionDescription:s=>s===b.Normal?"Sort with high numbers first / first letter in alphabet first.":"Sort with low numbers first / last letter in alphabet first.",onChange:s=>r({sortBehavior:s}),selected:t})},De=()=>{const{localeSeparator:t,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Locale Separator",selectorDescription:"Choose the separator in locale codes, eg. 'ar-EG' or 'ar_EG'",options:Object.values(Y),onChange:s=>r({localeSeparator:s}),selected:t})},Be=()=>{const{preference:t,setPreference:r}=_();return e.jsx(p,{selectorLabel:"Page Brightness",selectorDescription:"Choose how bright the page should be. This parameter is stored on your device.",options:["light","dark","follow device"],onChange:s=>r(s),selected:t,getOptionLabel:J})},Oe=()=>{const{profile:t,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Preset",selectorDescription:"Indicate the profile best describing what you are looking for. This will change the presets.",options:Object.values(Z),onChange:s=>r({profile:s}),selected:t})},Ce=()=>{const{view:t,updatePageParams:r}=l();return e.jsx(p,{selectorLabel:"Display",getOptionDescription:s=>e.jsx("img",{src:Ie(s),width:180}),options:Object.values(u),onChange:s=>r({view:s}),display:y.ButtonList,getOptionLabel:s=>[u.Map,u.Reports].includes(s)?e.jsxs(e.Fragment,{children:[s," ",e.jsx("em",{children:"β"})]}):s,selected:t})};function Ie(t){switch(t){case u.CardList:return"/lang-nav/cardlist.png";case u.Hierarchy:return"/lang-nav/hierarchy.png";case u.Map:return"/lang-nav/map.png";case u.Table:return"/lang-nav/table.png";case u.Reports:return"/lang-nav/reports.png"}}const ke=()=>(ue(),e.jsx(ee,{defaultWidth:300,purpose:"filters",title:"Options",children:e.jsxs(P,{display:y.Dropdown,children:[e.jsxs(j,{title:"Common Actions",optionsName:"common actions",children:[e.jsx("div",{}),e.jsx(te,{})]}),e.jsxs(j,{title:"Data",optionsName:"data options",children:[e.jsx(ne,{display:y.ButtonList}),e.jsx(Oe,{})]}),e.jsxs(j,{title:"Filter",optionsName:"filters",children:[e.jsx(fe,{display:y.ButtonList}),e.jsx(we,{display:y.ButtonList}),e.jsx(ye,{display:y.ButtonList}),e.jsx(Se,{}),e.jsx(me,{}),e.jsx(xe,{}),e.jsx(be,{}),e.jsx(je,{}),e.jsx(Le,{})]}),e.jsxs(j,{title:"View",optionsName:"view options",children:[e.jsx(Ce,{}),e.jsx(re,{}),e.jsx(ve,{}),e.jsx(Fe,{}),e.jsx(Te,{}),e.jsx(ae,{}),e.jsx(oe,{}),e.jsx(Pe,{}),e.jsx(le,{}),e.jsx(De,{}),e.jsx(Be,{})]})]})})),j=({children:t,title:r,optionsName:s})=>{const[a,o]=W.useState(!1),i=W.Children.toArray(t);return e.jsxs("div",{style:{borderTop:"0.125em solid var(--color-button-primary)",width:"100%",marginBottom:"0.5em"},children:[e.jsx("div",{style:{fontSize:"1.2em",fontWeight:"lighter",borderRadius:"0",width:"100%",textAlign:"left",backgroundColor:"var(--color-button-secondary)",padding:"0.5em"},children:r}),e.jsxs("div",{style:{display:"flex",padding:"0.25em 0.5em",gap:"0.5em",flexDirection:"column"},children:[i[0],a&&i.slice(1),e.jsx(se,{style:{padding:"0em 0.25em"},onClick:()=>o(n=>!n),children:a?`close extra ${s} ▲`:`see all ${s} ▶`})]})]})};export{ke as default};
